#No. 1
#File: USHibernateUtil.java

#Comment:
    /**
     * A path to the Hibernate configuration file. 
     */

#Code:
    protected SessionFactory buildSessionFactory() {
        try {
            cz.filmtit.core.Configuration projectConfiguration = ConfigurationSingleton.conf();

            // Create the SessionFactory from core.cfg.xml
            Configuration hibernateConfiguration = new Configuration();

            hibernateConfiguration.configure(getConfigurationFile());

            hibernateConfiguration.setProperty("hibernate.connection.username", projectConfiguration.dbUser());
            hibernateConfiguration.setProperty("hibernate.connection.password", projectConfiguration.dbPassword());
            hibernateConfiguration.setProperty("hibernate.connection.url", projectConfiguration.dbConnector());

            serviceRegistry = new ServiceRegistryBuilder().applySettings(hibernateConfiguration.getProperties()).buildServiceRegistry();
            sessionFactory = hibernateConfiguration.buildSessionFactory(serviceRegistry);
            return sessionFactory;
        }
        catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            logger.error("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

#No. 2
#File: CTarget.java

#Comment:
    /**
     * Overrides the standard grammar analysis so we can prepare the analyser
     * a little differently from the other targets.
     */

#Code:
    @Override
    protected void performGrammarAnalysis(CodeGenerator generator, Grammar grammar) {

        // Check to see if the maximum inline DFA states is still set to
        // the default size. If it is then whack it all the way up to the maximum that
        // we can sensibly get away with.
        //
        if (CodeGenerator.MAX_ACYCLIC_DFA_STATES_INLINE == CodeGenerator.MADSI_DEFAULT) {

            CodeGenerator.MAX_ACYCLIC_DFA_STATES_INLINE = 65535;
        }

        // Check to see if the maximum switch size is still set to the default
        // and bring it up much higher if it is. Modern C compilers can handle
        // much bigger switch statements than say Java can and if anyone finds a compiler
        // that cannot deal with such big switches, all the need do is generate the
        // code with a reduced -Xmaxswitchcaselabels nnn
        //
        if  (CodeGenerator.MAX_SWITCH_CASE_LABELS == CodeGenerator.MSCL_DEFAULT) {

            CodeGenerator.MAX_SWITCH_CASE_LABELS = 3000;
        }

        // Check to see if the number of transitions considered a miminum for using
        // a switch is still at the default. Because a switch is still generally faster than
        // an if even with small sets, and given that the optimizer will do the best thing with it
        // anyway, then we simply want to generate a switch for any number of states.
        //
        if (CodeGenerator.MIN_SWITCH_ALTS == CodeGenerator.MSA_DEFAULT) {

            CodeGenerator.MIN_SWITCH_ALTS = 1;
        }

        // Now we allow the superclass implementation to do whatever it feels it
        // must do.
        //
        super.performGrammarAnalysis(generator, grammar);
    }


#No. 3
#File: Grammar.java

#Comment:
	/** If someone does PLUS='+' in the parser, must make sure we get
	 *  "PLUS : '+' 
	 */

#Code:
	public void defineLexerRuleForAliasedStringLiteral(String tokenID,
													   String literal,
													   int tokenType)
	{
		if ( getGrammarIsRoot() ) { // don't build lexers for delegates
			//System.out.println("defineLexerRuleForAliasedStringLiteral: "+literal+" "+tokenType);
			lexerGrammarST.setAttribute("literals.{ruleName,type,literal}",
										tokenID,
										Utils.integer(tokenType),
										literal);
		}
		// track this lexer rule's name
		composite.lexerRules.add(tokenID);
	}

#No. 4
#File: Grammar.java

#Comment:
	/** A label on a rule is useless if the rule has no return value, no
	 *  tree or template output, and it is not referenced in an action.
	 */

#Code:
	protected void removeUselessLabels(Map ruleToElementLabelPairMap) {
		if ( ruleToElementLabelPairMap==null ) {
			return;
		}
		Collection labels = ruleToElementLabelPairMap.values();
		List kill = new ArrayList();
		for (Iterator labelit = labels.iterator(); labelit.hasNext();) {
			LabelElementPair pair = (LabelElementPair) labelit.next();
			Rule refdRule = getRule(pair.elementRef.getText());
			if ( refdRule!=null && !refdRule.getHasReturnValue() && !pair.actionReferencesLabel ) {
				//System.out.println(pair.label.getText()+" is useless");
				kill.add(pair.label.getText());
			}
		}
		for (int i = 0; i < kill.size(); i++) {
			String labelToKill = (String) kill.get(i);
			// System.out.println("kill "+labelToKill);
			ruleToElementLabelPairMap.remove(labelToKill);
		}
	}

#No. 5
#File: Tool.java

#Comment:
    /** If the tool needs to panic/exit, how do we do that?
     */

#Code:
    public void panic() {
        throw new Error("ANTLR panic");
    }

#No. 6
#File: DonovanDriveTrain.java

#Comment:
    /*
     * A FAILED attempt at driving straight.
     */

#Code:
    
    public void forwardInchesCharlie(int inches) {
    encoderRight.reset();
    encoderLeft.reset();
    double lm;
    double rm;
    int i = 0;
    while ((getAvgDistance() < inches) && donnie.isAutonomous() && donnie.isEnabled()) {
    /*if(i%10 == 0)
    System.out.println("diff: " + (encoderLeft.get()-encoderRight.get()));
    else if(i%50 == 0)
    System.out.println("left: " + encoderLeft.get() + "  right: " + encoderRight.get());
     * */
    
    lm = .5 + ((encoderRight.get() - encoderLeft.get()) / (SCALE));
    rm = .5 + ((encoderLeft.get() - encoderRight.get()) / SCALE);
    tankDrive((-1*lm), (-1*rm));
    i++;
    }
    tankDrive(0, 0);
    }

#No. 7
#File: DonovanDriveTrain.java

#Comment:
    /*
     * A SO FAR UNSUCCESSFUL attempt at drive straight code, ported from Michael1.
     */

#Code:
    
    public void forwardInchesMike(int inches){
    resetEncoders();
    donnie.gyro.reset();
    double p, i, d, err, lastErr;
    double multiplier = 0.3;
    p = i = d = err = 0;
    lastErr =  donnie.gyro.getAngle();
    while(getAvgDistance() < inches && donnie.isAutonomous() && donnie.isEnabled()) {
    err = donnie.gyro.getAngle();
    p = err;
    i = i + err * FWD_T;
    d = (err-lastErr)/FWD_T;
    lastErr = err;
    double diff = p*FWD_P + d*FWD_D + i*FWD_I;
    if (getAvgDistance() > inches - 7) {
    multiplier = (inches - getAvgDistance()) / 14;
    if (multiplier < .2)  {
    multiplier = 0.2;
    }
    }
    donnie.dt.tankDrive((multiplier - diff), (multiplier + diff));
    Timer.delay(FWD_T);


    }
    donnie.dt.tankDrive(0, 0);

    }


#No. 8
#File: ATKMonitorService.java

#Comment:
     /**
      * Only valid on API >= 8
      */

#Code:
     private long getUidTxBytes(int uid){
    	 String className = "android.net.TrafficStats";
  		String methodName = "getUidTxBytes";
  		try {
  			Class<?> handler = Class.forName(className);
  			Method m = handler.getDeclaredMethod(methodName, int.class);
  			long result = (Long) m.invoke(handler.newInstance(),uid);
  			return result;
  		} catch (Exception e) {
  			e.printStackTrace();
  			return -1;
  		}
     }

#No. 9
#File: ATKMonitorService.java

#Comment:
 	/**
 	 * Only valid on API >= 8
 	 */

#Code:
 	private long getTotalTxBytes() {
 		String className = "android.net.TrafficStats";
 		String methodName = "getTotalTxBytes";
 		try {
 			Class<?> handler = Class.forName(className);
 			Method m = handler.getDeclaredMethod(methodName, (Class[]) null);
 			long result = (Long) m.invoke(handler.newInstance());
 			return result;
 		} catch (Exception e) {
 			e.printStackTrace();
 			return -1;
 		}
 	}

#No. 10
#File: TestApk.java

#Comment:
	/**
	 * Black Box Test  Method
	 */

#Code:
	public void testDisplayBlackBox() throws Throwable {  
       String exitCommand="";
		//getting commands from remote service  and execute them
		do {
			if(remoteConnection!=null) {
				try  {
					 cmd=serviceb.getEvent();
					 if(cmd!=null){
						 exitCommand=cmd[0];
						 if(!cmd[0].equalsIgnoreCase("ExitSolo")) {
							 executeSoloCommand.execute(cmd);
							 Log.d(logTag, cmd[0]);
							}
					 }
					
				} catch (RemoteException e) {
					Log.d(logTag,e.getMessage(),e);	
				}
			}
		} while(!exitCommand.equalsIgnoreCase("ExitSolo"));


	}


#No. 11
#File: MyDisplayJAI.java

#Comment:
	/**
	 * constructor
	 */

#Code:
	public MyDisplayJAI(ComparaisonCouple couple, Model model, boolean isTest) {
		super();
		model.addObserver(this);
		mask=couple.getMaskSum();
		this.isTest=isTest;
		me = this;
		this.model = model;
		try {
			if (isTest){
				img = ImageIO.read(couple.getImgTest());
			}else{
				img = ImageIO.read(model.getRefImage(couple.getImgRefId()).getImage());	
			}
			w = img.getWidth();
			h = img.getHeight();
			bi = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);
			Graphics g = bi.getGraphics();

			Dimension dim = new Dimension(w,h);
			setPreferredSize(dim);
			setMinimumSize(dim);
			g.drawImage(img, 0, 0, null);
		} catch (IOException e) {
			e.printStackTrace();
		}
		diff = couple.getDifWithMask();
	}

#No. 12
#File: CreateGraph.java

#Comment:
	/**
	 * A new tcpdump line has been received
	 */

#Code:
	public void newTcpDumpLine(String line) {
		Date theDate = NetworkAnalysisUtils.extractTcpdumpLineDate(line);
		String url = NetworkAnalysisUtils.extractTcpdumpLineUrl(line);
		if (theDate != null && url != null) {
			GraphMarker urlMarker = mapAction.get("URL");
			if (urlMarker != null) {
				urlMarker.addEvent("Type", url, theDate, theDate);
				// Set marker to hidden if urlMarkers checkbox is not checked
				if (urlMarkersDisplayed == false) {
					urlMarker.removeMarker();
				}
				mapAction.put("URL", urlMarker);
			}
		}
	}

#No. 13
#File: JATKInterpreter.java

#Comment:
	/**
	 * Entry point of the interpreter
	 */

#Code:
	public Object visit(ASTStart node, Object data) {
		// Start of interpreter
		Boolean res = (Boolean) node.childrenAccept(this, Boolean.TRUE);
		// End of interpreter
		// test if StopMainLog has been called
		/*if (getMainLogger().isAlive()) {
			getMainLogger()
					.addErrorToDocumentLogger(STOPMAIN_HAS_NOT_BEEN_CALLED, 0, null);
			getMainLogger().interrupt();
			return Boolean.FALSE;
		}*/
		if (res == null) {
			// Logger.getLogger(this.getClass() ).warn("res == null");
			return Boolean.FALSE;
		}
		return res;
	}

#No. 14
#File: SurroundLoopVisitor.java

#Comment:
	/**
	 * if data not null, it's the position in parent node (int)
	 */

#Code:
	public Object visit(SimpleNode node, Object data) {
	
		if( treepathdepth >= firsttreepath.size() )
			return false;
		
		
		if (treepathdepth == firsttreepath.size()-1 ){
			int firstposition = firsttreepath.get(treepathdepth);
		
			
			ASTLOOP loop = new ASTLOOP(ATKScriptParserTreeConstants.JJTLOOP);

			loop.jjtAddChild(nbloop, 0);
			
			for (int i=0 ; i <= lasttreepathindex-firstposition ; i++){
				loop.jjtAddChild(node.jjtGetChild(firstposition), i+1);
				node.jjtRemoveChild(firstposition);
			}
			node.jjtInsertChild(loop, firstposition);
			return true;
			
			
		} else {
			//cross node depending the PathTree
					
			Node child = node.jjtGetChild( firsttreepath.get(treepathdepth));
			treepathdepth++;
			child.jjtAccept(this,null);
		}
		
		return  true;
	}

#No. 15
#File: ATKScriptParser.java

#Comment:
/*
* SECTION 4 - THE GRAMMAR        
*/

#Code:
  final public ASTStart start() throws ParseException {
                           /*@bgen(jjtree) Start */
  ASTStart jjtn000 = new ASTStart(JJTSTART);
  boolean jjtc000 = true;
  jjtree.openNodeScope(jjtn000);
    try {
      parseFile();
                       jjtree.closeNodeScope(jjtn000, true);
                       jjtc000 = false;
                       {if (true) return jjtn000;}
    } catch (Throwable jjte000) {
          if (jjtc000) {
            jjtree.clearNodeScope(jjtn000);
            jjtc000 = false;
          } else {
            jjtree.popNode();
          }
          if (jjte000 instanceof RuntimeException) {
            {if (true) throw (RuntimeException)jjte000;}
          }
          if (jjte000 instanceof ParseException) {
            {if (true) throw (ParseException)jjte000;}
          }
          {if (true) throw (Error)jjte000;}
    } finally {
          if (jjtc000) {
            jjtree.closeNodeScope(jjtn000, true);
          }
    }
    throw new Error("Missing return statement in function");
  }

#No. 16
#File: ScriptController.java

#Comment:
	/**
	 * Method call by RecordPhoneEventListener 
	 */

#Code:
	public void addEvent(String code) {
		//		Logger.getLogger(this.getClass() ).debug("/********controler.append("+action+","+parameters[0]+")********/");
		if (ignoreFirstMessageFromPhone){
			ignoreFirstMessageFromPhone=false;
		}
		else{
			ATKScriptParser parse = new ATKScriptParser(new StringReader(code));
			ASTStart newnodes = new ASTStart(ATKScriptParserTreeConstants.JJTSTART);
			try {
				newnodes = parse.start();
			} catch (ParseException e) {
				Logger.getLogger(this.getClass() ).warn("WARNING : unknow code for :"+code+"\r\n"+e.getMessage());
			}

			//insert the nodes at the last place
			for( int i=0; i< newnodes.jjtGetNumChildren() ;i++) {
				SimpleNode functionode = (SimpleNode) newnodes.jjtGetChild(i);
				ast.jjtInsertChild(functionode, ast.jjtGetNumChildren());
			}	

			if(!code.toLowerCase().startsWith("sleep"))
				ui.updateScript();
		}
	}

#No. 17
#File: OrderResource.java

#Comment:
    /**
     * Order Version 1.
     */

#Code:
    @ContextualActionSet
    public Set<String> getContextualActionSet() {
        Set<String> result = new HashSet<String>();
        result.add("refresh");
        switch (order.getStatus()) {
            case RECEIVED:
                result.add("review");       // @Action's value
                result.add("cancel");       // @Action's value
                result.add("update");       // @Action's value
                break;
            case REVIEWED:
                result.add("cancel");       // @Action's value
                result.add("pay");          // @Action's value
                result.add("update");       // @Action's value
                break;
            case CANCELED:
                break;
            case PAYED:
                result.add("ship");         // @Action's value
                result.add("update");       // @Action's value
                break;
            case SHIPPED:
                break;
        }
        return result;
    }

#No. 18
#File: ProductResource.java

#Comment:
    /**
     * Product Version 1.
     */

#Code:
    @ContextualActionSet
    public Set<String> getContextualActionSet() {
        Set<String> result = new HashSet<String>();
        result.add("refresh");
        result.add("update");    
        switch (product.getStatus()) {
            case OUT_OF_STOCK:
                result.add("discontinue");      // @Action's value
                break;
        }
        return result;
    }

#No. 19
#File: CDIExtension.java

#Comment:
    /*
     * Called after the WebApplication and ResourceConfig have been set,

     */

#Code:
    void lateInitialize() {
        try {
            for (InitializedLater object : toBeInitializedLater) {
                object.later();
            }
        }
        finally {
            // clear the JNDI reference as soon as possible
            if (!lookupExtensionInBeanManager) {
                try {
                    InitialContext ic = InitialContextHelper.getInitialContext();
                    if (ic != null) {
                        lookupJerseyConfigJNDIContext(ic).unbind(JNDI_CDIEXTENSION_NAME);
                    }
                } catch (NamingException ex) {
                    throw new RuntimeException(ex);
                }
            }
        }
    }

#No. 20
#File: ServletContainerTest.java

#Comment:
    /**
     * JERSEY-780: Malformed URL returns a 500 instead of a 400.
     */

#Code:
    public void testInvalidUrl() throws Exception {
        startServer(HelloWorldResource.class);

        final URL url = new URL(getUri().path("helloworld").build().toString() + "^");
        final HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");

        connection.connect();

        final int responseCode = connection.getResponseCode();
        final String responseMessage = connection.getResponseMessage();

        connection.disconnect();

        stopServer();

        assertTrue(responseCode == Response.Status.BAD_REQUEST.getStatusCode());
        assertTrue(Response.Status.BAD_REQUEST.getReasonPhrase().equals(responseMessage));
    }




#No. 21
#File: EntityTypesTest.java

#Comment:
    /**
     * TODO, the unmarshalling fails.
     */

#Code:
    public void _testJAXBListRepresentationFastInfoset() {
        initiateWebApplication(JAXBListResourceFastInfoset.class);
        WebResource r = resource("/");

        Collection<JAXBBean> a = r.get(
                new GenericType<Collection<JAXBBean>>(){});
        Collection<JAXBBean> b = r.post(new GenericType<Collection<JAXBBean>>(){}, 
                new GenericEntity<Collection<JAXBBean>>(a){});
        
        assertEquals(a, b);
        
        b = r.path("type").post(new GenericType<Collection<JAXBBean>>(){},
                new GenericEntity<Collection<JAXBBean>>(a){});
        assertEquals(a, b);
    }

#No. 22
#File: EntityUtil.java

#Comment:
	/**
	 * Assumes that the key in <key, value> pairs is an Object to which a regular equals() is applicable.
	 */

#Code:
	public static boolean deepEqual(Map<?, ? extends Entity> o1, Map<?, ? extends Entity> o2) {
		if (o1.keySet().size() != o2.keySet().size()) return false;
		for (Entry<?,? extends Entity> entry : o1.entrySet()) {
			Object actualKey = findMatchingKey(entry.getKey(), o2.keySet());
			if (actualKey == null) return false;
			if (!deepEqual(entry.getValue(), o2.get(actualKey)))
				return false;
		}
		return true;
	}


#No. 23
#File: TreatmentCategorizationWizardPresentationTest.java

#Comment:
	/*
	 * Regression test for bug #566 
	 */

#Code:
	@Test
	public void testDoNotReuseDefaultDose() {
		TreatmentCategorizationWizardPresentation pm1 = new TreatmentCategorizationWizardPresentation(TreatmentCategorization.createDefault(), d_domain);
		TreatmentCategorizationWizardPresentation pm2 = new TreatmentCategorizationWizardPresentation(TreatmentCategorization.createDefault(), d_domain);
		pm1.getDoseUnit().setScaleModifier(ScaleModifier.MEGA);
		assertFalse(pm2.getDoseUnit().equals(pm1.getDoseUnit()));
	}


#No. 24
#File: FirefoxProfile.java

#Comment:
  /**
   * Internal method This is liable to change at a moment's notice.
   */

#Code:
  @Beta
  protected Reader onlyOverrideThisIfYouKnowWhatYouAreDoing() {
    URL resource = Resources.getResource(FirefoxProfile.class, defaultPrefs);
    try {
      return new InputStreamReader(resource.openStream());
    } catch (IOException e) {
      throw new WebDriverException(e);
    }
  }

#No. 25
#File: HtmlUnitDriver.java

#Comment:
  /**
   * Allows HtmlUnit's about:blank to be loaded in the constructor
   */

#Code:
  protected void get(URL fullUrl) {
    try {
      getWebClient().getPage(fullUrl);
      // A "get" works over the entire page
      currentWindow = getCurrentWindow().getTopWindow();
    } catch (UnknownHostException e) {
      getCurrentWindow().getTopWindow().setEnclosedPage(new UnexpectedPage(
          new StringWebResponse("Unknown host", fullUrl),
          getCurrentWindow().getTopWindow()
      ));
    } catch (ConnectException e) {
      // This might be expected
    } catch (SocketTimeoutException e) {
      throw new TimeoutException(e);
    } catch (Exception e) {
      throw new WebDriverException(e);
    }

    gotPage = true;
    pickWindow();
    resetKeyboardAndMouseState();
  }

#No. 26
#File: RemoteWebDriver.java

#Comment:
  /**
   * Override this to be notified at key points in the execution of a command.
   */

#Code:
  protected void log(SessionId sessionId, String commandName, Object toLog, When when) {
    String text = "" + toLog;
    if (commandName.equals(DriverCommand.EXECUTE_SCRIPT)
        || commandName.equals(DriverCommand.EXECUTE_ASYNC_SCRIPT)) {
      if (text.length() > 100 && Boolean.getBoolean("webdriver.remote.shorten_log_messages")) {
        text = text.substring(0, 100) + "...";
      }
    }
    switch(when) {
      case BEFORE:
        logger.log(level, "Executing: " + commandName + " " + text);
        break;
      case AFTER:
        logger.log(level, "Executed: " + text);
        break;
      case EXCEPTION:
        logger.log(level, "Exception: " + text);
        break;
      default:
        logger.log(level, text);
        break;
    }
  }



#No. 27
#File: ErrorsTest.java

#Comment:
  /**
   * Regression test for Selenium RC issue 363.
   */

#Code:
  @JavascriptEnabled
  @Ignore(value = {IE, MARIONETTE}, reason = "IE does not support onerror")
  @Test
  public void testShouldNotGenerateErrorsWhenOpeningANewPage() {
    driver.get(pages.errorsPage);
    Object result = ((JavascriptExecutor) driver).
        executeScript("return window.ERRORS.join('\\n');");
    assertEquals("Should have no errors", "", result);
  }


#No. 28
#File: BaseRemoteProxy.java

#Comment:
  /**
   * Internal use only
   */

#Code:
  public void forceSlotCleanerRun() {
    cleanUpThread.cleanUpAllSlots();
  }

#No. 29
#File: GridNodeConfiguration.java

#Comment:
  /**
   * add config, but overwrite capabilities.
   */

#Code:
  private void loadFromJSON(String resource) {
    try {
      JSONObject base = JSONConfigurationUtils.loadJSON(resource);

      if (base.has("capabilities")) {
        capabilities = new ArrayList<DesiredCapabilities>();
        JSONArray a = base.getJSONArray("capabilities");
        for (int i = 0; i < a.length(); i++) {
          JSONObject cap = a.getJSONObject(i);
          DesiredCapabilities c = new DesiredCapabilities();
          for (Iterator iterator = cap.keys(); iterator.hasNext();) {
            String name = (String) iterator.next();
            c.setCapability(name, cap.get(name));
          }
        }
      }

      JSONObject o = base.getJSONObject("configuration");
      for (Iterator iterator = o.keys(); iterator.hasNext();) {
        String key = (String) iterator.next();
        Object value = o.get(key);
        if (value instanceof JSONArray) {
          JSONArray a = (JSONArray) value;
          List<String> as = new ArrayList<String>();
          for (int i = 0; i < a.length(); i++) {
            as.add(a.getString(i));
          }
          configuration.put(key, as);
        } else {
          configuration.put(key, o.get(key));
        }
      }

    } catch (Throwable e) {
      throw new GridConfigurationException("Error with the JSON of the config : " + e.getMessage(),
          e);
    }
  }

#No. 30
#File: FirefoxChromeLauncher.java

#Comment:
  /**
   * Wrapper to allow for stubbed-out testing *
   */

#Code:
  protected void killFirefoxProcess() {
    log.info("Killing Firefox...");
    int exitValue = process.destroy();
    if (exitValue == 0) {
      log.warning("Firefox seems to have ended on its own (did we kill the real browser???)");
    }

#No. 31
#File: MockBrowserLauncher.java

#Comment:
  /**
   *  This browser configuration is not supported for IE
   */

#Code:
  public void launchRemoteSession(String url) {
    browser = new Thread(this); // Thread safety reviewed
    browser.setName("mockbrowser");
    if (null != url) {
      browser.start();
    } else {
      log.info("launching a mock unresponsive browser");
    }
  }

#No. 32
#File: StaticContentHandler.java

#Comment:
  /**
   * This will force jetty to return the document anyway.
   */

#Code:
  private void hackRemoveLastModifiedSince(HttpRequest req) {
    if (null == req.getField(HttpFields.__IfModifiedSince)) {
      return;
    }
    try {
      Field f = HttpMessage.class.getDeclaredField("_header");
      f.setAccessible(true);
      HttpFields header = (HttpFields) f.get(req);
      header.remove(HttpFields.__IfModifiedSince);
    } catch (Exception e) {
      e.printStackTrace();
    }
  }

#No. 33
#File: ParallelTest.java

#Comment:
  /**
   * a proxy than can host up to 5 tests at the same time. 
   */

#Code:
  @BeforeClass
  public static void prepareReqRequest() {

    Map<String, Object> config = new HashMap<String, Object>();
    app1.put(APP, "app1");
    app1.put(MAX_INSTANCES, 5);

    app2.put(APP, "app2");
    app2.put(MAX_INSTANCES, 1);

    config.put(REMOTE_HOST, "http://machine1:4444");
    config.put(MAX_SESSION, 5);

    req = new RegistrationRequest();
    req.addDesiredCapability(app1);
    req.addDesiredCapability(app2);
    req.setConfiguration(config);
  }

#No. 34
#File: CommandQueueUnitTest.java

#Comment:
  /**
   * In PI Mode, open replies "OK", but then we asynchronously receive "closed!"
   */

#Code:
  @Test
  public void testPIOpenSingleThreaded() throws Exception {
    injectCommandAsIfWaiting("open", "blah.html", "");
    expectCommand("open", "blah.html", "");
    cq.handleCommandResultWithoutWaitingForACommand("OK");
    cq.declareClosed();
    assertEquals("OK", cq.peekAtResult());
  }


#No. 35
#File: IniPreferences.java

#Comment:
    /**
     * Implements the childrenNamesSpi method as per the specification in
     *  java.util.prefs.AbstractPreferences#childrenNamesSpi().
     */

#Code:
    @Override protected String[] childrenNamesSpi() throws BackingStoreException
    {
        List<String> names = new ArrayList<String>();

        for (String name : _ini.keySet())
        {
            if (name.indexOf(_ini.getPathSeparator()) < 0)
            {
                names.add(name);
            }
        }

        return names.toArray(EMPTY);
    }

#No. 36
#File: IniPreferences.java

#Comment:
    /**
     * Implements the childSpi method as per the specification in
     *  java.util.prefs.AbstractPreferences#childSpi(String).
     */

#Code:
    @Override protected SectionPreferences childSpi(String name)
    {
        Ini.Section sec = _ini.get(name);
        boolean isNew = sec == null;

        if (isNew)
        {
            sec = _ini.add(name);
        }

        return new SectionPreferences(this, sec, isNew);
    }

#No. 37
#File: VuzeActivitiesEntry.java

#Comment:
	/**
	 * Not needed if you #setDownloadManager(DownloadManager). This will
	 * be written the map.
	 */

#Code:
	public void setTorrent(TOTorrent torrent) {
		this.torrent = torrent;

		try {
			assetHash = torrent.getHashWrapper().toBase32String();
		} catch (Exception e) {
		}
	}


#No. 38
#File: SMConfigurationAdapterImpl.java

#Comment:
        /**
         * One of the above constants
         */

#Code:

        public float getEstimateType() {
            return limitEstimateType;
        }


#No. 39
#File: SMConfigurationAdapterImpl.java

#Comment:
        /**
         * Don't call this method.
         */

#Code:
        public int[][] getSegments() {
            return new int[0][];
        }


#No. 40
#File: UPnPPlugin.java

#Comment:
	/**
	 * Provided for use by other plugins.
	 */

#Code:
	public void refreshMappings() {
		refreshMappings(false);
	}

#No. 41
#File: UPnPPlugin.java

#Comment:
	/**
	 * Provided for use by other plugins.
	 */

#Code:
	public void refreshMappings(boolean force) {
		if (force) {
			closeDown(true);
			startUp();
		}
		else {
			this.upnp.reset();
		}
	}

#No. 42
#File: NatPMPImpl.java

#Comment:
    /**
     * Azureus framework methods

     **/

#Code:
    public void addPortMapping( 
                    boolean tcp,        // false -> UDP
                    int port,
                    String description ) 
                    throws UPnPException 
    {
        try{
            /* use public port for internal port */
            natDevice.addPortMapping( tcp, port, port );
        } catch( Exception e) {
            throw( new UPnPException( "addPortMapping failed", e ));
        }
        
        synchronized( this ){
	        /* Find and remove old mapping, if any */
	        Iterator it = mappings.iterator();
	        while( it.hasNext() ) {
	            portMapping m = (portMapping)it.next();
	                
	            if (m.getExternalPort() == port && m.isTCP() == tcp) 
	                it.remove() ;
	        }
	        /* add new port to list */   
	        mappings.add(   new portMapping( port, tcp, 
	                        natDevice.getLocalAddress().getHostAddress(), 
	                        description) );
        }
    }
#No. 43
#File: AttCertIssuer.java

#Comment:
    /**
     * Don't use this one if you are trying to be RFC 3281 compliant.
     */

#Code:
    public AttCertIssuer(
        GeneralNames  names)
    {
        obj = names;
        choiceObj = obj.getDERObject();
    }

#No. 44
#File: AEMonitor2.java

#Comment:
		/*
		 * Try and obtain it
		 */

#Code:
	
	public boolean
	enter(
		int	max_millis )
	{
		try{
			if ( lock.tryLock( max_millis, TimeUnit.MILLISECONDS )){
								
				return( true );
				
			}else{
				
				return( false );
			}
		}catch( Throwable e ){
			
			Debug.out( e );
			
			return( false );
		}
	}

#No. 45
#File: AEThread2.java

#Comment:
    /**
     * entry 0 is debug object, 1 is Long mono-time it was set
     */

#Code:
    public static Object[] getDebug(
            Thread t) {
        if (t instanceof threadWrapper) {

            return (((threadWrapper) t).getDebug());
        }

        return (null);
    }

#No. 46
#File: ByteArrayHashMap.java

#Comment:
    /**
     * Bit inefficient at the moment
     */

#Code:
    
    public ByteArrayHashMap<T>
    duplicate()
    {
    	ByteArrayHashMap<T>	res = new ByteArrayHashMap<T>(size,loadFactor);
    	
        for (int j = 0; j < table.length; j++) {
	         Entry<T> e = table[j];
	         while( e != null ){
              	res.put( e.key, e.value );
               	
               e = e.next;
	        }
	    }
       
       return( res );
    }

#No. 47
#File: ByteFormatter.java

#Comment:
  	/**
  	 * Note this has a truncation limit at 1024 chars....
  	 */

#Code:
  public static String
  encodeString(
  	byte[]		bytes )
  {
  	return( nicePrint( bytes, true ));
  }

#No. 48
#File: DebugLight.java

#Comment:
	/**
	 * Used in environments where full debug may not be available
	 * @param e
	 */

#Code:
	
	public static void
	printStackTrace(
		Throwable e )
	{
		try{
			Debug.printStackTrace( e );
			
		}catch( Throwable f ){
			
			e.printStackTrace();
		}
	}


#No. 49
#File: MD4Hasher.java

#Comment:
		/**
		 * Uses bouncy castle provider
		 *
		 */

#Code:
	
    public 
	MD4Hasher()
    {
    	try{
    		md4 = MessageDigest.getInstance("MD4", BouncyCastleProvider.PROVIDER_NAME );
    		  		
    	}catch( Throwable e ){
    		
    			// should never get here
    		
    		Debug.printStackTrace( e );
    	}
    }

#No. 50
#File: ApplicationConfig.java

#Comment:
    /**
     * It is automatically generated by NetBeans REST support.
     */

#Code:
    private Set<Class<?>> getRestResourceClasses() {
        Set<Class<?>> resources = new java.util.HashSet<Class<?>>();
        resources.add(org.javaee7.websocket.websocket.vs.rest.MyRestEndpoint.class);
        return resources;
    }


#No. 51
#File: ExactMatcher.java

#Comment:
	/** just copy code from wiki 
	 */

#Code:
	private static int editDistance(String str1, String str2) {
		int[][] distance = new int[str1.length() + 1][str2.length() + 1];        
		 
        for (int i = 0; i <= str1.length(); i++)                                 
            distance[i][0] = i;                                                  
        for (int j = 1; j <= str2.length(); j++)                                 
            distance[0][j] = j;                                                  
 
        for (int i = 1; i <= str1.length(); i++)                                 
            for (int j = 1; j <= str2.length(); j++)                             
                distance[i][j] = minimum(                                        
                        distance[i - 1][j] + 1,                                  
                        distance[i][j - 1] + 1,                                  
                        distance[i - 1][j - 1] + ((str1.charAt(i - 1) == str2.charAt(j - 1)) ? 0 : 1));
 
        return distance[str1.length()][str2.length()];
	}

#No. 52
#File: QuestionSet.java

#Comment:
	/**
	 * constructor
	 */

#Code:
	public QuestionSet() {
		this.qs = new ArrayList<Question>();
	}

#No. 53
#File: SoundPullEventListener.java

#Comment:
	/**
	 * Constructor
	 */

#Code:
	public SoundPullEventListener(Context context) {
		mContext = context;
		mSoundMap = new HashMap<State, Integer>();
	}

#No. 54
#File: PullToRefreshBase.java

#Comment:
	/**
	 * Called when the UI has been to be updated to be in the
	 *  State#RELEASE_TO_REFRESH state.
	 */

#Code:
	protected void onReleaseToRefresh() {
		switch (mCurrentMode) {
			case PULL_FROM_END:
				mFooterLayout.releaseToRefresh();
				break;
			case PULL_FROM_START:
				mHeaderLayout.releaseToRefresh();
				break;
			default:
				// NO-OP
				break;
		}
	}


#No. 55
#File: PullToRefreshBase.java

#Comment:
	/**
	 * Called when the UI has been to be updated to be in the
	 *  State#RESET state.
	 */

#Code:
	protected void onReset() {
		mIsBeingDragged = false;
		mLayoutVisibilityChangesEnabled = true;

		// Always reset both layouts, just in case...
		mHeaderLayout.reset();
		mFooterLayout.reset();

		smoothScrollTo(0);
	}

#No. 56
#File: PullToRefreshBase.java

#Comment:
	/**
	 * Helper method which just calls scrollTo() in the correct scrolling
	 * direction.
	 */

#Code:
	protected final void setHeaderScroll(int value) {
		if (DEBUG) {
			Log.d(LOG_TAG, "setHeaderScroll: " + value);
		}

		// Clamp value to with pull scroll range
		final int maximumPullScroll = getMaximumPullScroll();
		value = Math.min(maximumPullScroll, Math.max(-maximumPullScroll, value));

		if (mLayoutVisibilityChangesEnabled) {
			if (value < 0) {
				mHeaderLayout.setVisibility(View.VISIBLE);
			} else if (value > 0) {
				mFooterLayout.setVisibility(View.VISIBLE);
			} else {
				mHeaderLayout.setVisibility(View.INVISIBLE);
				mFooterLayout.setVisibility(View.INVISIBLE);
			}
		}

		if (USE_HW_LAYERS) {
			/**
			 * Use a Hardware Layer on the Refreshable View if we've scrolled at
			 * all. We don't use them on the Header/Footer Views as they change
			 * often, which would negate any HW layer performance boost.
			 */
			ViewCompat.setLayerType(mRefreshableViewWrapper, value != 0 ? View.LAYER_TYPE_HARDWARE
					: View.LAYER_TYPE_NONE);
		}

		switch (getPullToRefreshScrollDirection()) {
			case VERTICAL:
				scrollTo(0, value);
				break;
			case HORIZONTAL:
				scrollTo(value, 0);
				break;
		}
	}

#No. 57
#File: PullToRefreshScrollView.java

#Comment:
		/**
		 * Taken from the AOSP ScrollView source
		 */

#Code:
		private int getScrollRange() {
			int scrollRange = 0;
			if (getChildCount() > 0) {
				View child = getChildAt(0);
				scrollRange = Math.max(0, child.getHeight() - (getHeight() - getPaddingBottom() - getPaddingTop()));
			}
			return scrollRange;
		}

#No. 58
#File: Glob.java

#Comment:
    /*  have this as a known  entry-point to be forwards-compatible with compiled
     * resources. */

#Code:
    public static DirLight amblight(RenderList rl) {
	return(((MapView)((PView.WidgetContext)rl.state().get(PView.ctx)).widget()).amb);
    }


#No. 59
#File: HashDirCache.java

#Comment:
    /* blocking interruptions until complete should be perfectly
     * okay. */

#Code:
    private static LockedFile lock2(File path) throws IOException {
	boolean intr = false;
	try {
	    while(true) {
		try {
		    RandomAccessFile fp = null;
		    try {
			fp = new RandomAccessFile(path, "rw");
			FileLock lk = fp.getChannel().lock();
			LockedFile ret = new LockedFile(fp, lk);
			fp = null;
			return(ret);
		    } finally {
			if(fp != null)
			    fp.close();
		    }
		} catch(FileLockInterruptionException e) {
		    Thread.currentThread().interrupted();
		    intr = true;
		}
	    }
	} finally {
	    if(intr)
		Thread.currentThread().interrupt();
	}
    }

#No. 60
#File: TerrainTile.java

#Comment:
    /* XXX: Some strange javac bug seems to make it resolve the
     * trans() references to the wrong signature, thus the name
     * distinction. */

#Code:
    public void _faces(MapMesh m, int z, Tile trans, MPart d) {
	Tex ttex = trans.tex();
	float tl = ttex.tcx(0), tt = ttex.tcy(0), tw = ttex.tcx(ttex.sz().x) - tl, th = ttex.tcy(ttex.sz().y) - tt;
	TexGL gt;
	if(ttex instanceof TexGL)
	    gt = (TexGL)ttex;
	else if((ttex instanceof TexSI) && (((TexSI)ttex).parent instanceof TexGL))
	    gt = (TexGL)((TexSI)ttex).parent;
	else
	    throw(new RuntimeException("Cannot use texture for transitions: " + ttex));
	AlphaTex alpha;
	synchronized(transtex) {
	    if((alpha = transtex.get(gt)) == null)
		transtex.put(gt, alpha = new AlphaTex(gt, 0.01f));
	}
	Blend b = m.data(blend);
	Surface.MeshVertex[] mv = new Surface.MeshVertex[d.v.length];
	for(int i = 0; i < var.length + 1; i++) {
	    if(b.en[i][b.es.o(d.lc)]) {
		GLState mat = (i == 0)?base:(var[i - 1].mat);
		mat = d.mcomb(GLState.compose(mat, new MapMesh.MLOrder(z, i), alpha));
		MeshBuf buf = MapMesh.Model.get(m, mat);
		MeshBuf.Vec2Layer cc = buf.layer(AlphaTex.lclip);
		for(int o = 0; o < d.v.length; o++) {
		    mv[o] = b.lvfac[i].make(buf, d, o);
		    cc.set(mv[o], new Coord3f(tl + (tw * d.tcx[o]), tt + (th * d.tcy[o]), 0));
		}
		for(int fi = 0; fi < d.f.length; fi += 3)
		    buf.new Face(mv[d.f[fi]], mv[d.f[fi + 1]], mv[d.f[fi + 2]]);
	    }
	}
    }

#No. 61
#File: SkelSprite.java

#Comment:
    /*  It's ugly to snoop inside a wrapping */

#Code:
    private Rendered animwrap(GLState.Wrapping wrap) {
	if(!(wrap.r instanceof FastMesh))
	    return(wrap);
	FastMesh m = (FastMesh)wrap.r;
	for(MeshAnim.Anim anim : manims) {
	    if(anim.desc().animp(m)) {
		Rendered ret = wrap.st().apply(new MorphedMesh(m, mmorph));
		if(bonedb)
		    ret = morphed.apply(ret);
		return(ret);
	    }
	}
	Rendered ret;
	if(PoseMorph.boned(m)) {
	    String bnm = PoseMorph.boneidp(m);
	    if(bnm == null) {
		ret = wrap.st().apply(new MorphedMesh(m, pmorph));
		if(bonedb)
		    ret = morphed.apply(ret);
	    } else {
		ret = pose.bonetrans2(skel.bones.get(bnm).idx).apply(wrap);
		if(bonedb)
		    ret = rigid.apply(ret);
	    }
	} else {
	    ret = wrap;
	    if(bonedb)
		ret = unboned.apply(ret);
	}
	return(ret);
    }

#No. 62
#File: TexI.java

#Comment:
    /* these may not be  entirely correct They should be corrected if oddities are
     * detected. */

#Code:
    public static int detectfmt(BufferedImage img) {
	ColorModel cm = img.getColorModel();
	if(!(img.getSampleModel() instanceof PixelInterleavedSampleModel))
	    return(-1);
	PixelInterleavedSampleModel sm = (PixelInterleavedSampleModel)img.getSampleModel();
	int[] cs = cm.getComponentSize();
	int[] off = sm.getBandOffsets();
	/*
	System.err.print(this + ": " + cm.getNumComponents() + ", (");
	for(int i = 0; i < off.length; i++)
	    System.err.print(((i > 0)?" ":"") + off[i]);
	System.err.print("), (");
	for(int i = 0; i < off.length; i++)
	    System.err.print(((i > 0)?" ":"") + cs[i]);
	System.err.print(")");
	System.err.println();
	*/
	if((cm.getNumComponents() == 4) && (off.length == 4)) {
	    if(((cs[0] == 8) && (cs[1] == 8) && (cs[2] == 8) && (cs[3] == 8)) &&
	       (cm.getTransferType() == DataBuffer.TYPE_BYTE) &&
	       (cm.getTransparency() == java.awt.Transparency.TRANSLUCENT)) {
		if((off[0] == 0) && (off[1] == 1) && (off[2] == 2) && (off[3] == 3))
		    return(GL.GL_RGBA);
		if((off[0] == 2) && (off[1] == 1) && (off[2] == 0) && (off[3] == 3))
		    return(GL.GL_BGRA);
	    }
	} else if((cm.getNumComponents() == 3) && (off.length == 3)) {
	    if(((cs[0] == 8) && (cs[1] == 8) && (cs[2] == 8)) &&
	       (cm.getTransferType() == DataBuffer.TYPE_BYTE) &&
	       (cm.getTransparency() == java.awt.Transparency.OPAQUE)) {
		if((off[0] == 0) && (off[1] == 1) && (off[2] == 2))
		    return(GL.GL_RGB);
		if((off[0] == 2) && (off[1] == 1) && (off[2] == 0))
		    return(GL2.GL_BGR);
	    }
	}
	return(-1);
    }


#No. 63
#File: Utils.java

#Comment:
    /*  they should do for these simple purposes. */

#Code:
    public static String odformat(double num, int md) {
	if(num < 0)
	    return("-" + odformat(-num, md));
	long dm = 1;
	for(int i = 0; i < md; i++) dm *= 10;
	long raw = (long)Math.round(num * dm);
	long ip = raw / dm;
	long dp = raw % dm;
	if(dp == 0)
	    return(Long.toString(ip));
	StringBuilder buf = new StringBuilder();
	buf.append(ip);
	buf.append('.');
	for(dm /= 10; dm > dp; dm /= 10) buf.append('0');
	while((dp % 10) == 0) dp /= 10;
	buf.append(dp);
	return(buf.toString());
    }

#No. 64
#File: Utils.java

#Comment:
    /* These are not actually correct */

#Code:
    public static int floordiv(float a, float b) {
	float q = a / b;
	return((q < 0)?(((int)q) - 1):((int)q));
    }

#No. 65
#File: VertexBuf.java

#Comment:
	/* It would be terribly nice if GLArray could be a
	 * multiply inhereted class and these could be put in it
	 * instead */

#Code:
	private GLBuffer bufobj;
	private int bufmode = GL.GL_STATIC_DRAW;
	private boolean update = false;

	public void bindvbo(GOut g) {
	    BGL gl = g.gl;
	    synchronized(this) {
		if((bufobj != null) && (bufobj.cur != g.curgl))
		    dispose();
		if(bufobj == null) {
		    bufobj = new GLBuffer(g);
		    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, bufobj);
		    Buffer data = data();
		    data.rewind();
		    gl.glBufferData(GL.GL_ARRAY_BUFFER, data.remaining() * elsize(), data, bufmode);
		    GOut.checkerr(gl);
		    update = false;
		} else if(update) {
		    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, bufobj);
		    Buffer data = data();
		    data.rewind();
		    gl.glBufferData(GL.GL_ARRAY_BUFFER, data.remaining() * elsize(), data, bufmode);
		    update = false;
		} else {
		    gl.glBindBuffer(GL.GL_ARRAY_BUFFER, bufobj);
		}
	    }
	}

#No. 66
#File: GooglePlaces.java

#Comment:
	/**
	 * Searching places
	 * */

#Code:
	public PlacesList search(double latitude, double longitude, double radius, String types)
			throws Exception {

		this._latitude = latitude;
		this._longitude = longitude;
		this._radius = radius;

		try {

			HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
			HttpRequest request = httpRequestFactory
					.buildGetRequest(new GenericUrl(PLACES_SEARCH_URL));
			request.getUrl().put("key", API_KEY);
			request.getUrl().put("location", _latitude + "," + _longitude);
			request.getUrl().put("radius", _radius); // in meters
			request.getUrl().put("sensor", "false");
			if(types != null)
				request.getUrl().put("types", types);

			PlacesList list = request.execute().parseAs(PlacesList.class);
			// Check log cat for places response status
			Log.d("Places Status", "" + list.status);
			return list;

		} catch (HttpResponseException e) {
			Log.e("Error:", e.getMessage());
			return null;
		}

	}


#No. 67
#File: MasterServer.java

#Comment:
	/**
	 * Receive, from worker, ip and port for Socket connection
	 */

#Code:
	private synchronized void processInfoForCopyLog(String info,String topicOfWorker){

		//parse message to get ip e port for logs
		String [] split=info.split(",");

		String iPaddress="";
		String port="";

		for(String x: split){
			if(x.contains("ip")) 
				iPaddress=x.split(":")[1];
			if(x.contains("portcopylog"))
				port=x.split(":")[1];


		}
		Address address=new Address(iPaddress, port);
		workerListForCopyLogs.put(topicOfWorker, address);
	}

#No. 68
#File: MasterServer.java

#Comment:
	/**
	 * From simulation configuration field division
	 */

#Code:
	private HashMap<String/*idtopic*/, List<CellType>> divideForUniform(int rows,int cols,HashMap<String, Integer> slots,HashMap<String/*idtopic*/, List<CellType>> workerlist, int assignedLP){
		ArrayList<String> workerID=new ArrayList<String>(slots.keySet());
		int w=0;
		int lastIndex=-1;
		boolean goNext=false;
		for(int i=0; i < rows; i++){
			goNext=false; lastIndex=-1;
			for(int j=0; j < cols;){

				if(slots.get(workerID.get(w)) > 0)
				{
					slots.put(workerID.get(w), slots.get(workerID.get(w))-1);
					List<CellType> cells=workerlist.get(workerID.get(w))==null?new ArrayList<CellType>():workerlist.get(workerID.get(w));
					cells.add(new CellType(i,j));
					workerlist.put(workerID.get(w),cells);
					assignedLP--;
					goNext=true;

				}
				if(goNext){
					j++;
					goNext=false;
					lastIndex=-1;
				}
				else{
					if(lastIndex==w)
						System.err.println("errore"); 
					//	throw new DMasonException("Error! Not enough slots on the workers for the given partitioning.");

					if(lastIndex==-1) lastIndex=w;
				}
				w=(w+1)%slots.size();
				if(assignedLP < 1) break;
			}
		}
		return workerlist;
	}


#No. 69
#File: ZipDirectory.java

#Comment:
	/**
	 * Zip it
	 */

#Code:
	private static void zipDirectory(String zipFile){

		byte[] buffer = new byte[1024];

		try{

			FileOutputStream fos = new FileOutputStream(zipFile);
			ZipOutputStream zos = new ZipOutputStream(fos);

			System.out.println("Output to Zip : " + zipFile);

			for(String file : fileList){

				System.out.println("File Added : " + file);
				ZipEntry ze= new ZipEntry(file);
				zos.putNextEntry(ze);

				FileInputStream in = 
						new FileInputStream(SOURCE_FOLDER + File.separator + file);

				int len;
				while ((len = in.read(buffer)) > 0) {
					zos.write(buffer, 0, len);
				}

				in.close();
			}

			zos.closeEntry();
			//remember close it
			zos.close();

			System.out.println("Done");
		}catch(IOException ex){
			ex.printStackTrace();   
		}
	}

#No. 70
#File: Wizard.java

#Comment:
	/**
	 * Introduction
	 */

#Code:
	protected JPanel step1_setup()
	{
		JTextArea introText = new JTextArea();
			introText.setLineWrap(true);
			introText.setWrapStyleWord(true);
			introText.setEditable(false);
			introText.setMargin(new Insets(10, 10, 10, 10));
			introText.setAutoscrolls(true);
			introText.setText(
				"Welcome to D-Mason.\n"
				+ "\n"
				+ "This wizard will help you launching D-Mason on a single "
				+ "machine for testing purposes. D-Mason is made of four "
				+ "\"components\" that must be executed in order to run a "
				+ "simulation.\n"
				+ "\n"
				+ "Please hit the \"Next\" button below to continue."
			);
			
		JScrollPane sclIntroText = new JScrollPane(introText);
		
		JPanel panel = new JPanel();
			panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
			panel.add(sclIntroText);
		
		return panel;
	}

#No. 71
#File: Wizard.java

#Comment:
	/**
	 * Wrapper
	 */

#Code:
	protected JPanel step2_setup()
	{
		JTextArea introText = new JTextArea();
			introText.setLineWrap(true);
			introText.setWrapStyleWord(true);
			introText.setEditable(false);
			introText.setMargin(new Insets(10, 10, 10, 10));
			introText.setAutoscrolls(true);
			introText.setText(
				"The first component to launch is the communication server.\n"
				+ "\n"
				+ "D-Mason uses Apache ActiveMQ as messaging service server. "
				+ "ActiveMQ is embodied in a special D-Mason's component, "
				+ "called \"Wrapper\" that allows starting, stopping and "
				+ "resetting the server using the master console (another "
				+ "D-Mason component that we will launch later).\n"
				+ "\n"
				+ "Click the button below to start the Wrapper and go to "
				+ "the next step."
			);
			
		JScrollPane sclIntroText = new JScrollPane(introText);
			
		btnWrapper = new JButton("Launch the Wrapper");
			btnWrapper.addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) {	launchWrapper(); }});
		
		JPanel pnlButtons = new JPanel();
			pnlButtons.setLayout(new FlowLayout(FlowLayout.LEFT));
			pnlButtons.add(btnWrapper);
		
		JPanel panel = new JPanel();
			panel.setLayout(new BorderLayout(10, 10));
			panel.add(sclIntroText, BorderLayout.CENTER);
			panel.add(pnlButtons, BorderLayout.SOUTH);
	
		return panel;
	}

#No. 72
#File: Wizard.java

#Comment:
	/**
	 * Master
	 */

#Code:
	protected JPanel step4_setup()
	{
		JTextArea introText = new JTextArea();
		introText.setLineWrap(true);
		introText.setWrapStyleWord(true);
		introText.setEditable(false);
		introText.setMargin(new Insets(10, 10, 10, 10));
		introText.setAutoscrolls(true);
		introText.setText(
			"Almost done! It's time to launch the Master console, that\n"
			+ "will allow you to select a simulation to run and set its "
			+ "parameters.\n"
			+ "\n"
			+ "Click the button below to start the Master and go to "
			+ "the next step."
		);
		
		JScrollPane sclIntroText = new JScrollPane(introText);
			
		btnMaster = new JButton("Launch the Master");
		btnMaster.addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) {	launchMaster(); }});
		
		JPanel pnlButtons = new JPanel();
			pnlButtons.setLayout(new FlowLayout(FlowLayout.LEFT));
			pnlButtons.add(btnMaster);
		
		JPanel panel = new JPanel();
			panel.setLayout(new BorderLayout(10, 10));
			panel.add(sclIntroText, BorderLayout.CENTER);
			panel.add(pnlButtons, BorderLayout.SOUTH);
	
		return panel;
	}

#No. 73
#File: Wizard.java

#Comment:
	/**
	 * Inspector
	 */

#Code:
	protected JPanel step5_setup()
	{
		JTextArea introText = new JTextArea();
		introText.setLineWrap(true);
		introText.setWrapStyleWord(true);
		introText.setEditable(false);
		introText.setMargin(new Insets(10, 10, 10, 10));
		introText.setAutoscrolls(true);
		introText.setText(
			"The last, optional, component is the Global Inspector.\n"
			+ "It allows you to get information on the the running "
			+ "simulation.\n"
			+ "\n"
			+ "Click the button below to start the Global Inspector "
			+ "and go to the next step."
		);
		
		JScrollPane sclIntroText = new JScrollPane(introText);
			
		btnInspector = new JButton("Launch the Inspector");
		btnInspector.addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) {	launchInspector(); }});
		
		JPanel pnlButtons = new JPanel();
			pnlButtons.setLayout(new FlowLayout(FlowLayout.LEFT));
			pnlButtons.add(btnInspector);
		
		JPanel panel = new JPanel();
			panel.setLayout(new BorderLayout(10, 10));
			panel.add(sclIntroText, BorderLayout.CENTER);
			panel.add(pnlButtons, BorderLayout.SOUTH);
	
		return panel;
	}

#No. 74
#File: Wizard.java

#Comment:
	/**
	 * Finish
	 */

#Code:
	protected JPanel step6_setup()
	{
		JTextArea introText = new JTextArea();
		introText.setLineWrap(true);
		introText.setWrapStyleWord(true);
		introText.setEditable(false);
		introText.setMargin(new Insets(10, 10, 10, 10));
		introText.setAutoscrolls(true);
		introText.setText(
			"That's all.\n"
			+ "It allows you to get information on the the running "
			+ "simulation.\n"
			+ "\n"
			+ "Click the button below to start the Global Inspector "
			+ "and go to the next step."
		);
		
		JScrollPane sclIntroText = new JScrollPane(introText);
					
		JPanel panel = new JPanel();
			panel.setLayout(new BorderLayout(10, 10));
			panel.add(sclIntroText, BorderLayout.CENTER);
			
		return panel;
	}

#No. 75
#File: MessageListenerGlobals.java

#Comment:
   /**
	*	It's called when a message is listen 
	*/

#Code:
	@Override
	public void onMessage(javax.jms.Message arg0) 
	{	
		//System.out.println("MessageListenerGlobal ONMESSAGE");
		try
		{
			//System.out.println(System.currentTimeMillis() +",-1,onMessage");
			MyHashMap bo = (MyHashMap)parseMessage(arg0);
			//System.out.println(System.currentTimeMillis() +",-1,parseMessage");
			RemoteSnap obj = (RemoteSnap)bo.get("GLOBALS");
			//System.out.println(System.currentTimeMillis() +",-1,get");
			for (DistributedField2D field : fields)
			{
				//DistributedRegionInterface obj = (DistributedRegionInterface)bo.get(field.getID());
				//field.getGlobals().put(obj.getStep(), obj);
				field.getGlobals().put(obj.step, obj);
				//System.out.println("MessageListenerGlobal: PUT GLOBALS. STEP " + obj.getStep());
				//System.out.println(System.currentTimeMillis() +"," +obj.step + ",onMessage put globals");
			}
				
		} catch (JMSException e) { 
			e.printStackTrace(); 
		}				
	}


#No. 76
#File: DAntsForage.java

#Comment:
	/**
	 * AntsForage
	 */

#Code:
	public DAntsForage(GeneralParam params, String prefix)
	{ 
		super(params,new DistributedMultiSchedule<Int2D>(),prefix,params.getConnectionType());
		this.topicPrefix=prefix;
		this.MODE=params.getMode();
		GRID_WIDTH=params.getWidth();
		GRID_HEIGHT=params.getHeight();

		numAnts = params.getNumAgents();


		FXMIN = (FOOD_XMIN * GRID_WIDTH)/100;
		FYMIN = (FOOD_YMIN * GRID_HEIGHT)/100;
		FXMAX = (FOOD_XMAX * GRID_WIDTH)/100;
		FYMAX = (FOOD_YMAX * GRID_HEIGHT)/100;

		HXMIN = (HOME_XMIN * GRID_WIDTH)/100;
		HYMIN = (HOME_YMIN * GRID_HEIGHT)/100;
		HXMAX = (HOME_XMAX * GRID_WIDTH)/100;
		HYMAX = (HOME_YMAX * GRID_HEIGHT)/100;



	}

#No. 77
#File: DParticles.java

#Comment:
    /**
	 * DParticles
	 */

#Code:
    public DParticles(GeneralParam params,List<EntryParam<String,Object>>list,String prefix)
    {    	
    	super(params,new DistributedMultiSchedule<Int2D>(),prefix,params.getConnectionType());
    	this.MODE=params.getMode();
    	gridWidth=params.getWidth();
    	gridHeight=params.getHeight();
    	topicPrefix=prefix;
    
    }

#No. 78
#File: DGameOfLife.java

#Comment:
	/**
	 * Constructor
	 */

#Code:
	public DGameOfLife(GeneralParam params, String prefix) {
		super(params, new DistributedMultiSchedule<Int2D>(), prefix, params.getConnectionType());
		this.MODE = params.getMode();
		gridWidth = params.getWidth();
		gridHeight = params.getHeight();
		this.topicPrefix = prefix;
	}


#No. 79
#File: VirtualConnectionNFieldsWithVirtualJMS.java

#Comment:
	/**
	 *  a customized listener for every (or many) topic.
	 */

#Code:
	@Override
	public boolean asynchronousReceive(String key, MyMessageListener listener) {
		try {
			// subscribers.get(key).setMessageListener(listener);
			ArrayList<VirtualMessageListener> lists = vsubscribers.get(key);
			lists = (lists == null) ? new ArrayList<VirtualMessageListener>(): lists;
			lists.add((VirtualMessageListener) listener);
			accesstotopic.addSubscriber();
			return vsubscribers.put(key, lists) != null;

			// return true;
		} catch (Exception e) {
			System.err.println("Failed to enable asynchronous reception.");
			e.printStackTrace();
			return false;
		}
	}

#No. 80
#File: RecycleBin.java

#Comment:
    /**
     * Makes sure that the size of scrapViews does not exceed the size of activeViews.
     */

#Code:
    private void pruneScrapViews() {
        final int maxViews = activeViews.length;
        final int viewTypeCount = this.viewTypeCount;
        final SparseArray<View>[] scrapViews = this.scrapViews;
        for (int i = 0; i < viewTypeCount; ++i) {
            final SparseArray<View> scrapPile = scrapViews[i];
            int size = scrapPile.size();
            final int extras = size - maxViews;
            size--;
            for (int j = 0; j < extras; j++) {
                scrapPile.removeAt(size--);
            }
        }
    }

#No. 81
#File: HomeIndexFragment.java

#Comment:
    /**
     * ListView
     */

#Code:

    private void initListView() {
        topicAdapter = new TopicAdapter(this.getActivity(), data);
        listView.setAdapter(topicAdapter);
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Log.e(TAG, view.getTag().toString());
                Intent intent = new Intent();
                intent.setClass(HomeIndexFragment.this.getActivity(), DetailActivity.class);
                intent.putExtra("BUNDLE_KEY_DISPLAY_TYPE", 0);
                intent.putExtra("detailId", data.get(position).getThemeId());
                intent.putExtra("circleId", "");
                startActivity(intent);
            }
        });
    }


#No. 82
#File: AbstractStage.java

#Comment:
	/**
	 * This method is threadsafe.
	 */

#Code:
	public StageState getCurrentState() {
		return currentState;
	}

#No. 83
#File: AbstractStage.java

#Comment:
	/**
	 * May not be invoked outside of IPipe implementations
	 */

#Code:
	@SuppressWarnings("PMD.DataflowAnomalyAnalysis")
	public void onSignal(final ISignal signal, final InputPort<?> inputPort) {
		Class<? extends ISignal> signalClass = signal.getClass();

		Set<InputPort<?>> signalReceivedInputPorts;
		if (signalMap.containsKey(signalClass)) {
			signalReceivedInputPorts = signalMap.get(signalClass);
		} else {
			signalReceivedInputPorts = new HashSet<InputPort<?>>();
			signalMap.put(signalClass, signalReceivedInputPorts);
		}

		if (!signalReceivedInputPorts.add(inputPort)) {
			this.logger.warn("Received more than one signal - " + signal + " - from input port: " + inputPort);
			return;
		}

		if (signal.mayBeTriggered(signalReceivedInputPorts, getInputPorts())) {
			try {
				signal.trigger(this);
				checkSuperCalls(signal);
			} catch (Exception e) {
				this.logger.error("Could not trigger signal.", e);
				this.getOwningContext().abortConfigurationRun();
			}
			for (OutputPort<?> outputPort : outputPorts.getOpenedPorts()) {
				outputPort.sendSignal(signal);
			}
		}
	}


#No. 84
#File: TestBSTMapExtra.java

#Comment:
    /* 
    * Sanity test for keySet, only here because it's optional
    */

#Code:
    @Test
    public void sanityKeySetTest() {
    	BSTMap<String, Integer> b = new BSTMap<String, Integer>();
        HashSet<String> values = new HashSet<String>();
        for (int i = 0; i < 455; i++) {
            b.put("hi" + i, 1);   
            values.add("hi" + i);
        }
        assertEquals(455, b.size()); //keys are there
        Set<String> keySet = b.keySet();
        assertTrue(values.containsAll(keySet));
        assertTrue(keySet.containsAll(values));
    }

#No. 85
#File: RayHandler.java

#Comment:
        /**
         * Expert functionality
         */

#Code:
        public Texture getLightMapTexture() {
                return this.lightMap.frameBuffer.getColorBufferTexture();
        }



#No. 86
#File: HumanTaskCoordinationTest.java

#Comment:
	/**
	 * Setup
	 */

#Code:
	private void setupTestClients() throws Exception {
		init();
		requestSender.waitForProcessDeployment(backEndUrl + HumanTaskTestConstants.CLAIM_APPROVAL_PROCESS_SERVICE);
		requestSender.waitForProcessDeployment(backEndUrl + HumanTaskTestConstants.CLAIM_SERVICE);
		log.info("BPEL and Humantask services are up and running");
		// Need to re-initialize since we have restarted the server
		bpelPackageManagementClient = new BpelPackageManagementClient(backEndUrl, sessionCookie);
		humanTaskPackageManagementClient = new HumanTaskPackageManagementClient(backEndUrl, sessionCookie);
		instanceManagementClient = new BpelInstanceManagementClient(backEndUrl, sessionCookie);
		log.info("Server setting up completed ...!!!");
		serverConfigurationManager = new ServerConfigurationManager(bpsServer);

		//initialize HT Client API for Clerk1 and manager1 user
		AutomationContext clerk1AutomationContext =
				new AutomationContext("BPS", "bpsServerInstance0001", FrameworkConstants.SUPER_TENANT_KEY,
				                      HumanTaskTestConstants.CLERK1_USER);
		LoginLogoutClient clerk1LoginLogoutClient = new LoginLogoutClient(clerk1AutomationContext);
		String clerk1SessionCookie = clerk1LoginLogoutClient.login();
		clerk1HumanTaskClientApiClient = new HumanTaskClientApiClient(backEndUrl, clerk1SessionCookie);

		AutomationContext manager1AutomationContext =
				new AutomationContext("BPS", "bpsServerInstance0001", FrameworkConstants.SUPER_TENANT_KEY,
				                      HumanTaskTestConstants.MANAGER1_USER);
		LoginLogoutClient manager1LoginLogoutClient = new LoginLogoutClient(manager1AutomationContext);
		String manager1SessionCookie = manager1LoginLogoutClient.login();
		manager1HumanTaskClientApiClient = new HumanTaskClientApiClient(backEndUrl, manager1SessionCookie);

	}

#No. 87
#File: FilterMediatorTest.java

#Comment:
    /**
     * With setting "Specify As" set to "Xpath"
     */

#Code:
    @Test(groups = {"wso2.esb"})
    public void filterMediatorWithXpathTest() throws Exception {
        loadESBConfigurationFromClasspath(File.separator + "artifacts" + File.separator + "ESB" + File.separator
                                          + "synapseconfig" + File.separator + "filters" + File.separator + "filter" + File.separator + "synapse2.xml");
        OMElement response = axis2Client.sendSimpleStockQuoteRequest(getMainSequenceURL(), null, "IBM");
        Assert.assertTrue(response.toString().contains("GetQuoteResponse"));
        Assert.assertTrue(response.toString().contains("IBM Company"));
    }

#No. 88
#File: FilterMediatorTest.java

#Comment:
    /**
     * Using OR operation with Xpaths
     * /filters/filter/syanpse3.xml is used
     *
     * @throws Exception
     */

#Code:
    @Test(groups = {"wso2.esb"})
    public void filterMediatorXpathWithORTest() throws Exception {

        loadESBConfigurationFromClasspath(File.separator + "artifacts" + File.separator + "ESB" + File.separator
                                          + "synapseconfig" + File.separator + "filters" + File.separator + "filter" + File.separator + "synapse3.xml");
        OMElement response11 = axis2Client.sendSimpleStockQuoteSoap11(getMainSequenceURL(), null, "IBM");
        OMElement response12 = axis2Client.sendSimpleStockQuoteSoap12(getMainSequenceURL(), null, "IBM");

        Assert.assertTrue(response11.toString().contains("GetQuoteResponse"));
        Assert.assertTrue(response11.toString().contains("IBM Company"));

        Assert.assertTrue(response12.toString().contains("GetQuoteResponse"));
        Assert.assertTrue(response12.toString().contains("IBM Company"));

    }


#No. 89
#File: OutSequenceFaultSequenceTestCase.java

#Comment:
    /**
     * Symbol WSO2 dropped and MSFT is given in out sequence
     */

#Code:
    @Test(groups = "wso2.esb", description = "- Custom proxy -Out sequence inline")
    public void testCustomProxyOutSequenceInline() throws Exception {

        OMElement response = axis2Client.sendSimpleStockQuoteRequest(getProxyServiceURLHttp("StockQuoteProxyOne"), null, "WSO2");

        String symbol = response.getFirstElement().getFirstChildWithName(new QName("http://services.samples/xsd", "symbol"))
                .getText();
        assertEquals(symbol, "MSFT", "Fault: value 'symbol' mismatched");
    }

#No. 90
#File: OutSequenceFaultSequenceTestCase.java

#Comment:
    /**
     * Invalid service referred
     */

#Code:
    @Test(groups = "wso2.esb", description = "- Custom proxy -Fault sequence inline")
    public void testCustomProxyFaultInline() throws Exception {

        try {
            axis2Client.sendSimpleStockQuoteRequest(getProxyServiceURLHttp("StockQuoteProxyFour"), null, "WSO2");
            fail("AxisFault Expected");
        } catch (AxisFault axisFault) {
            assertTrue(axisFault.getReason().contains("Fault sequence invoked"), "Fault: value 'reason' mismatched");
        }

    }

#No. 91
#File: OutSequenceFaultSequenceTestCase.java

#Comment:
    /**
     * Invalid service referred
     */

#Code:
    @Test(groups = "wso2.esb", description = "- Custom proxy -Fault sequence From registry")
    public void testCustomProxyFaultFromRegistry() throws Exception {

        try {
            axis2Client.sendSimpleStockQuoteRequest(getProxyServiceURLHttp("StockQuoteProxyFour"), null, "WSO2");
            fail();
        } catch (AxisFault axisFault) {
            assertTrue(axisFault.getReason().contains("Fault sequence invoked"), "Fault: value 'reason' mismatched");
        }
    }

#No. 92
#File: OutSequenceFaultSequenceTestCase.java

#Comment:
    /**
     * Invalid service referred
     */

#Code:
    @Test(groups = "wso2.esb", description = "- Custom proxy -Fault sequence existing fault sequence")
    public void testCustomProxyFaultExistingFaultSequence() throws Exception {

        try {
            axis2Client.sendSimpleStockQuoteRequest(getProxyServiceURLHttp("StockQuoteProxyFour"), null, "WSO2");
            fail();
        } catch (AxisFault axisFault) {
            assertTrue(axisFault.getReason().contains("Fault sequence invoked"), "Fault: value 'reason' mismatched");
        }
    }

#No. 93
#File: SiteStructureGenerator.java

#Comment:
        /** Takes Block Coordinates
       */

#Code:
        public boolean shouldBeDoor(Site site, int x, int z, int scale)
        {
            getBounds(site, scale);

            int midx = (bounds[0][0] + bounds[1][0]) / 2;
            int midz = (bounds[0][1] + bounds[1][1]) / 2;

            // middle of a wall
            if ((x == midx && (z == bounds[0][1] || z == bounds[1][1]))
                    || (z == midz && (x == bounds[0][0] || x == bounds[1][0])))
            {
                SiteStructures structs = WorldGenerator.instance.structureGen.getStructuresForSite(site);
                EnumFacing dir = getDoorDirection(site, x, z, scale, structs).getOpposite();
                StructureSpace other = structs.getStructure(x + dir.getFrontOffsetX(), z + dir.getFrontOffsetZ(),
                        scale);
                if (other != null && other.getFloor(site, scale) != getFloor(site, scale)) return false;
                return true;
            }
            return false;
        }



#No. 94
#File: SiteStructureGenerator.java

#Comment:
        /** Takes Block Coordinates
 	*/

#Code:
        public boolean isInWall(Site site, int x, int y, int scale)
        {
            int width = (scale / SITETOBLOCK);
            int pixelX = (x - site.corners[0][0] * scale - scale / 2 - width / 2) / width;
            int pixelY = (y - site.corners[0][1] * scale - scale / 2 - width / 2) / width;
            boolean ret = pixels.contains(pixelX + 2048 * pixelY);
            if (width <= 1)
            {
                pixelX = (x - 1 - site.corners[0][0] * scale - scale / 2 - width / 2) / width;
                pixelY = (y - 1 - site.corners[0][1] * scale - scale / 2 - width / 2) / width;
                ret = ret || pixels.contains(pixelX + 2048 * pixelY);
                pixelX = (x + 1 - site.corners[0][0] * scale - scale / 2 - width / 2) / width;
                pixelY = (y + 1 - site.corners[0][1] * scale - scale / 2 - width / 2) / width;
                ret = ret || pixels.contains(pixelX + 2048 * pixelY);
            }
            return ret;
        }

#No. 95
#File: WorldChunkManagerFinite.java

#Comment:
    /** Takes Blocks Coordinates
     */

#Code:
    private BiomeGenBase[] makeBiomes(BiomeGenBase[] biomes, int scale, int x, int z)
    {
        int index;
        for (int i1 = 0; i1 < 16; i1++)
        {
            for (int k1 = 0; k1 < 16; k1++)
            {
                index = (i1) + (k1) * 16;
                int biome = getBiomeFromMaps(x + i1 - WorldGenerator.shift.getX(),
                        z + k1 - WorldGenerator.shift.getZ());
                
                biomes[index] = BiomeGenBase.getBiome(biome);
            }
        }
        return biomes;
    }

#No. 96
#File: RocketMod.java

#Comment:
    /** Uses player interact here to also prevent opening of inventories.
     * 
     * @param evt */

#Code:
    @SubscribeEvent
    public void interactRightClickBlock(PlayerInteractEvent.RightClickBlock evt)
    {
        if (evt.getHand() == EnumHand.OFF_HAND || evt.getWorld().isRemote || evt.getItemStack() == null
                || !evt.getEntityPlayer().isSneaking() || evt.getItemStack().getItem() != Items.STICK)
            return;

        ItemStack stack = evt.getItemStack();
        String[] arr = stack.getDisplayName().split(",");
        BlockPos min = null;
        BlockPos max = null;
        if (arr.length == 6)
        {
            try
            {
                min = new BlockPos(Integer.parseInt(arr[0]), Integer.parseInt(arr[1]), Integer.parseInt(arr[2]));
                max = new BlockPos(Integer.parseInt(arr[3]), Integer.parseInt(arr[4]), Integer.parseInt(arr[5]));
            }
            catch (NumberFormatException e)
            {
                evt.getEntityPlayer().addChatMessage(new TextComponentString("no good name."));
            }
        }
        if (min != null && max != null)
        {
            IBlockEntity.BlockEntityFormer.makeBlockEntity(evt.getWorld(), min, max, evt.getPos(), EntityRocket.class);
        }
    }


#No. 97
#File: BlockLift.java

#Comment:
    /** Called when a block is placed using its ItemBlock.*/

#Code:
    public IBlockState onBlockPlaced(World worldIn, BlockPos pos, EnumFacing facing, float hitX, float hitY, float hitZ,
            int meta, EntityLivingBase placer)
    {
        return getStateFromMeta(meta);
    }



#No. 98
#File: ItemLinker.java

#Comment:
    /** If this function returns true (or the item is damageable), the
     * ItemStack's NBT tag will be sent to the client. */

#Code:
    public boolean getShareTag()
    {
        return true;
    }


#No. 99
#File: AccelerationFeatures.java

#Comment:
	/*
	* Haar-like filter for acceleration
	*/

#Code:
	private float getHaarFilter(float[] values)
	{
		float haar = 0;

		// Sizes in number of samples
		int wFrame = values.length;
		int wFilter = (int) (0.2 * wFrame);
		int wShift = (int) (0.5 * wFilter);
		int N = (wFrame - wFilter) / wShift + 1;

		float filterValue;

		for (int n = 0; n < N; n++)
		{
			filterValue = 0;

			for (int k = 0; k < wFilter; k++)
			{
				if (n * wShift + k < wFrame)
				{
					if (k < wFilter / 2)
					{
						// Left side of haar filter
						filterValue -= values[n * wShift + k];
					}
					else
					{
						// Right side of haar filter
						filterValue += values[n * wShift + k];
					}
				}
			}

			haar += Math.abs(filterValue);
		}

		
#No. 100
#File: ClockSync.java

#Comment:
    /*
     * static helper
     */

#Code:
    static void listenForStartSignal(int port)
    {
        try
        {
            DatagramSocket syncSocket = new DatagramSocket(port);
            syncSocket.setReuseAddress(true);

            Log.i("waiting for master pipeline (port = " + port + ")");
            while (true) {
                byte[] data = new byte[32];
                DatagramPacket packet = new DatagramPacket(data, 32);
                syncSocket.receive(packet);
                Log.d("received packet from " + packet.getAddress().toString());

                //check data
                String str = new String(packet.getData(), "ASCII");
                if (str.startsWith("SSI:STRT:RUN")) //SSI format for compatibility
                {
                    Log.d("packet identified as start ping");
                    break;
                }
                Log.d("packet not recognized");
            }
        }
        catch(IOException e)
        {
            Log.e("network sync failed", e);
        }
    }

#No. 101
#File: VoterConfig.java

#Comment:
    /**
     * Used for RPC IPC example

     */

#Code:
    @Bean
    public DirectExchange directExchange() {
        return new DirectExchange("voter.rpc");
    }

#No. 102
#File: ResponseBody.java

#Comment:
  /**
   * getResult
   */

#Code:
  @JsonIgnore
  public Result getResult () throws Exception {
    
    if (this.getType() == ResponseType.JSON) {
    
      return Results.ok((String)this.getContent() );
    } else if (this.getType() == ResponseType.FILE) {
    
      return Results.ok(new FileInputStream((String)this.getContent() ) );
    } else if (this.getType() == ResponseType.HTML) {
      
      return Results.ok((Content)this.getContent() );
    }
    
    throw new CodeException(
      151,
      12,
      "Unhandled ResponseBody Type ["
      + this.getType().toString()
      + "]",
      ExceptionClass.TYPE);
  }
#No. 103
#File: ResponseBody.java

#Comment:
  /**
   * getBadRequestResult
   * @return bad request response
   * @throws Exception
   */

#Code:
  @JsonIgnore
  public Result getBadRequestResult (
    VangavException vangavException,
    UUID requestId) throws Exception {
    
    try {
      
      ResponseBodyError responseBodyError =
        new ResponseBodyError(vangavException, requestId);
      
      return Results.badRequest((String)responseBodyError.getContent() );
    } catch (Exception e) {
      
      try {
        
        ResponseBodyError responseBodyError =
          new ResponseBodyError(vangavException);
        
        return Results.badRequest((String)responseBodyError.getContent() );
      } catch (Exception e2) {
        
        try {

          ResponseBodyError responseBodyError =
            new ResponseBodyError(requestId);
          
          return Results.badRequest((String)responseBodyError.getContent() );
        } catch (Exception e3) {

          ResponseBodyError responseBodyError =
            new ResponseBodyError();
          
          return Results.badRequest((String)responseBodyError.getContent() );
        }
      }
    }
  }
#No. 104
#File: ResponseBody.java

#Comment:
  /**
   * getBadRequestResult
   */

#Code:
  @JsonIgnore
  public Result getBadRequestResult (
    VangavException vangavException,
    UUID requestId) throws Exception {
    
    try {
      
      ResponseBodyError responseBodyError =
        new ResponseBodyError(vangavException, requestId);
      
      return Results.badRequest((String)responseBodyError.getContent() );
    } catch (Exception e) {
      
      try {
        
        ResponseBodyError responseBodyError =
          new ResponseBodyError(vangavException);
        
        return Results.badRequest((String)responseBodyError.getContent() );
      } catch (Exception e2) {
        
        try {

          ResponseBodyError responseBodyError =
            new ResponseBodyError(requestId);
          
          return Results.badRequest((String)responseBodyError.getContent() );
        } catch (Exception e3) {

          ResponseBodyError responseBodyError =
            new ResponseBodyError();
          
          return Results.badRequest((String)responseBodyError.getContent() );
        }
      }
    }
  }

#No. 105
#File: BrowseServlet.java

#Comment:
	/**
	 * Creates a folder.
	 */

#Code:
	protected void doPost(HttpServletRequest request,
			HttpServletResponse response, Session session)
			throws ServletException, IOException, TheBlendException {

		String parentId = getRequiredStringParameter(request, PARAM_PARENT);
		String typeId = getRequiredStringParameter(request, PARAM_TYPE_ID);
		String name = getStringParameter(request, PARAM_NAME);

		if (name == null || name.length() == 0) {
			redirect(HTMLHelper.encodeUrlWithId(request, "browse", parentId),
					request, response);
			return;
		}

		// fetch the parent folder
		Folder parent = CMISHelper.getFolder(session, parentId,
				CMISHelper.LIGHT_OPERATION_CONTEXT, "parent folder");

		// set name and type of the new folder
		Map<String, Object> properties = new HashMap<String, Object>();
		properties.put(PropertyIds.NAME, name);
		properties.put(PropertyIds.OBJECT_TYPE_ID, typeId);

		// create the folder
		try {
			parent.createFolder(properties);
		} catch (CmisBaseException cbe) {
			throw new TheBlendException("Could not create folder: "
					+ cbe.getMessage(), cbe);
		}

		redirect(HTMLHelper.encodeUrlWithId(request, "browse", parentId),
				request, response);
	}

#No. 106
#File: RayHandler.java

#Comment:
        /**
         * Expert functionality
         */

#Code:
        public Texture getLightMapTexture() {
                return this.lightMap.frameBuffer.getColorBufferTexture();
        }

#No. 107
#File: Category.java

#Comment:
	/**
	 * The implementation of deepEquals(Entity) for TreatmentCategorization and
	 * Category is complicated by their circular dependency. 
	 */

#Code:
	@Override
	public boolean deepEquals(Entity obj) {
		if(obj instanceof Category) {
			Category other = (Category) obj;
			return d_name.equals(other.d_name) && d_owner.deepEquals(other.d_owner);
		}
		return false;
	}

#No. 108
#File: TreatmentCategorizationWizardPresentation.java

#Comment:
	/**
	 *  TreatmentCategorization#splitRange(RangeEdge, double, boolean)
	 */

#Code:
	public Pair<RangeEdge> splitRange(final RangeEdge range, final double value, final boolean lowerRangeOpen) {
		ObservableList<DecisionTreeNode> options1 = getOptionsForEdge(range);
		Pair<RangeEdge> ranges = getBean().splitRange(range, value, lowerRangeOpen);
		
		// Ensure options list is preserved for first range
		d_optionsForEdge.remove(range);
		d_optionsForEdge.put(ranges.getFirst(), options1);
		
		// Ensure exclude-node for second range is in the options list
		DecisionTree tree = getBean().getDecisionTree();
		ObservableList<DecisionTreeNode> options2 = createOptionsForChildrenOfNode((ChoiceNode) tree.getEdgeSource(ranges.getSecond()));
		d_optionsForEdge.put(ranges.getSecond(), options2);
		getModelForEdge(ranges.getSecond()).setValue(findLeafNode(options2, null));
		
		return ranges;
	}

#No. 109
#File: EntityUtil.java

#Comment:
	/**
	 * Assumes that the key in <key, value> pairs is an Object to which a regular equals() is applicable.
	 */

#Code:
	public static boolean deepEqual(Map<?, ? extends Entity> o1, Map<?, ? extends Entity> o2) {
		if (o1.keySet().size() != o2.keySet().size()) return false;
		for (Entry<?,? extends Entity> entry : o1.entrySet()) {
			Object actualKey = findMatchingKey(entry.getKey(), o2.keySet());
			if (actualKey == null) return false;
			if (!deepEqual(entry.getValue(), o2.get(actualKey)))
				return false;
		}
		return true;
	}

#No. 110
#File: TreatmentCategorizationWizardPresentationTest.java

#Comment:
	/*
	 * Regression test for bug #566 
	 */

#Code:
	@Test
	public void testDoNotReuseDefaultDose() {
		TreatmentCategorizationWizardPresentation pm1 = new TreatmentCategorizationWizardPresentation(TreatmentCategorization.createDefault(), d_domain);
		TreatmentCategorizationWizardPresentation pm2 = new TreatmentCategorizationWizardPresentation(TreatmentCategorization.createDefault(), d_domain);
		pm1.getDoseUnit().setScaleModifier(ScaleModifier.MEGA);
		assertFalse(pm2.getDoseUnit().equals(pm1.getDoseUnit()));
	}



#No. 111
#File: AAbout.java

#Comment:
    /**
     * Final Strings variables.
     */

#Code:
    private String ABOUT_APP = null;

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        ABOUT_APP = " AIO video downloader [ " + "Version - " + versionName + " ]\n" +
                " Powered by SoftC Software LLC.";

        context = AAbout.this;

        setContentView(R.layout.about_activity);

        initViews();
        initOnClick();
    }

#No. 112
#File: ABaseTransformer.java

#Comment:
	/**
	 * If the position offset of a fragment is less than negative one or greater than one, returning true.
	 */

#Code:
	protected boolean hideOffscreenPages() {
		return true;
	}

#No. 113
#File: AbsDanmakuSync.java

#Comment:
    /**
     * synchronize pause resume state with outside playback
     */

#Code:
    public boolean isSyncPlayingState() {
        return false;
    }

#No. 114
#File: AbsEntityCursor.java

#Comment:
    /*
     * observers
     */

#Code:

    @Override
    public void registerContentObserver(ContentObserver observer) {
        cursor.registerContentObserver(observer);
    }

#No. 115
#File: AbstractAccess.java

#Comment:
    /**
     * Fields
     */

#Code:

    @Override
    public List<Field> getFields() {
        List<Field> fields = new ArrayList<>();

        if (forceAccess) {
            fields.addAll(getAllFields(this.clazz));
        } else {
            fields.addAll(getFields(this.clazz));
        }

        return fields;
    }

#No. 116
#File: AbstractAccess.java

#Comment:
    /**
     * Methods
     */

#Code:

    @Override
    public List<Method> getMethods() {
        List<Method> methods = new ArrayList<>();

        if (forceAccess) {
            methods.addAll(getAllMethods(this.clazz));
        } else {
            methods.addAll(getMethods(this.clazz));
        }

        return methods;
    }

#No. 117
#File: AbstractAccess.java

#Comment:
    /**
     * Constructors
     */

#Code:

    @Override
    public List<Constructor> getConstructors() {
        List<Constructor> constructors = new ArrayList<>();

        if (forceAccess) {
            constructors.addAll(getAllConstructors(this.clazz));
        } else {
            constructors.addAll(getConstructors(this.clazz));
        }

        return constructors;
    }

#No. 118
#File: AbstractAccess.java

#Comment:
    /**
     * Other things
     */

#Code:

    @Override
    public boolean isAssignableFrom(final Class<?> clazz) {
        return this.getReflectedClass().isAssignableFrom(clazz);
    }

#No. 119
#File: AbstractAccess.java

#Comment:
    /**
     * Utility methods
     */

#Code:

    protected static List<Class<?>> getAllSuperClasses(final Class<?> clazz) {
        List<Class<?>> result = new ArrayList<>();
        if (clazz != null && (INCLUDE_OBJECT || !clazz.equals(Object.class))) {
            result.add(clazz);
            result.addAll(getAllSuperClasses(clazz.getSuperclass()));
            for (Class<?> iface : clazz.getInterfaces()) {
                result.addAll(getAllSuperClasses(iface));
            }
        }

#No. 120
#File: AbstractAjcCompiler.java

#Comment:
    /**
     * Not safe and assembleArguments() must be run
     */

#Code:
    private boolean hasSourcesToCompile() {
        return resolvedIncludes.size() > 0;
    }

#No. 121
#File: AbstractApplicationsAggregate.java

#Comment:
    /**
     *  Handler
     */

#Code:
    private PlatformData createPlatformFromExistingPlatformHandler(final PlatformData platform,
                                                                   final PlatformData originPlatform,
                                                                   final Map<String, PropertiesData> originProperties){
        final PlatformCreatedFromExistingCommand hc = new PlatformCreatedFromExistingCommand(getPlatformRegistry(),
                getPropertiesRegistry(), platform, originPlatform, originProperties);

        this.tryAtomic(platform.getKey().getEntityName(), hc);

        //We return the platform from get method, this way we are sure to get the platform from the registry, ie the way it has been modified.
        return getPlatform(platform.getKey()).orElseThrow(() -> new MissingResourceException("Cannot get the created platform. This is not expected and should be reported"));
    }


#No. 122
#File: AbstractApplicationsAggregate.java

#Comment:
    /*
     * REPLAY LISTENERS
     */

#Code:

    @Subscribe
    @Override
    public void replayPlatformCreatedEvent(final PlatformCreatedEvent event) {
        try {
            final PlatformData platform = event.getPlatform();
            this.createPlatform(platform);
        } catch (Exception e) {
            LOGGER.error("Error while replaying platform created event {}", e.getMessage());
        }
    }


#No. 123
#File: AbstractArrayState.java

#Comment:
	/**
	 * May return null if array has been collected.
	 */

#Code:
	final public Object getArray() {
		Object l = array.get();
		if (l == null) {
			Yikes.yikes("Getting array of AbstractArrayState after array has been gc'd.");
		}
		return l;
	}

#No. 124
#File: AbstractAxis3D.java

#Comment:
    /**
     * Provides serialization support.
     */

#Code:
    private void readObject(ObjectInputStream stream)
        throws IOException, ClassNotFoundException {
        stream.defaultReadObject();
        this.lineStroke = SerialUtils.readStroke(stream);
    }

#No. 125
#File: AbstractBackendHelper.java

#Comment:
    /**
     * Call this in LocationBackendService.
     */

#Code:
    public synchronized void onOpen() {
        if (state == State.WAITING || state == State.SCANNING)
            throw new IllegalStateException("Do not call onOpen if not closed before");
        currentDataUsed = true;
        state = State.WAITING;
    }


#No. 126
#File: AbstractBasicVO.java

#Comment:
    /**
     * Useful For Debugging
     */

#Code:
    @Override
    public String toString() {
        return "id: " + this.id;
    }

#No. 127
#File: AbstractBindTest.java

#Comment:
        /**
         * Default constructor
         */

#Code:
        public EchoProtocolHandler() {
            super();
        }

        r\\et

#No. 128
#File: AbstractBlockPositionWrapper.java

#Comment:
	/**
	 * The constructor
	 */

#Code:
	public AbstractBlockPositionWrapper(int x, int y, int z) {
		this.x = x;
		this.y = y;

		this.z = z;
	}



#No. 129
#File: AbstractCalendarView.java

#Comment:
    /**
     * Getter methods
     */

#Code:
    public int getFirstDayOfWeek() {
        return mFirstDayOfWeek;
    }

#No. 130
BaseWstxTest.java
#Comment:
    /*
    // Assertions
     */

#Code:

    protected static String tokenTypeDesc(int tt)
    {
	String desc = mTokenTypes.get(Integer.valueOf(tt));
	return (desc == null) ? ("["+tt+"]") : desc;
    }


#No. 131
BasicBinder.java
#Comment:
    /**
     * Creates a new instance
     */

#Code:
    public BasicBinder(boolean includeBuiltInBindings) {

    	initExtendedBinders();
    	
        if (includeBuiltInBindings) {

            initJdkBindings();

            // Before we load other configuration, load the binding
            // configuration from
            // jadira-bindings' jar to ensure no-one overrides our built-in
            // mappings.
            initBuiltInBindings();

            // Init bindings registered from other jars
            initRegisteredBindings();
        }
    }

#No. 132
BasicBinder.java
#Comment:
    /******************
     * String Binder  * 
     ******************/

#Code:
    
	public <T> T convertFromString(Class<T> output, String object) {
		return convertTo(String.class, output, object);
	}

#No. 133
BasicCommandsBuilder.java
#Comment:
	/*
	 * Commands X
	 */

#Code:
	@Override
	public Object visit(Rule_cmdXorInt rule) {
		return generateCmdFromRules(rule.rules);
	}

#No. 134
BasicForm.java
#Comment:
   /**
    * Default constructor
    */

#Code:
   public BasicForm()
   {
      initializePanel();
   }

#No. 135
BasicForm.java
#Comment:
   /**
    * Initializer
    */

#Code:
   protected void initializePanel()
   {
      setLayout(new BorderLayout());
      add(createPanel(), BorderLayout.CENTER);
   }

#No. 136
BasicHandlerTest.java
#Comment:
  /* This is not a feature, but a known limitation */

#Code:
  public void testSetInputFollowedByACancelInJOptionPaneReturnsTheInputValue() throws Exception {
    WindowInterceptor
      .init(new Trigger() {
        public void run() throws Exception {
          assertEquals("Result", JOptionPane.showInputDialog("Message"));
        }
      })
      .process(BasicHandler.init()
        .setText("Result")
        .triggerButtonClick("Cancel"))
      .run();
  }

#No. 137
BasicLink.java
#Comment:
    /**
     * fluent setter
     */

#Code:
    public BasicLink withHref(final String href) {
        this.setHref(href);
        return this;
    }

#No. 138
BasicLink.java
#Comment:
    /**
     * fluent setter
     */

#Code:
    public BasicLink withBasicLinkSimpleExtension(final List<Object> basicLinkSimpleExtension) {
        this.setBasicLinkSimpleExtension(basicLinkSimpleExtension);
        return this;
    }

#No. 139
BasicLink.java
#Comment:
    /**
     * fluent setter
     */

#Code:
    public BasicLink withBasicLinkObjectExtension(final List<AbstractObject> basicLinkObjectExtension) {
        this.setBasicLinkObjectExtension(basicLinkObjectExtension);
        return this;
    }

#No. 140
BasicParserTest.java
#Comment:
    /*
    /* Test methods
     */

#Code:

    final CsvMapper MAPPER = mapperForCsv();

    public void testSimpleExplicit() throws Exception {
        ObjectReader r = MAPPER.reader(SIMPLE_SCHEMA);
        _testSimpleExplicit(r, false);
        _testSimpleExplicit(r, true);
    }

#No. 141
BasicResourcePoolFactory.java
#Comment:
    /**
     * If start is less than min, it will
     * be ignored, and the pool will start
     * with min.
     */

#Code:
    public synchronized void setStart( int start )
	throws ResourcePoolException
    { this.start = start; }

#No. 142
BasicUUID.java
#Comment:
	/*
	 * Formatable methods
	 */

#Code:

	public BasicUUID() { super(); }

#No. 143
BasicUUID.java
#Comment:
	/*
	** Methods of UUID
	*/

#Code:
	public boolean equals(Object otherObject)
	{
		if (!(otherObject instanceof BasicUUID))
			return false;

		BasicUUID other = (BasicUUID) otherObject;

		return (this.sequence == other.sequence)
			&& (this.timemillis == other.timemillis)
			&& (this.majorId == other.majorId);
	}

#No. 144
BasicVisualizationServerTest.java
#Comment:
  /*
   * a bug was introduced where the RenderContext in BasicVisualizationServer was reassigned.
   */

#Code:
  public void testRenderContextNotOverridden() {
    SparseGraph<Object, Object> graph = new SparseGraph<Object, Object>();
    CircleLayout<Object, Object> layout = new CircleLayout<Object, Object>(graph);

    BasicVisualizationServer<Object, Object> server = new BasicVisualizationServer<Object, Object>(layout);

    PickedState<Object> pickedVertexState = server.getRenderContext().getPickedVertexState();
    assertNotNull(pickedVertexState);
  }

#No. 145
BatchedJmsTemplate.java
#Comment:
    /**
     * Method replicates the simple logic from JmsTemplate#getRequiredDefaultDestinationName.
     */

#Code:
    private String getRequiredDefaultDestinationName() throws IllegalStateException {
        String name = getDefaultDestinationName();
        if (name == null) {
            throw new IllegalStateException(
                    "No 'defaultDestination' or 'defaultDestinationName' specified. Check configuration of JmsTemplate.");
        }
        return name;
    }

#No. 146
BatchedJmsTemplate.java
#Comment:
    /**
     * Method replicates the simple logic from JmsTemplate doReceive MessageConsumer, long.
     */

#Code:
    private Message doReceive(MessageConsumer consumer, long timeout) throws JMSException {

        if (timeout == RECEIVE_TIMEOUT_NO_WAIT) {
            return consumer.receiveNoWait();
        } else if (timeout > 0) {
            return consumer.receive(timeout);
        } else {
            return consumer.receive();
        }
    }

#No. 147
BatchExecution.java
#Comment:
        /**
         * Defaults to ONE if not set.
         */

#Code:
        public BatchExecutionBuilder withConsistency(String consistency) {
            this.consistency = consistency;
            return this;
        }

#No. 148
BatchExecution.java
#Comment:
        /**
         * Defaults to LOGGED if not set.
         */

#Code:
        public BatchExecutionBuilder withBatchType(BatchType batchType) {
            this.batchType = batchType;
            return this;
        }

#No. 149
BatchExecutorImpl.java
#Comment:
/**
 * Default implementation that simply executes all events.
 */

#Code:
public class BatchExecutorImpl implements BatchExecutor {
    public void execute(EventReader toExecute) {
        for (int i = 0; i < toExecute.size(); i++) {
            toExecute.get(i).run();
        }
    }
}

#No. 150
BatchIGVPictures.java
#Comment:
		/* paint */

#Code:
		JButton but=new JButton(new AbstractAction("Load Mutation File")
			{
			@Override
			public void actionPerformed(ActionEvent e) {
				loadVCF();
				}
			});

#No. 151
Batchlet1Test.java
#Comment:
    /**
     * stepFailWithLongException will throw an exception with very long message, and the exception should be truncated and stored in job repository STEP_EXECUTION table .
     */

#Code:
    @Test
    public void testStepFailWithLongException() throws Exception {
        final Properties params = Batchlet1Test.createParams(Batchlet1.ACTION, Batchlet1.ACTION_LONG_EXCEPTION);
        System.out.printf("Start with params %s%n", params);
        final long jobExecutionId = jobOperator.start(jobName4, params);
        final JobExecutionImpl jobExecution = (JobExecutionImpl) jobOperator.getJobExecution(jobExecutionId);
        jobExecution.awaitTermination(waitTimeoutMinutes, TimeUnit.MINUTES);
        Assert.assertEquals(BatchStatus.FAILED, jobExecution.getBatchStatus());
        final StepExecutionImpl stepExecution = (StepExecutionImpl) jobExecution.getStepExecutions().get(0);
        Assert.assertEquals(BatchStatus.FAILED, stepExecution.getBatchStatus());
        Assert.assertEquals(Batchlet1.ACTION_LONG_EXCEPTION, stepExecution.getExitStatus());

        final Exception exception = stepExecution.getException();
        Assert.assertNotNull(exception);
        final String message = exception.getMessage();
        //System.out.printf("Step exception message: %s%n", message.substring(0, Math.min(message.length(), 1000)));
        Assert.assertEquals(true, message.startsWith(Batchlet1.ACTION_LONG_EXCEPTION));
    }

#No. 152
BatchMutateResult.java
#Comment:
  /**
   * Performs a deep copy on other.
   */

#Code:
  public BatchMutateResult(BatchMutateResult other) {
    __isset_bit_vector.clear();
    __isset_bit_vector.or(other.__isset_bit_vector);
    if (other.isSetDeps()) {
      Set<Dep> __this__deps = new HashSet<Dep>();
      for (Dep other_element : other.deps) {
        __this__deps.add(new Dep(other_element));
      }
      this.deps = __this__deps;
    }
    this.lts = other.lts;
  }

#No. 153
BatchOnceOperationIT.java
#Comment:
    /**
     * No matter how we transform the query, we still have to throw SUBQUERY_CARDINALITY_VIOLATION if the subquery returns more than one row.
     */

#Code:
    @Test
    public void subqueryCardinalityViolation() throws Exception {
        // insert duplicate value in table B;
        methodWatcher.executeUpdate("insert into B values(16,'xxx', 16, 'xxx')");
        try {
            doUpdate(true, 0, "update A set A.name = (select B.name from B where A.id = B.id) where A.name IS NULL");
            fail();
        } catch (SQLException e) {
            Throwable cause = Throwables.getRootCause(e);
            String errMsg = cause.getMessage();
            assertTrue(errMsg.contains("Scalar subquery is only allowed to return a single row"));
        }
    }

#No. 154
BatchOnceOperationIT.java
#Comment:
    /* Same test as above but position of column refs in subquery where clause is reversed. */

#Code:
    @Test
    public void updateReverseSubqueryColumnReferences() throws Exception {
        doUpdate(true, 6, "update A set A.name = (select B.name from B where B.id = A.id) where A.name IS NULL");

        ResultSet rs = methodWatcher.executeQuery("select A.id,A.name from A");

        assertEquals("" +
                "ID |NAME |\n" +
                "----------\n" +
                "10 | 10_ |\n" +
                "11 | 11_ |\n" +
                "12 | 12_ |\n" +
                "13 |NULL |\n" +
                "14 |NULL |\n" +
                "15 |NULL |\n" +
                "16 | 16_ |\n" +
                "17 | 17_ |\n" +
                "18 | 18_ |\n" +
                "19 |NULL |\n" +
                "20 |NULL |\n" +
                "21 |NULL |", TestUtils.FormattedResult.ResultFactory.toString(rs));
    }


#No. 155
BatchTest.java
#Comment:
    /**
     * only update/insert/delete sql can be wrapped in an execute batch.
     */

#Code:
    @Test(expected = EqlExecuteException.class)
    public void test3() {
        EqlTran eqlTran = new Eql().newTran();
        eqlTran.start();
        EqlBatch eqlBatch = new EqlBatch(5);

        for (int i = 0; i < 10; ++i) {
            new Eql().useBatch(eqlBatch).useTran(eqlTran).id("test").limit(1).execute();
            String orderNo = randLetters(10);
            String userId = randLetters(10);
            int prizeItem = randInt(10);
            int ret = new Eql().useBatch(eqlBatch).useTran(eqlTran).insert("insertPrizeBingoo")
                    .params(orderNo, "Olympic", "" + prizeItem, userId)
                    .execute();

            assertThat(ret, is(0));
        }

        eqlBatch.executeBatch();
        Closes.closeQuietly(eqlTran);
    }

#No. 156
BaublesUtil.java
#Comment:
  /**
   * Do NOT modify this inventory on the client side of a singleplayer game!
   */

#Code:
  public IInventory getBaubles(EntityPlayer player) {
    return hasBaubles() ? getBaublesInvUnsafe(player) : null;
  }

#No. 157
BCDSTU4145PublicKey.java
#Comment:
    /*
     * called for implicitCA
     */

#Code:
    public BCDSTU4145PublicKey(
        String algorithm,
        ECPublicKeyParameters params)
    {
        this.algorithm = algorithm;
        this.ecPublicKey = params;
        this.ecSpec = null;
    }

#No. 158
BCECGOST3410PublicKey.java
#Comment:
    /*
     * called for implicitCA
     */

#Code:
    public BCECGOST3410PublicKey(
        String algorithm,
        ECPublicKeyParameters params)
    {
        this.algorithm = algorithm;
        this.ecPublicKey = params;
        this.ecSpec = null;
    }


#No. 159
BCECPublicKey.java
#Comment:
    /*
     * called for implicitCA
     */

#Code:
    public BCECPublicKey(
        String algorithm,
        ECPublicKeyParameters params,
        ProviderConfiguration configuration)
    {
        this.algorithm = algorithm;
        this.ecPublicKey = params;
        this.ecSpec = null;
        this.configuration = configuration;
    }

#No. 160
BcSignedDataTest(1).java
#Comment:
    /*
     *
     *  INFRASTRUCTURE
     *
     */

#Code:

    public BcSignedDataTest(String name)
    {
        super(name);
    }


#No. 161
BCStyle.java
#Comment:
    /**
     * Singleton instance.
     */

#Code:
    public static final X500NameStyle INSTANCE = new BCStyle();

    protected final Hashtable defaultLookUp;
    protected final Hashtable defaultSymbols;

    protected BCStyle()
    {
        defaultSymbols = copyHashTable(DefaultSymbols);
        defaultLookUp = copyHashTable(DefaultLookUp);
    }



#No. 162
#File: AbstractArrayState.java

#Comment:
	/*
	 * A version to use in caches where getting null can be expected.
	 */

#Code:
	final Object getArrayNoCheck() {
		return array.get();
	}


#No. 163
#File: Util.java

#Comment:
  /**
   * V must implement equals.
   */

#Code:
  public static <V> void assertCollectionSameElements(Collection<V> expected, Collection<V> actual) {
    Collection<V> expectedCopy = new ArrayList<V>(expected);
    Collection<V> actualCopy = new ArrayList<V>(actual);

    for (V item : actualCopy) {
      assertTrue(expectedCopy.remove(item));
    }
    assertTrue(expectedCopy.isEmpty());
  }

#No. 164
#File: AggregateUI.java

#Comment:
  /*
   SINGLETON FETCHING 
   */

#Code:

  public static synchronized final AggregateUI getUI() {
    if (singleton == null) {
      // if you get here, you've put something in the AggregateUI()
      // constructor that should have been put in the onModuleLoad()
      // method.
      GWT.log("AggregateUI.getUI() called before singleton has been initialized");
    }
    return singleton;
  }

#No. 165
#File: AggregateUI.java

#Comment:
  /*
   NAVIGATION 
   */

#Code:

  public void redirectToSubTab(SubTabs subTab) {
    for (Tabs tab : tabPosition) {

      AggregateTabBase tabObj = tabMap.get(tab);
      if (tabObj == null) {
        continue;
      }

      SubTabInterface subTabObj = tabObj.getSubTab(subTab);
      if (subTabObj != null) {
        // found the tab
        int index = tabPosition.indexOf(tab);
        mainNav.selectTab(index);
        tabObj.selectTab(tabObj.findSubTabIndex(subTab));

      }
    }
    resize();
  }

#No. 166
#File: AggregateUI.java

#Comment:
  /*
   *SECURITY 
   */

#Code:

  private boolean authorizedForTab(Tabs tab) {
    switch (tab) {
    case SUBMISSIONS:
      return userInfo.getGrantedAuthorities().contains(GrantedAuthorityName.ROLE_DATA_VIEWER);
    case MANAGEMENT:
      return userInfo.getGrantedAuthorities().contains(GrantedAuthorityName.ROLE_DATA_OWNER);
    case ADMIN:
      return userInfo.getGrantedAuthorities().contains(GrantedAuthorityName.ROLE_SITE_ACCESS_ADMIN);
    case ODKTABLES:
    	return userInfo.getGrantedAuthorities().contains(GrantedAuthorityName.ROLE_SYNCHRONIZE_TABLES) ||
    		   userInfo.getGrantedAuthorities().contains(GrantedAuthorityName.ROLE_SUPER_USER_TABLES) ||
               userInfo.getGrantedAuthorities().contains(GrantedAuthorityName.ROLE_ADMINISTER_TABLES);
    default:
      return false;
    }
  }

#No. 167
#File: AggregateUI.java

#Comment:
  /*
   * HELP STUFF 
   */

#Code:

  private void changeHelpPanel(SubTabs subMenu) {
    // change root item
    rootItem.setText(subMenu + " Help");
    rootItem.removeItems();
    SubTabInterface subTabObj = getSubTab(subMenu);
    if (subTabObj != null) {
      HelpSliderConsts[] helpVals = subTabObj.getHelpSliderContent();
      if (helpVals != null) {
        for (int i = 0; i < helpVals.length; i++) {
          TreeItem helpItem = new TreeItem(SafeHtmlUtils.fromString(helpVals[i].getTitle()));
          TreeItem content = new TreeItem(SafeHtmlUtils.fromString(helpVals[i].getContent()));
          helpItem.setState(false);
          helpItem.addItem(content);
          rootItem.addItem(helpItem);
        }
      }
    }
    rootItem.setState(true);
    resize();
  }


#No. 168
#File: AbstractExternalService.java

#Comment:
  /**
   * Helper function for constructors.
   *
   */

#Code:
  protected static FormServiceCursor createFormServiceCursor(IForm form, CommonFieldsBase entity, ExternalServicePublicationOption externalServiceOption, ExternalServiceType type, CallingContext cc) throws ODKDatastoreException {
    FormServiceCursor formServiceCursor = FormServiceCursor.createFormServiceCursor(form, type, entity, cc);
    formServiceCursor.setExternalServiceOption(externalServiceOption);
    formServiceCursor.setIsExternalServicePrepared(false);
    formServiceCursor.setOperationalStatus(OperationalStatus.ESTABLISHED);
    formServiceCursor.setEstablishmentDateTime(new Date());
    formServiceCursor.setUploadCompleted(false);
    return formServiceCursor;
  }

#No. 169
#File: AbstractExternalService.java

#Comment:
  /**
   * Helper function for constructors.
   */

#Code:
  protected static final <T extends CommonFieldsBase> T newEntity(T parameterTableRelation, CallingContext cc) throws ODKDatastoreException {
    Datastore ds = cc.getDatastore();
    User user = cc.getCurrentUser();
    return ds.createEntityUsingRelation(parameterTableRelation, user);
  }

#No. 170
#File: AbstractExternalService.java

#Comment:
  /**
   * Helper function for constructors.
   */

#Code:
  protected static final <T extends CommonFieldsBase> T retrieveEntity(T parameterTableRelation, FormServiceCursor fsc, CallingContext cc) throws ODKDatastoreException {
    Datastore ds = cc.getDatastore();
    User user = cc.getCurrentUser();
    return ds.getEntity(parameterTableRelation, fsc.getAuriService(), user);
  }

#No. 171
#File: FusionTable.java

#Comment:
  /**
   * Helper function to create a FusionTable parameter table (missing the
   * not-yet-created tableId).
   */

#Code:
  private static final FusionTable2ParameterTable newFusionTableEntity(String ownerEmail,
      CallingContext cc) throws ODKDatastoreException {
    Datastore ds = cc.getDatastore();
    User user = cc.getCurrentUser();

    FusionTable2ParameterTable t = ds.createEntityUsingRelation(
        FusionTable2ParameterTable.assertRelation(cc), user);
    t.setOwnerEmail(ownerEmail);
    return t;
  }


#No. 172
#File: OhmageJsonServer2ParameterTable.java

#Comment:
  /**
   * Construct an empty entity. 
   */

#Code:
  private OhmageJsonServer2ParameterTable(OhmageJsonServer2ParameterTable ref, User user) {
    super(ref, user);
  }



#No. 173
#File: PersistentResults.java

#Comment:
  /**
   * Constructor helper for the common case.

   */

#Code:
  public PersistentResults(ExportType type, IForm form, SubmissionFilterGroup filterGroup, Map<String, String> parameters,
      CallingContext cc) throws ODKDatastoreException {
    Datastore ds = cc.getDatastore();
    User user = cc.getCurrentUser();
    PersistentResultsTable relation = PersistentResultsTable.assertRelation(cc);
    row = ds.createEntityUsingRelation(relation, user);
    setRequestingUser(user.getUriUser());
    Date now = new Date();
    setRequestDate(now);
    setRequestParameters(parameters);
    setLastRetryDate(now);
    setAttemptCount(1L);
    setStatus(ExportStatus.GENERATION_IN_PROGRESS);
    setResultType(type);
    setFormId(form.getFormId());
    if(filterGroup != null) {
      setFilterGroupUri(filterGroup.getUri());
    }
    this.bcm = PersistentResultsTable.assertManipulator(row.getUri(), cc);

    // NOTE: the entity is not yet persisted!
  }




#No. 174
#File: BulkRowObjWrapper.java

#Comment:
  /**
   * Should only be called if the request didn't specify a rowFilterScope

   */

#Code:
  public void setRowFilterScope(RowFilterScope rowFilterScope) {
    if ( !nullIncomingScope ) {
      throw new IllegalStateException("Should not be called");
    }
    this.rowFilterScope = rowFilterScope;
    row.setRowFilterScope(rowFilterScope);
  }


#No. 175
#File: Row.java

#Comment:
  /**
   * Expects a string as generated by org.opendatakit.common.utils.WebUtils#iso8601Date(Date).
   */

#Code:
  public void setSavepointTimestamp(String savepointTimestamp) {
    this.savepointTimestamp = savepointTimestamp;
  }

#No. 176
#File: QueryBase.java

#Comment:
  /**
   * CAUTION: the attribute must be in the top-level record!
   */

#Code:
  public void addFilter(FormElementModel attribute, FilterOperation op,
  						Object value) {
	if ( attribute.isMetadata() ) {
		DataField metaField;
		TopLevelDynamicBase tlb = ((TopLevelDynamicBase) form.getTopLevelGroupElement().getFormDataModel().getBackingObjectPrototype());
		switch ( attribute.getType() ) {
		case META_INSTANCE_ID:
			metaField = tlb.primaryKey;
			break;
		case META_IS_COMPLETE:
			metaField = tlb.isComplete;
			break;
		case META_MODEL_VERSION:
			metaField = tlb.modelVersion;
			break;
		case META_SUBMISSION_DATE:
			metaField = tlb.submissionDate;
			break;
		case META_UI_VERSION:
			metaField = tlb.uiVersion;
			break;
		case META_DATE_MARKED_AS_COMPLETE:
			metaField = tlb.markedAsCompleteDate;
		default:
			throw new IllegalStateException("unknown Metadata type");
		}
		query.addFilter(metaField, op, value);
	} else {
		query.addFilter(attribute.getFormDataModel().getBackingKey(), op, value);
	}
  }

#No. 177
#File: QueryByUIFilterGroup.java

#Comment:
  /**
   * Silently skip the submissions that are not retrievable due to malformations
   * of some kind.
   */

#Code:
  public List<Submission> getResultSubmissions(CallingContext cc) throws ODKDatastoreException {
    
    List<Submission> retrievedSubmissions = new ArrayList<Submission>();

    // retrieve submissions
    QueryResult results = getQueryResult(cursor, fetchLimit);
    List<? extends CommonFieldsBase> submissionEntities = results.getResultList();

    // create a row for each submission
    for (int count = 0; count < submissionEntities.size(); count++) {
      CommonFieldsBase subEntity = submissionEntities.get(count);
      try {
        Submission sub = new Submission((TopLevelDynamicBase) subEntity, getForm(), cc);
        retrievedSubmissions.add(sub);
      } catch (ODKDatastoreException e ) {
        Log logger = LogFactory.getLog(QueryByUIFilterGroup.class);
        e.printStackTrace();
        logger.error("Unable to reconstruct submission for " + 
            subEntity.getSchemaName() + "." + subEntity.getTableName() + " uri " + subEntity.getUri());
        
        if ( (e instanceof ODKEntityNotFoundException) ||
            (e instanceof ODKEnumeratedElementException) ) {
          // see if we should throw an error or skip processing...
          Boolean skip = ServerPreferencesProperties.getSkipMalformedSubmissions(cc);
          if ( skip ) {
            continue;
          } else {
            throw e;
          }
        } else {
          throw e;
        }
      }
    }

    // advance cursor...
    cursor = results.getResumeCursor();
    return retrievedSubmissions;
  }



#No. 178
#File: DynamicDocumentBase.java

#Comment:
	/**
	 * Construct a relation prototype.
	 */

#Code:
	protected DynamicDocumentBase(String databaseSchema, String tableName) {
		super(databaseSchema, tableName);
		fieldList.add(topLevelAuri=new DataField(TOP_LEVEL_AURI));
	}

#No. 179
#File: DynamicDocumentBase.java

#Comment:
	/**
	 * Construct an empty entity.
	 */

#Code:
	protected DynamicDocumentBase(DynamicDocumentBase ref, User user) {
		super(ref, user);
		topLevelAuri = ref.topLevelAuri;
	}

#No. 180
#File: DatastoreImpl.java

#Comment:
  /*
   * Entity manipulation APIs
   *
   */

#Code:

  @SuppressWarnings("unchecked")
  @Override
  public <T extends CommonFieldsBase> T createEntityUsingRelation(T relation, User user) {

    // we are generating our own PK, so we don't need to interact with DB
    // yet...
    T row;
    try {
      row = (T) relation.getEmptyRow(user);
    } catch (Exception e) {
      throw new IllegalArgumentException("failed to create empty row", e);
    }
    return row;
  }

#No. 181
#File: SecurityRevisionsTable.java

#Comment:
	/**
	 * Construct a relation prototype. 
	 */

#Code:
	protected SecurityRevisionsTable(String schemaName) {
		super(schemaName, TABLE_NAME);
		fieldList.add(LAST_REVISION_DATE);
	}

#No. 182
#File: SecurityRevisionsTable.java

#Comment:
	/**
	 * Construct an empty entity.  
	 */

#Code:
	protected SecurityRevisionsTable(SecurityRevisionsTable ref, User user) {
		super(ref, user);
	}


#No. 183
#File: SecurityRevisionsTable.java

#Comment:
	/**
	 * This is private because this table implements a singleton pattern.
	 */

#Code:
	private static synchronized final SecurityRevisionsTable assertRelation(Datastore datastore, User user) throws ODKDatastoreException {
		if ( relation == null ) {
			SecurityRevisionsTable relationPrototype;
			relationPrototype = new SecurityRevisionsTable(datastore.getDefaultSchemaName());
			datastore.assertRelation(relationPrototype, user);
			relation = relationPrototype;
		}
		return relation;
	}





#No. 184
#File: DefaultDoxygenFieldEditor.java

#Comment:
	/**
	 * Constructor
	 */

#Code:
	public DefaultDoxygenFieldEditor( Composite parent ) {
		super( IPreferences.DEFAULT_DOXYGEN, "Doxygen:", parent );
	}



#No. 185
#File: UserServlet.java

#Comment:
	/**
	 * The doGet method of the servlet. 
	 * This method is called when a form has its tag value method equals to get.
	 */

#Code:
	public void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {

		doPost(request,response);
	}


#No. 186
#File: UserServlet.java

#Comment:
	/**
	 * The doPost method of the servlet. 
	 *
	 * This method is called when a form has its tag value method equals to post.

	 */

#Code:
	public void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {

		response.setCharacterEncoding("utf-8");
		
		String action = request.getParameter("action");
		
		if(action == null){
			PrintWriter out = response.getWriter();
			out.print("");
		}else if(action.equals("login")){
			login(request,response);
		}else if(action.equals("register")){
			register(request,response);
		}else if(action.equals("logout")){
			logout(request,response);
		}
		
	}

#No. 187
#File: RelCompFirstPage.java

#Comment:
	/**
	 * Create the wizard.
	 */

#Code:
	public RelCompFirstPage(RelCompOccurrence relComp) 
	{
		super(relComp);
		setDescription("Associations: "+relComp.getParser().getStringRepresentation(relComp.getA1())+" and "+relComp.getParser().getStringRepresentation(relComp.getA2()));
	}

#No. 188
#File: UndefPhaseThirdPage.java

#Comment:
	/**
	 * Create the wizard.
	 */

#Code:
	public UndefPhaseThirdPage(UndefPhaseOccurrence up) 
	{
		super(up);
		setDescription((new ParsingElement(up.getPartition(),true,"")).toString());
	}

#No. 189
#File: ManagerPattern.java

#Comment:
	/**
	 * Used by Parsers 
	 * */

#Code:
	public ManagerPattern() {
		patternOperator = new PatternOperator();
		pageProcessor = new PageProcessor(patternOperator);
		actionProcessor = new ActionProcessor(patternOperator);
	}

#No. 190
#File: ManagerPattern.java

#Comment:
	/**
	 * For manager pages
	 * */

#Code:
	public PageProcessor getPageProcessor(){
		return pageProcessor;
	}

#No. 191
#File: ManagerPattern.java

#Comment:
	/**
	 *  Actions 
	 *  */

#Code:
	public ActionProcessor getActionProcessor(){
		patternOperator.updateLists(root);
		return actionProcessor;
	}

#No. 192
#File: WizardAssitant.java

#Comment:
	/**
	 * Used to prevent the back button perform
	 * */

#Code:
	@Override
	public IWizardPage getPreviousPage(IWizardPage page) {
		return page;
	}


#No. 193
#File: ProjectTree.java

#Comment:
	/**
	 * Check Node.
	 * 
	 * @param node
	 * @param safe
	 * @param modeltree
	 */

#Code:
	@SuppressWarnings({ "rawtypes", "unused" })
	public void checkNode(DefaultMutableTreeNode node, boolean safe)
	{		
		EObject childObject;		
		addCheckingPath(new TreePath(node.getPath()));		
		
		Object userobj = node.getUserObject();
		Object obj=null;
		if (userobj instanceof OntoUMLElement) obj = ((OntoUMLElement)userobj).getElement();
		else if (userobj instanceof StructureDiagram) obj = ((StructureDiagram)userobj);
		else if (userobj instanceof OCLDocument) obj = ((OCLDocument)userobj);
		else if (userobj instanceof UmlProject) obj = ((UmlProject)userobj);
		
		//unselected children only if was different than Association, Diagram or Project
    	if(safe && obj!=null && node.getChildCount()>0 && !(obj instanceof Association) && !(obj instanceof StructureDiagram) && !(obj instanceof UmlProject) && !(obj instanceof OCLDocument)) 
    	{
			Enumeration e = node.breadthFirstEnumeration();
			DefaultMutableTreeNode childNode = (DefaultMutableTreeNode)e.nextElement();		
			
			while (e.hasMoreElements()) 
	    	{
				childNode = (DefaultMutableTreeNode)e.nextElement();
				childObject = ((OntoUMLElement)childNode.getUserObject()).getElement();		    		
				getCheckingModel().removeCheckingPath(new TreePath(childNode.getPath()));				
			}
    	}
	}


#No. 194
#File: FoundTableModel.java

#Comment:
    /*
     * Don't need to implement this method unless your table's
     * editable.
     */

#Code:
    public boolean isCellEditable(int row, int col) {
        //Note that the data/cell address is constant,
        //no matter where the cell appears onscreen.            
    	return false;        
    }



#No. 195
#File: PatternTool.java

#Comment:
	/*
	 * Called when clicked at Toolbar
	 * */

#Code:
	private static void _runModelCompleter(final DiagramManager diagramManager,final double x, final double y) {
		try{
			ModelCompleter mcw = ModelCompleter.createDialog();
			ModelCompleterManager mcm = new ModelCompleterManager(ProjectBrowser.frame.getProjectBrowser().getParser(), mcw, x, y);

			mcm.runAnalysis();
			if(mcw.isEmpty()){
				mcw.showMessageBox();
				return;
			}

			mcw.open();

			if(mcw.wasClosed())
				return;

			Fix fix = mcw.getFix();
			diagramManager.updateOLED(fix);

			_runModelCompleter(diagramManager, x, y);
		}catch(Exception e){
			//do not show the stacktrace, everything is ok...
			e.printStackTrace();
		}
	}
#No. 196
#File: FoundTableModel.java

#Comment:
    /*
     * Don't need to implement this method unless your table's
     * data can change.
     */

#Code:
    public void setValueAt(Object value, int row, int col) 
    { 
        data[row][col] = value;
        fireTableCellUpdated(row, col); 
    }


#No. 197
#File: ModelHelper.java

#Comment:
	/**
	 * If the element is not found in diagram "editor", the method searches for its diagram element without an editor attached to it.
	 */

#Code:
	public static DiagramElement getDiagramElementByEditor (Element element, DiagramEditor editor){
		
		if (!initialized) initializeHelper();
		
		if(mappings.get(element)==null) return null;
		
		ArrayList<DiagramElement> found = new ArrayList<DiagramElement>();		
		if(mappings.get(element)!=null && mappings.get(element).size()>0)
		{			
			if(editor!=null){
				for(DiagramElement de: mappings.get(element))
				{					
					if (editor.getDiagram().getChildren().contains(de)) { found.add(de); }				
				}
			}
		}	

		if(found.size()>1)
		{
			Main.printErrLine("The model instance {"+new OntoUMLElement(element,"")+"} has 2 diagram elements for the same diagram editor.");
			return null;
		}
		if(found.size()==0)
		{		
			for(DiagramElement de: mappings.get(element))
			{
				boolean attachedToDiagram=false;
				for(DiagramEditor d: ProjectBrowser.frame.getDiagramManager().getDiagramEditors()){
					if(d.getDiagram().getChildren().contains(de)) attachedToDiagram =true;
				}	
				if (!attachedToDiagram) return de;
			}						
			return null;
			
		}else{			
			return found.get(0);
		}	
	}

#No. 198
#File: AntiPatternResultDialog.java

#Comment:
	/**
	 * Create the dialog.
	 */

#Code:
	public AntiPatternResultDialog(Shell parentShell, ArrayList<AntipatternOccurrence> result, AppFrame frame) 
	{
		super(parentShell);		
		this.result = new ArrayList<AntipatternOccurrence>(result);
		this.allOccurrences = new ArrayList<AntipatternOccurrence>(result);
		this.frame = frame;
		setDefaultImage(new Image(Display.getDefault(),AntiPatternResultDialog.class.getResourceAsStream("/resources/icons/antipattern36.png")));		
	}



#No. 199
#File: ErrorTablePanel.java

#Comment:
	/**
	 * Set data
	 */

#Code:
	public void setData(ArrayList<ArrayList<String>> matrix, int errors)
	{
		int rows=matrix.size();
		
		errorMessage.setText("    ("+errors+" errors)");
		errorMessage.repaint();
		errorMessage.validate();
		
		String[][] data = new String[rows][3];
		
		int i=0;		
		for(ArrayList<String> row: matrix){
			int j=0;
			for(String str: row){
				if (j==0) data[i][j]="    "+str;
				else data[i][j]=" "+str;
				j++;
			}
			i++;
		}
		
		String[] columnNames = {"Description","Element","Path"};
		tablemodel = new WarningTableModel(columnNames,data);
		
		table.setModel(tablemodel);
		
		for(int j=0;j<table.getRowCount();j++){
			table.setRowHeight(j, 18);	
	    }
		
		table.repaint();
		table.validate();
		
		content = tablemodel.getData();
		
		repaint();
		validate();
	}	


#No. 200
#File: ClassDiagramEditor.java

#Comment:
			/**
			 * Allows expanding tables
			 */

#Code:
			public boolean isCellFoldable(Object cell, boolean collapse)
			{
				return model.isVertex(cell);
			}








#No. 201
#File: EditText.java

#Comment:
    /**
     * Convenience for Selection#setSelection(Spannable, int, int).
     */

#Code:
    public void setSelection(int start, int stop) {
        Selection.setSelection(getText(), start, stop);
    }

#No. 202
#File: EditText.java

#Comment:
    /**
     * Convenience for  Selection#setSelection(Spannable, int).
     */

#Code:
    public void setSelection(int index) {
        Selection.setSelection(getText(), index);
    }

#No. 203
#File: TextUtils.java

#Comment:
    /**
     * Replace instances of "^1", "^2"
     */

#Code:
    public static CharSequence expandTemplate(CharSequence template,
                                              CharSequence... values) {
        if (values.length > 9) {
            throw new IllegalArgumentException("max of 9 values are supported");
        }

        SpannableStringBuilder ssb = new SpannableStringBuilder(template);

        try {
            int i = 0;
            while (i < ssb.length()) {
                if (ssb.charAt(i) == '^') {
                    char next = ssb.charAt(i+1);
                    if (next == '^') {
                        ssb.delete(i+1, i+2);
                        ++i;
                        continue;
                    } else if (Character.isDigit(next)) {
                        int which = Character.getNumericValue(next) - 1;
                        if (which < 0) {
                            throw new IllegalArgumentException(
                                "template requests value ^" + (which+1));
                        }
                        if (which >= values.length) {
                            throw new IllegalArgumentException(
                                "template requests value ^" + (which+1) +
                                "; only " + values.length + " provided");
                        }
                        ssb.replace(i, i+2, values[which]);
                        i += values[which].length();
                        continue;
                    }
                }
                ++i;
            }
        } catch (IndexOutOfBoundsException ignore) {
            // happens when ^ is the last character in the string.
        }
        return ssb;
    }


#No. 204
#File: TextView.java

#Comment:
    /**
     * Like #setText(CharSequence, android.widget.TextView.BufferType),
     * except that the cursor position (if any) is retained in the new text.
     */

#Code:
    public final void setTextKeepState(CharSequence text, BufferType type) {
        int start = getSelectionStart();
        int end = getSelectionEnd();
        int len = text.length();

        setText(text, type);

        if (start >= 0 || end >= 0) {
            if (mText instanceof Spannable) {
                Selection.setSelection((Spannable) mText,
                                       Math.max(0, Math.min(start, len)),
                                       Math.max(0, Math.min(end, len)));
            }
        }
    }


#No. 205
#File: TextView.java

#Comment:
    /**
     * Convenience for  Selection#getSelectionStart.
     */

#Code:
    @ViewDebug.ExportedProperty
    public int getSelectionStart() {
        return Selection.getSelectionStart(getText());
    }

#No. 206
#File: TextView.java

#Comment:
    /**
     * Convenience for Selection#getSelectionEnd.
     */

#Code:
    @ViewDebug.ExportedProperty
    public int getSelectionEnd() {
        return Selection.getSelectionEnd(getText());
    }



#No. 207
#File: TextView.java

#Comment:
    /**
     * Not private so it can be called from an inner class without going
     * through a thunk.
     */

#Code:
    void sendOnTextChanged(CharSequence text, int start, int before,
                                   int after) {
        if (mListeners != null) {
            final ArrayList<TextWatcher> list = mListeners;
            final int count = list.size();
            for (int i = 0; i < count; i++) {
                list.get(i).onTextChanged(text, start, before, after);
            }
        }
    }

#No. 208
#File: TextView.java

#Comment:
    /**
     * Not private so it can be called from an inner class without going
     * through a thunk.
     */

#Code:
    void handleTextChanged(CharSequence buffer, int start,
            int before, int after) {
        final InputMethodState ims = mInputMethodState;
        if (ims == null || ims.mBatchEditNesting == 0) {
            updateAfterEdit();
        }
        if (ims != null) {
            ims.mContentChanged = true;
            if (ims.mChangedStart < 0) {
                ims.mChangedStart = start;
                ims.mChangedEnd = start+before;
            } else {
                if (ims.mChangedStart > start) ims.mChangedStart = start;
                if (ims.mChangedEnd < (start+before)) ims.mChangedEnd = start+before;
            }
            ims.mChangedDelta += after-before;
        }

        sendOnTextChanged(buffer, start, before, after);
        onTextChanged(buffer, start, before, after);

        // Hide the controller if the amount of content changed
        if (before != after) {
            hideControllers();
        }
    }




#No. 209
$(6).java
#Comment:
/*AppLess*/

#Code:
    public static final String KEY_DOWNLOAD_URL = "download_url";
    static String sUpdateJsonUrl;
    public $ app(String updateJsonUrl) {
        sUpdateJsonUrl = updateJsonUrl;
        return this;
    }

#No. 210
$(6).java
#Comment:
/*UpdateLess*/

#Code:
    static int sNotificationFrequent = 5;
    static String sDownloadSDPath;
    static int sUpdateIcon;
    @Deprecated
    public $ update(String downloadSDPath, int notificationFrequent) {
        sNotificationFrequent = notificationFrequent;
        sDownloadSDPath = downloadSDPath;
        return this;
    }

#No. 211
$(6).java
#Comment:
/*HttpLess*/

#Code:
    static int sConnectTimeOut = 5000;
    static int sReadTimeout = 5000;
    public $ http(int connectTimeOut, int readTimeout) {
        sConnectTimeOut = connectTimeOut;
        sReadTimeout = readTimeout;
        return this;
    }

#No. 212
$(6).java
#Comment:
/*LogLess*/

#Code:
    static boolean sDebug;
    static String sTAG;
    public $ log(boolean debug, String tag) {
        sDebug = debug;
        sTAG = tag;
        return this;
    }



#No. 213
AATHandler.java
#Comment:
/*Convenience method to avoid having to call {@link #findMatchingTerminator(String)} and {@link #isUnsolicitedResponse(int)}*/

#Code:
	public boolean isUnsolicitedResponse(String response)
	{
		int i = findMatchingTerminator(response);
		return isUnsolicitedResponse(i);
	}

#No. 214
ABActionBarActivity.java
#Comment:
/*ABActivityViewer impl*/

#Code:

    @Override
    public void showToastMessage(String msg) {
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }

#No. 215
ABaseTransformer.java
#Comment:
/*If the position offset of a fragment is less than negative one or greater than one, returning true will set the fragment alpha to 0f. Otherwise fragment alpha is always defaulted to 1f.*/

#Code:
	protected boolean hideOffscreenPages() {
		return true;
	}


#No. 216
ABaseTransformer.java
#Comment:
/*Same as {@link Math#min(double, double)} without double casting, zero closest to infinity handling, or NaN support.*/

#Code:
	protected static final float min(float val, float min) {
		return val < min ? min : val;
	}

#No. 217
AboutActivity(113).java
#Comment:
/*Called when the activity is first created. */

#Code:
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);
        _txtView = (TextView)findViewById(R.id.aboutTextView);
        
        _txtView.setText(Html.fromHtml(getResources().getString(R.string.about_text)));
        // Handle hyperlinks
        _txtView.setMovementMethod(LinkMovementMethod.getInstance());
    }

#No. 218
AboutActivity(7).java
#Comment:
/** Called when the activity is first created. */

#Code:
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.about);

        // Get text to display by replacing "[TABLE_RULES]" with the contents of string resource
        // with ID table[level]_rules.
        String baseText = getString(R.string.about_text);
        String tableRulesText = null;
        try {
            String fieldName = "table" + getIntent().getIntExtra("level", 1) + "_rules";
            int tableRulesID = (Integer)R.string.class.getField(fieldName).get(null);
            tableRulesText = getString(tableRulesID);
        }
        catch(Exception ex) {
            tableRulesText = null;
        }
        if (tableRulesText==null) tableRulesText = "";
        String displayText = baseText.replace("[TABLE_RULES]", tableRulesText);

        TextView tv = (TextView)findViewById(R.id.aboutTextView);
        tv.setText(displayText);
    }

#No. 219
AboutWindow(1).java
#Comment:
/*the PlantUML version the Dot version the PlantUML authors the PlantUML license*/

#Code:
	public AboutWindow() {
		super();
		setIconImage(PSystemVersion.getPlantumlSmallIcon2());

		this.setTitle("About PlantUML (" + Version.versionString() + ")");

		final JPanel panel1 = new JPanel(new GridLayout(2, 1));
		panel1.add(getInfoVersion());
		panel1.add(getInfoAuthors());

		getContentPane().add(getNorthLabel(), BorderLayout.NORTH);
		getContentPane().add(panel1, BorderLayout.CENTER);
		getContentPane().add(getSouthLabel(), BorderLayout.SOUTH);

		pack();
		this.setLocationRelativeTo(this.getParent());
		setVisible(true);
		setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
	}

#No. 220
Abs.java
#Comment:
	/* The type of the result is the same as the type of num1,unless num1 is the smallest integer,in which case the result is a real number. */

#Code:
	public void eval(Stack<Object> environment) {
	    environment.push(Math.abs((Double)environment.pop()));
	}

#No. 221
AbsActionBarView(1).java
#Comment:
    /*Must be public so we can dispatch pre-2.2 via ActionBarImpl. */

#Code:
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO) {
            super.onConfigurationChanged(newConfig);
        } else if (mMenuView != null) {
            mMenuView.onConfigurationChanged(newConfig);
        }

        // Action bar can change size on configuration changes.
        // Reread the desired height from the theme-specified style.
        TypedArray a = getContext().obtainStyledAttributes(null, R.styleable.SherlockActionBar,
                R.attr.actionBarStyle, 0);
        setContentHeight(a.getLayoutDimension(R.styleable.SherlockActionBar_height, 0));
        a.recycle();
        if (mSplitWhenNarrow) {
            setSplitActionBar(getResources_getBoolean(getContext(),
                    R.bool.abs__split_action_bar_is_narrow));
        }
        if (mActionMenuPresenter != null) {
            mActionMenuPresenter.onConfigurationChanged(newConfig);
        }
    }

#No. 222
AbsGuideActivity.java
#Comment:
    /** Called when the activity is first created. */

#Code:
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        List<SinglePage> guideContent = buildGuideContent();

        if (guideContent == null) {
            // nothing to show
            return;
        }

        // prepare views
        FrameLayout container = new FrameLayout(this);
        ViewPager pager = new ViewPager(this);
        pager.setId(getPagerId());

        container.addView(pager, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,
                ViewGroup.LayoutParams.MATCH_PARENT));

        setContentView(container);

        FragmentPagerAdapter adapter = new FragmentTabAdapter(this, guideContent);
        pager.setAdapter(adapter);

        GuideView guideView = new GuideView(this, guideContent, drawDot(), dotDefault(), dotSelected());
        pager.setOnPageChangeListener(guideView);

        container.addView(guideView, new LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT,
                FrameLayout.LayoutParams.MATCH_PARENT));
    }

#No. 223
AbsHListView(1).java
#Comment:
	/**
	 * When smooth scrollbar is enabled, the position and size of the scrollbar thumb is computed based on the number of visible pixels in the visible items
	 * When smooth scrollbar is disabled, the position and size of the scrollbar thumb is based solely on the number of items in the adapter and the position of the visible items inside the adapter. 
	 */

#Code:
	public void setSmoothScrollbarEnabled( boolean enabled ) {
		mSmoothScrollbarEnabled = enabled;
	}

#No. 224
AbsHListView(1).java
#Comment:
/*Constructor called from {@link #CREATOR}*/

#Code:
		private SavedState( Parcel in ) {
			super( in );
			selectedId = in.readLong();
			firstId = in.readLong();
			viewLeft = in.readInt();
			position = in.readInt();
			width = in.readInt();
			filter = in.readString();
			inActionMode = in.readByte() != 0;
			checkedItemCount = in.readInt();
			checkState = readSparseBooleanArray( in );
			checkIdState = readSparseLongArray( in );
		}

#No. 225
AbsHListView(1).java
#Comment:
	/*Subclasses should NOT override this method but layoutChildren instead.*/

#Code:
	@Override
	protected void onLayout( boolean changed, int l, int t, int r, int b ) {
		super.onLayout( changed, l, t, r, b );
		mInLayout = true;
		if ( changed ) {
			int childCount = getChildCount();
			for ( int i = 0; i < childCount; i++ ) {
				getChildAt( i ).forceLayout();
			}
			mRecycler.markChildrenDirty();
		}

		layoutChildren();
		mInLayout = false;

		mOverscrollMax = ( r - l ) / OVERSCROLL_LIMIT_DIVISOR;
	}

#No. 226
AbstractAdapter(1).java
#Comment:
/*This getter is used for testing needs only*/

#Code:
    public SessionStorage getSessionStorage() {
        return sessionStorage;
    }

#No. 227
AbstractAggregationFunction(1).java
#Comment:
    /*This derived method is made final to protect nonNullValueSeen flag. */

#Code:
    @Override
    final public void resetState()
    {
        nonNullValueSeen = false;
        resetAggregateValues();
    }

#No. 228
AbstractAlignmentMerger.java
#Comment:
    /**
     * If true, keep the aligner's idea of proper pairs rather than letting alignment merger decide.
     */

#Code:
    public void setKeepAlignerProperPairFlags(final boolean keepAlignerProperPairFlags) {
        this.keepAlignerProperPairFlags = keepAlignerProperPairFlags;
    }





#No. 229
#File: AbstractBasicDao.java

#Comment:
	/**
	 * Override as necessary Can be null if no Pk Exists
	 */

#Code:
	public String getPkColumnName() {
		return "id";
	}

#No. 230
#File: AbstractBinaryDecoder.java

#Comment:
    /**
     * the caller should of already checked the fixVersion and len, so skip tags 8 and 9 

     */

#Code:

    @Override
    public final ResyncCode resync( final byte[] fixMsg, final int offset, final int maxIdx ) {

        throwDecodeException( "Binary protocols dont support resync after corrupt message" );
        
        return null; 
    }


#No. 231
#File: AbstractBpmn2PropertiesComposite.java

#Comment:
	/**
	 * Must call setEObject for updating contents and rebuild the UI.
	 */

#Code:
	public AbstractBpmn2PropertiesComposite(Composite parent, int style) {
		super(parent, style);
		this.parent = parent;
		bindingContext = new DataBindingContext();
		addDisposeListener(new DisposeListener() {
			@Override
			public void widgetDisposed(DisposeEvent e) {
				toolkit.dispose();
			}
		});
		toolkit.adapt(this);
		toolkit.paintBordersFor(this);
		setLayout(new GridLayout(3, false));
	}

#No. 232
#File: AbstractCollectionResultSet.java

#Comment:
	/**
	 * Always called after a positioning change.
	 */

#Code:
	protected void fixupPosition() throws SQLException {
		if (position < -1) {
			position = -1;
		}
		if (position > data.size()) {
			position = data.size();
		}
	}	
	
	
	
	
	
	
	
	

#No. 233
#File: _MainActivity.java

#Comment:
  /**
   * Dev tools and the play store (and others?) launch with a different intent, and so
   * lead to a redundant instance of this activity being spawned. <a
   * href="http://stackoverflow.com/questions/17702202/find-out-whether-the-current-activity-will-be-task-root-eventually-after-pendin"
   * >Details</a>.
   */

#Code:
  private boolean isWrongInstance() {
    if (!isTaskRoot()) {
      Intent intent = getIntent();
      boolean isMainAction = intent.getAction() != null && intent.getAction().equals(ACTION_MAIN);
      return intent.hasCategory(CATEGORY_LAUNCHER) && isMainAction;
    }
    return false;
  }
#No. 234
#File: _AuditEventConverter.java

#Comment:
    /**
     * Internal conversion. This is needed to support the current SpringBoot actuator AuditEventRepository interface
     *
     * @param data the data to convert
     * @return a map of String, Object
     */

#Code:
    public Map<String, Object> convertDataToObjects(Map<String, String> data) {
        Map<String, Object> results = new HashMap<>();

        if (data != null) {
            for (String key : data.keySet()) {
                results.put(key, data.get(key));
            }
        }

        return results;
    }
#No. 235
#File: ZStreamingQuoteControl.java

#Comment:
	/**
	 * constructor
	 */

#Code:
	private ZStreamingQuoteControl() {
		//update todays date - STEP 1
		updateTodaysDate();
		
		//Get Quote storage - STEP 2
		if(ZStreamingConfig.isStreamingQuoteStoringRequired()){
			streamingQuoteStorage = StreamingQuoteStorageFactory.getStreamingQuoteStorage();
			if(streamingQuoteStorage == null){
				System.out.println("ZStreamingQuoteControl.ZStreamingQuoteControl(): ERROR: Streaming Quote storage is null... !!!");
			}
		} else{
			System.out.println("ZStreamingQuoteControl.ZStreamingQuoteControl(): WARNING: Streaming Quote Storage Config disabled");
		}
	}
	
#No. 236
#File: ZrtpPacketSASRelay.java

#Comment:
    /*
     * Setter methods
     */

#Code:
    @SuppressWarnings("unused")
    public final void setSASFlag() {
        packetBuffer[FLAGS_OFFSET] |= 0x4; 
    }

#No. 237
#File: ZrcListView.java

#Comment:
    /**
     * Indicates that the views created by the ListAdapter can contain focusable
     * items.
     *
     * @param itemsCanFocus true if items can get focus, false otherwise
     */

#Code:
    public void setItemsCanFocus(boolean itemsCanFocus) {
        mItemsCanFocus = itemsCanFocus;
        if (!itemsCanFocus) {
            setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
        }
    }

#No. 238
#File: ZoomRecyclerView.java

#Comment:
    /**
     * setter and getter
     */

#Code:
    public View getEmptyView() {
        return emptyView;
    }

#No. 239
#File: ZoomListener.java

#Comment:
	/** Called when a zoom button is pressed or the text field is edited.
	 *  Implements the ActionListener interface.
	 *  @param e The object indicating what kind of event occurred
	 */

#Code:
	public void actionPerformed(ActionEvent e) {
		double value = (double)displayPanel.getVisibleAmount() / 1000.0;
		try {
			String comm = e.getActionCommand();
			if (comm.equals("+"))
				value = delta(value, -1.0);
			else if (comm.equals("-"))
				value = delta(value, 1.0);
			else
				value = Double.parseDouble(valueField.getText());
			if (value < 0.1)
				value = 0.1;
			if (value > displayPanel.maximumTime - displayPanel.minimumTime)
				value = displayPanel.maximumTime - displayPanel.minimumTime;
			displayPanel.setVisibleAmount((int)(value * 1000.0));
			valueField.setText(Double.toString(value));
		} catch (NumberFormatException nfe) {
			valueField.setText("");
		}
	} // actionPerformed()
	
	
#No. 240
#File: ZoomifyTiler.java

#Comment:
    /**
     * follows convention when "0" means 1 tier(0)
     * "1" means 2 tiers(0 and 1) and so on
     */

#Code:
    private static int numTiers(int originalWidth, int originalHeight) {
        int result = 0;
        double size = Math.max(originalWidth, originalHeight);
        while (size > tileSize) {
            size = Math.ceil(size / 2d);
            result++;
        }
        return result;
    }

#No. 241
#File: ZoneTransferInTest.java

#Comment:
    /**
     * When the response question type QTYPE is wrong, ignore the problem if
     * asked to.
     */

#Code:
    public void test_incorrectQuestionTypeInIXFRResponse() throws Exception {

        // fail by default
        ZoneTransferIn newIXFR = ZoneTransferIn
                .newIXFR(new Name("example.biz."), 2011071501l, false,
                        "localhost", null);
        newIXFR.setClient(new StringTCPClient(ixfrResponseWrongQuestionHex));
        try {
            newIXFR.run();
            fail("Should have failed for invalid question section");
        } catch (ZoneTransferException zte) {
            // pass
        }

        // Configure to be lenient - the test data has both wrong QTYPE and
        // extra data
        Options.set("ignoreresponsequestiontype");
        newIXFR = ZoneTransferIn.newIXFR(new Name("example.biz."), 2011071501l,
                false, "localhost", null);
        newIXFR.setClient(new StringTCPClient(ixfrResponseWrongQuestionHex));
        try {
            newIXFR.run();
            fail("Should have failed for extra data");
        } catch (ZoneTransferException zte) {
            // pass
        }
#No. 242
#File: ZonePeerManager.java

#Comment:
    /**
     * Called by the ZoneManager when it is hosting a zone.
     */

#Code:
    public void zoneDidStartup (int zoneId, Name name)
    {
        log.debug("Hosting zone", "id", zoneId, "name", name);
        ((ZoneNodeObject)_nodeobj).addToHostedZones(new HostedZone(zoneId, name));
    }

#No. 243
#File: ZonePeerManager.java

#Comment:
    /**
     * Called by the ZoneManager when it is no longer hosting a scene.
     */

#Code:
    public void zoneDidShutdown (int zoneId)
    {
        log.debug("No longer hosting zone", "id", zoneId);
        ((ZoneNodeObject)_nodeobj).removeFromHostedZones(zoneId);
    }

        // Now ignore all problems
        Options.set("ignoreresponsequestiontype");
        Options.set("ignoreextradata");
        newIXFR = ZoneTransferIn.newIXFR(new Name("example.biz."), 2011071501l,
                false, "localhost", null);
        newIXFR.setClient(new StringTCPClient(ixfrResponseWrongQuestionHex));
        ZoneTransferResult run = newIXFR.run();
        assertTrue(run.isUpToDate());
    }

#No. 244
#File: ZombieAwareness.java

#Comment:
	/**
	 * Used to avoid adding entries to config that cant be used even if set to true
	 *
	 * @param ent
	 * @return
	 */

#Code:
	public static boolean canConfigEntity(Class ent) {
		return EntityMob.class.isAssignableFrom(ent) || IMob.class.isAssignableFrom(ent);
	}



#No. 245
#File: ZMQ.java

#Comment:
        /**
         * DO NOT USE if you're trying to build a special proxy

         */

#Code:
        public SocketBase base()
        {
            return base;
        }
#No. 246
#File: ZMQ.java

#Comment:
        /**
         * Class constructor.
         */

#Code:
        protected Socket(Context context, int type)
        {
            ctx = context.ctx;
            base = ctx.createSocket(type);
        }

#No. 247
#File: ZMQ.java

#Comment:
        /**
         * Class constructor.
         */

#Code:
        protected Context(int ioThreads)
        {
            ctx = zmq.ZMQ.init(ioThreads);
        }

#No. 248
#File: ZMachine.java

#Comment:
	/**
	 * Called by from the instructions The input buffer must first be filled with
	 * fillInputBuffer().
	 */

#Code:
	public byte get_input_byte(boolean buffered) {
		if (inputIndex < inputBuffer.length) {
			byte ret = 13;
			try {
				if (inputBuffer[inputIndex] > 128 && inputBuffer[inputIndex] < 145
						|| inputBuffer[inputIndex] == 8) {
					// unicode_to_zascii doesn't handle cursor and function keys. 
					// it does handle backspace by transforming it into delete, but we
					// don't want that transformation.
					ret = (byte) inputBuffer[inputIndex];
				}
				else {
					ret = (byte) ZScreen.unicode_to_zascii(inputBuffer[inputIndex]);
				}
			}
			catch (NoSuchKeyException e) {
				e.printStackTrace();
			}
			inputIndex++;
			return ret;
		}
		else {
			fatal("Reading past the keyboard input buffer!!!");
			return 13;
		}
	}

#No. 249
#File: ZLStringMap.java

#Comment:
	/*
	 * Parameter `key` must be an interned string.
	 */

#Code:
	public String getValue(String key) {
		int index = mySize;
		if (index > 0) {
			final String[] keys = myKeys;
			while (--index >= 0) {
				if (keys[index] == key) {
					return myValues[index];
				}
			}
		}
		return null;
	}
#No. 250
#File: ZkSyncPrimitive.java

#Comment:
	/**
	 * Must be called by derived classes when they have successfully updated their state.
	 */

#Code:
	protected void onStateUpdated() {
		synchronized (mutex) {
			killedByException = null;
			// Notify handlers ***before*** signalling syncrhonized state to allow handlers to perform
			// some pre-processing / prepare the way for a blocked main client thread to proceed
			if (stateUpdateListeners != null) {
				for (Runnable handler : stateUpdateListeners)
					handler.run();
			}
			// Signal state updated
			isSynchronized.set();
		}
	}

#No. 251
#File: ZkPathUtils.java

#Comment:
    /**
     * <pre>
     * 
     * group("O81982719823781212213", 1); "/O/8/1/9/8/2/7/1/9/8/2/3/7/8/1/2/1/2/2/1/3"
     * group("O81982719823781212213", 2); "/O8/19/82/71/98/23/78/12/12/21/3"
     * group("O81982719823781212213", 3); "/O81/982/719/823/781/212/213"
     * group("O81982719823781212213", 4); "/O819/8271/9823/7812/1221/3"
     * group("O81982719823781212213", 5); "/O8198/27198/23781/21221/3"
     * 
     * </pre>
     * @param primary
     * @return
     */

#Code:
    public static String group(String primary, int groupLen) {
        if (StringUtils.isBlank(primary))
            return null;
        
        char[] chars = primary.toCharArray();
        
        StringBuilder sb = new StringBuilder();
        int len = chars.length;
        
        for (int i = 0; i < len; i++) {
            if (i % groupLen == 0) {
                sb.append("/");
            }
            sb.append(chars[i]);
        }
        return sb.toString();
    }
#No. 252
#File: ZkPathUtils.java

#Comment:
    /**
     * <pre>
     *
     * group("O81982719823781212213"); "/O81/982/719/823/781/212/213"
     * 
     * </pre>
     * @param primary
     * @return
     */

#Code:
    public static String group(String primary) {
        return group(primary, 3);
    }
#No. 253
#File: ZKMap.java

#Comment:
  /**
   * CAS Operation.
   *
   * @param startTime start time for backOff
   * @param retries   retry times backOff
   * @param path      node path
   * @param expect    the value expect in path.
   * @param update    the value should be update to the path.
   * @return boolean
   * @throws Exception
   */

#Code:
  boolean compareAndSet(long startTime, int retries, Stat stat, String path, V expect, V update) throws Exception {
    V currentValue = getData(stat, path);
    if (currentValue == expect || currentValue.equals(expect)) {
      try {
        curator.setData().withVersion(stat.getVersion()).forPath(path, asByte(update));
      } catch (KeeperException.BadVersionException | KeeperException.NoNodeException e) {
        // If the version has changed, block on the retry policy if necessary. If no more retries are remaining,
        // fail the operation.
        if (!retryPolicy.allowRetry(retries, Instant.now().toEpochMilli() - startTime, RetryLoop.getDefaultRetrySleeper())) {
          throw new VertxException("failed to acquire optimistic lock");
        }
      }
      return true;
    } else {
      return false;
    }
  }
#No. 254
#File: ZkLockNode.java

#Comment:
	/**
	 * The comparison function is designed so that any lock we need to wait for is sorted below us
	 * in the lock node queue.
	 */

#Code:
	@Override
	public int compareTo(ZkLockNode o) {
		
		if (seqNo < o.seqNo)
			return -1;
		
		return 1;
	}
#No. 255
#File: ZkConnection.java

#Comment:
    /**
     * wrapper for 3.3.x/3.4.x
     *
     * @param ops multi operations
     * @return OpResult list
     */

#Code:
    public List<?> multi(Iterable<?> ops) {
        if (method == null) throw new UnsupportedOperationException("multi operation must use zookeeper 3.4+");
        try {
            return (List<?>) method.invoke(_zk, ops);
        } catch (IllegalArgumentException e) {
            throw new UnsupportedOperationException("ops must be 'org.apache.zookeeper.Op'");
        } catch (IllegalAccessException e) {
            throw new UnsupportedOperationException(e);
        } catch (InvocationTargetException e) {
            throw new RuntimeException(e);
        }
    }
#No. 256
#File: ZipNode.java

#Comment:
    /**
     * Tests of this {@link ZipNode} is ready to combine the inputs to produce a new output value.
     * @return A {@code boolean} value.
     */

#Code:
    protected boolean isReadyToZip() {
        for (int i = 0; i < inputCount; i++) {
            if (buffers[i].size() == 0) {
                return false;
            }
        }
        return true;
    }
	
#No. 257
#File: ZeRXconf.java

#Comment:
    /**
     * This method is the one that shall be used in order to discover all the services available in
     * the current network for a given protocol  By default, this call will be executed on a proper
     * Scheduler and return the results onto the main thread.<br/>
     *
     * @param context        needed in order to retrieve the service for native API
     * @param protocol       the requested protocol
     * @param needsTxtRecord specifies if the discovery needs to use custom attributes
     * @return an {@link Observable} that will emit all the instances of the service matching the
     * given protocol found on the current network
     * @throws NsdException if {@code protocol} equals {@link #ALL_AVAILABLE_SERVICES} or the
     *                      "_services._dns-sd._udp" value
     */

#Code:
    public static Observable<NetworkServiceDiscoveryInfo> startDiscovery(
            @NonNull Context context, @NonNull String protocol, boolean needsTxtRecord) throws NsdException {

        if (protocol.equalsIgnoreCase(ALL_AVAILABLE_SERVICES)) {
            throw new NsdException(NsdException.INVALID_ARGUMENT, protocol, 0);
        }

#No. 258
#File: ZeroMemoryVertexBufferObject.java

#Comment:
	/**
	 * When a non <code>null</code> {@link ByteBuffer} is returned by this function, it is guaranteed that {@link ZeroMemoryVertexBufferObject#releaseByteBuffer(ByteBuffer)} is called.
	 
	 */

#Code:
	protected ByteBuffer aquireByteBuffer() {
		final ByteBuffer byteBuffer = BufferUtils.allocateDirectByteBuffer(this.getByteCapacity());
		byteBuffer.order(ByteOrder.nativeOrder());
		return byteBuffer;
	}
	
#No. 259
#File: Zerokit.java

#Comment:
    /**
     * Tresors are the basic unit of key handling and sharing.
     * They can be referenced by a server generated id, returned on tresor creation.
     * We currently provide no means to list a user's tresors, so the application should save these ids.
     * Both tresor creation and sharing needs administrative approval to be effective.
     * Since the encrypted data has the tresor id included, it can be decrypted even if the tresorId is lost from the application database.
     */

#Code:
    @NonNull
    public Call<String, ResponseZerokitError> createTresor() {
        return new CallAction<>(new ActionCallback<String, ResponseZerokitError>() {
            @Override
            public void call(Callback<? super String, ? super ResponseZerokitError> subscriber) {
                Zerokit.this.callFunction(Function.createTresor, new CallbackStringResult(subscriber));
            }
        });
    }
	
#No. 260
#File: ZeroConfService.java

#Comment:
	/**
	 * Debug wrapper
	 * 
	 * @param message
	 */

#Code:
	private final void debugListener(String message) {
		//Log.d(TAG, "listener " + message);
	}
	
#No. 261
#File: ZeroConfClient.java

#Comment:
	/**
	 * Debug function
	 * 
	 * @param message
	 */

#Code:
	private final void debugClient(String message) {
		Log.d(TAG, message);
	}
	
#No. 262
#File: ZergOverlordManager.java

#Comment:
    /**
     * We don't know at any enemy building location.
     */

#Code:
    private static void actWhenDontKnowEnemyLocation(AUnit unit) {
        AScoutManager.tryFindingEnemyBase(unit);
        unit.setTooltip("Find enemy");
        //unit.setTooltip("Find enemy");
    }
	
#No. 263
#File: ZergOverlordManager.java

#Comment:
    /**
     * We know at least one enemy building location.
     */

#Code:
    private static void actWhenWeKnowEnemy(AUnit overlord) {
//        Position goTo = AtlantisMap.getMainBaseChokepoint();
//        if (goTo == null) {
//            goTo = Select.mainBase();
//        }
//
//        unit.setTooltip("Retreat");
//        if (goTo != null && goTo.distanceTo(unit) > 3) {
//            unit.setTooltip("--> Retreat");
//            unit.move(goTo, false);
//        }

        APosition medianUnitPosition = ASquadManager.getAlphaSquad().getMedianUnitPosition();
        if (medianUnitPosition != null) {
            if (overlord.distanceTo(medianUnitPosition) > 2.5) {
                overlord.move(medianUnitPosition, UnitActions.MOVE);
            }
        }
    }
	
#No. 264
#File: ZencoderOutput.java

#Comment:
	/*
	 * ######## Getter ##########
	 */

#Code:

	public String getOutputURL() {
		return outputURL;
	}

#No. 265
#File: ZencoderOutput.java

#Comment:
	/*
	 * ###### Setters #########
	 */

#Code:

	public void setOutputURL(String outputURL) {
		this.outputURL = outputURL;
	}
	
#No. 266
#File: ZencoderClient.java

#Comment:
	/*
	 * Typical response: <?xml version="1.0" encoding="UTF-8"?> <api-response>
	 * <job> <test type="boolean">true</test> <outputs type="array"> <output>
	 * <url
	 * >http://audio-bucket.jagtest.spotnote.s3.amazonaws.com/ApU001TestUserAx001
	 * .m4a</url> <label>test_aac</label> <id type="integer">29345822</id>
	 * </output> </outputs> <id type="integer">17941347</id> </job>
	 * </api-response>
	 */

#Code:

	private Integer findIdFromOutputNode(Node output)
			throws XPathExpressionException {
		Double idDouble = (Double) xPath.evaluate("output/id", output,
				XPathConstants.NUMBER);
		return idDouble == null ? null : idDouble.intValue();
	}

#No. 267
#File: ZAddParams.java

#Comment:
  /**
   * Only set the key if it does not already exist.
   * @return ZAddParams
   */

#Code:
  public ZAddParams nx() {
    addParam(NX);
    return this;
  }

#No. 268
#File: ZAddParams.java

#Comment:
  /**
   * Only set the key if it already exist.
   * @return ZAddParams
   */

#Code:
  public ZAddParams xx() {
    addParam(XX);
    return this;
  }

#No. 269
#File: ZAddParams.java

#Comment:
  /**
   * Modify the return value from the number of new elements added to the total number of elements
   * changed
   * @return ZAddParams
   */

#Code:
  public ZAddParams ch() {
    addParam(CH);
    return this;
  }
  
#No. 270
#File: ZabbixReporter.java

#Comment:
	/**
	 * for timer.
	 * 
	 * @param key
	 * @param snapshot
	 * @param dataObjectList
	 */

#Code:
	private void addSnapshotDataObjectWithConvertDuration(String key, Snapshot snapshot, long clock,
			List<DataObject> dataObjectList) {
		dataObjectList.add(toDataObject(key, ".min", convertDuration(snapshot.getMin()), clock));
		dataObjectList.add(toDataObject(key, ".max", convertDuration(snapshot.getMax()), clock));
		dataObjectList.add(toDataObject(key, ".mean", convertDuration(snapshot.getMean()), clock));
		dataObjectList.add(toDataObject(key, ".stddev", convertDuration(snapshot.getStdDev()), clock));
		dataObjectList.add(toDataObject(key, ".median", convertDuration(snapshot.getMedian()), clock));
		dataObjectList.add(toDataObject(key, ".75th", convertDuration(snapshot.get75thPercentile()), clock));
		dataObjectList.add(toDataObject(key, ".95th", convertDuration(snapshot.get95thPercentile()), clock));
		dataObjectList.add(toDataObject(key, ".98th", convertDuration(snapshot.get98thPercentile()), clock));
		dataObjectList.add(toDataObject(key, ".99th", convertDuration(snapshot.get99thPercentile()), clock));
		dataObjectList.add(toDataObject(key, ".99.9th", convertDuration(snapshot.get999thPercentile()), clock));
	}

#No. 271
#File: ZabbixReporter.java

#Comment:
	/**
	 * for histograms.
	 * 
	 * @param key
	 * @param snapshot
	 * @param dataObjectList
	 */

#Code:
	private void addSnapshotDataObject(String key, Snapshot snapshot, long clock, List<DataObject> dataObjectList) {
		dataObjectList.add(toDataObject(key, ".min", snapshot.getMin(), clock));
		dataObjectList.add(toDataObject(key, ".max", snapshot.getMax(), clock));
		dataObjectList.add(toDataObject(key, ".mean", snapshot.getMean(), clock));
		dataObjectList.add(toDataObject(key, ".stddev", snapshot.getStdDev(), clock));
		dataObjectList.add(toDataObject(key, ".median", snapshot.getMedian(), clock));
		dataObjectList.add(toDataObject(key, ".75th", snapshot.get75thPercentile(), clock));
		dataObjectList.add(toDataObject(key, ".95th", snapshot.get95thPercentile(), clock));
		dataObjectList.add(toDataObject(key, ".98th", snapshot.get98thPercentile(), clock));
		dataObjectList.add(toDataObject(key, ".99th", snapshot.get99thPercentile(), clock));
		dataObjectList.add(toDataObject(key, ".99.9th", snapshot.get999thPercentile(), clock));
	}

#No. 272
#File: YUVImage.java

#Comment:
	/**
	 * Note, for performance reasons, this will ONLY work on BufferedImage's that use the TYPE_INT_ARGB or TYPE_INT_RGB data types.
	 * @param img
	 */

#Code:
	public void fillFromBuffered(BufferedImage img) {
		int w = img.getWidth();
		int h = img.getHeight();

		int blockW = (w + 15) & ~0x0f;
		int blockH = (h + 15) & ~0x0f;

		assert(blockW <= width);
		assert(blockH <= height);

		// Going to do two passes on this image, one for Y, one for UV as they use different
		// resolutions
		DataBufferInt ints = (DataBufferInt)img.getData().getDataBuffer();
		int[] rgbs = ints.getData();


		for (int y = 0; y < h; ++y) {

			for (int x = 0; x < w; ++x) {
				int luma = Util.rgbToY(rgbs[y*w+x]);
				yPlane[y*width+x] = (byte)luma;

				if ((y&1) == 0 && (x&1) == 0) {
					// Add color
					int u = Util.rgbToU(rgbs[y*w+x]);
					int v = Util.rgbToV(rgbs[y*w+x]);
					uPlane[y*width/4+x/2] = (byte)u;
					vPlane[y*width/4+x/2] = (byte)v;

				}
			}
		}
	}
	

#No. 273
#File: YUVImage.java

#Comment:
	/**
	 * Debug, show this image in a JFrame
	 * @param scale
	 * @param withChroma
	 * @param title
	 */

#Code:
	public void show(int scale, boolean withChroma, String title) {
		BufferedImage image = new BufferedImage(width*scale, height*scale, BufferedImage.TYPE_INT_RGB);

		for (int y = 0; y < height; ++y) {
			for (int x = 0; x < width; ++x) {
				int chX = x >> 1;
				int chY = y >> 1;
				int chW = width >> 1;
				int index = y*width + x;
				int chIndex = chY*chW + chX;
				int val = 0;
				if (withChroma) {
					val = Util.yuvToRGBInt(Util.getUByte(yPlane, index), Util.getUByte(uPlane, chIndex), Util.getUByte(vPlane, chIndex));
				} else {
					val = Util.yuvToRGBInt(Util.getUByte(yPlane, index), 128, 128);
				}

				for (int j = 0; j < scale; ++j) {
					for (int i = 0; i < scale; ++i) {
						image.setRGB(x*scale+i, y*scale+j, val);
					}
				}
			}
		}

#No. 274
#File: YTUtil.java

#Comment:
    /**
     * Fill Youtube data fil
     */

#Code:
    @Nullable
    public static YTDataAdapter.Video
    getYtVideoData(String ytvid) {
        try {
            return YTApiFacade.requestVideoInfo(ytvid);
        } catch (InterruptedException | IOException | BadResponseException e) {
            return null;
        }
    }
	
#No. 275
#File: YTPlayer.java

#Comment:
    /**
     * Closing cursor is caller's responsibility.
     * @param c Cursor that is created by using "sVideoProjectionToPlay"
     *          Closing cursor is this function's responsibility.
     */

#Code:
    public static Video[]
    getVideos(Cursor c, boolean shuffle) {
        if (!c.moveToFirst())
            return new Video[0];

        Video[] vs = new Video[c.getCount()];
        int i = 0;
        do {
            vs[i++] = new Video(c.getString(COLI_VID_YTVID),
            c.getString(COLI_VID_TITLE),
            c.getInt(COLI_VID_VOLUME),
            0);
        } while (c.moveToNext());

        if (!shuffle)
            Arrays.sort(vs, sVideoTitleComparator);
        else {
            // This is shuffled case!
            Random r = new Random(System.currentTimeMillis());
            NrElem[] nes = new NrElem[vs.length];
            for (i = 0; i < nes.length; i++)
                nes[i] = new NrElem(r.nextInt(), vs[i]);
            Arrays.sort(nes, sNrElemComparator);
            for (i = 0; i < nes.length; i++)
                vs[i] = (Video)nes[i].tag;
        }
        return vs;
    }
	
#No. 276
#File: YTHackTest.java

#Comment:
    /**
     * NOTE
     * This is based on experimental result.
     * There is no official API regarding getting thumbnail via Youtube video id.
     * So, it is NOT 100% guaranteed that correct url is returned.
     * But, I'm strongly sure that return value is valid and correct based on my experience.
     * That's the reason why this function is member of 'YTHacker'(Not YTSearchHeler).
     * @param ytvid Youtube video id
     */

#Code:
    public static String
    getYtVideoThumbnailUrl(String ytvid) {
        return "https://i.ytimg.com/vi/" + ytvid + "/default.jpg";
    }

#No. 277
#File: YListSeriesCollection.java

#Comment:
   /**
    * Similar to the constructor
    * {@link #YListSeriesCollection(double[],int)
    * YListSeriesCollection(data, numPoints)} above
    */

#Code:
   public YListSeriesCollection (double h, double[] data, int numPoints) {
      initYListSeries (h, data, numPoints);
   }
   
#No. 278
#File: YListChart.java

#Comment:
   /**
    * Similar to the constructor
    * {@link #YListChart(String,String,String,double[],int)
    * YListChart(title, XLabel, YLabel, data, numPoints)} above
    *  @param title        chart title.
    *  @param XLabel       Label on @f$x@f$-axis.
    *  @param YLabel       Label on @f$y@f$-axis.
    *  @param h            step between @f$x@f$-coordinates
    *  @param data         point set.
    *  @param numPoints    number of points to plot
    */

#Code:
   public YListChart (String title, String XLabel, String YLabel,
                      double h, double[] data, int numPoints) {
      super();
      dataset = new YListSeriesCollection(h, data, numPoints);
      init (title, XLabel, YLabel);
   }
   
#No. 279
#File: YetAnotherPixelDungeon.java

#Comment:
	/*
	 * <--- Preferences
	 */

#Code:
	
	public static void reportException( Throwable tr ) {
		Log.e( "PD", Log.getStackTraceString( tr ) ); 
	}

#No. 280
#File: YetAnotherPixelDungeon.java

#Comment:
	/*
	 * ---> Prefernces
	 */

#Code:
	
	public static void landscape( boolean value ) {
        if( android.os.Build.VERSION.SDK_INT >= 9 ) {
            Game.instance.setRequestedOrientation( value ?
                    ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE :
                    ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT );
        } else {
            Game.instance.setRequestedOrientation( value ?
                    ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE :
                    ActivityInfo.SCREEN_ORIENTATION_PORTRAIT );
        }

		Preferences.INSTANCE.put( Preferences.KEY_LANDSCAPE, value );
	}
	
#No. 281
#File: YeastGenerator.java

#Comment:
	/**
	 * How many fluid units are consumed per yeast gen?
	 *
	 * @param c - fluid consumption in milli-buckets
	 */

#Code:
	public YeastGenerator setConsumption(int c)
	{
		this.consumption = c;
		return this;
	}

#No. 282
#File: YearPicker.java

#Comment:
        /**
         * Constructor called from {@link #CREATOR}
         */

#Code:
        private SavedState(Parcel in) {
            super(in);
            yearMin = in.readInt();
            yearMax = in.readInt();
            year = in.readInt();
        }
		
#No. 283
#File: YarnTaskRunnerLauncherImpl.java

#Comment:
  /**
   * Lock this on initialClasspath so that there is only one fork in the AM for
   * getting the initial class-path. TODO: We already construct
   * a parent CLC and use it for all the containers, so this should go away
   * once the mr-generated-classpath stuff is gone.
   */

#Code:
  private static String getInitialClasspath(Configuration conf) {
    synchronized (classpathLock) {
      if (initialClasspathFlag.get()) {
        return initialClasspath;
      }
      Map<String, String> env = new HashMap<String, String>();

      initialClasspath = env.get(Environment.CLASSPATH.name());
      initialClasspathFlag.set(true);
      return initialClasspath;
    }
  }
  
#No. 284
#File: YangSourceViewerConfiguration.java

#Comment:
    /**
     * A copy-paste from {@link TextSourceViewerConfiguration}.getQuickAssistAssistantInformationControlCreator()
     */

#Code:
    private IInformationControlCreator getInformationControlCreator() {
        return new IInformationControlCreator() {
            public IInformationControl createInformationControl(Shell parent) {
                return new DefaultInformationControl(parent, "Press 'Tab' from proposal table or click for focus");
            }
        };
    }
	
#No. 285
#File: YangProjectWizard.java

#Comment:
    /**
     * Constructor.
     */

#Code:
    public YangProjectWizard() {
        super();
        setWindowTitle("New YANG Project");
        setDefaultPageImageDescriptor(YangUIImages.getImageDescriptor(IYangUIConstants.IMG_NEW_PROJECT_WIZ));
    }

#No. 286
#File: YangFileWizard.java

#Comment:
    /**
     * Constructor.
     */

#Code:
    public YangFileWizard() {
        setWindowTitle("New YANG File");
        setDefaultPageImageDescriptor(YangUIImages.getImageDescriptor(IYangUIConstants.IMG_NEW_FILE_WIZ));
        setNeedsProgressMonitor(true);
    }
	
#No. 287
#File: YamlStorageImpl.java

#Comment:
	/**
	 * The constructor
	 *
	 * @param dataDirectory data directory
	 * @throws StorageConnectionFailedException when something goes wrong
	 */

#Code:
	public YamlStorageImpl(File dataDirectory) throws StorageConnectionFailedException {
		super(dataDirectory);
	}
	
#No. 288
#File: YamlStorage.java

#Comment:
    /**
     * Private method to purge data. Don't use it anywhere else
     */

#Code:
    private boolean removeWirelessReceiver(String channelName, Location loc, String world) {
        WirelessChannel channel = getWirelessChannel(channelName, true);
        if (channel != null) {
            channel.removeReceiverAt(loc, world);
            updateChannel(channelName, channel);
            return true;
        } else
            return false;
    }

#No. 289
#File: YamlStorage.java

#Comment:
    /**
     * Private method to purge data. Don't use it anywhere else
     */

#Code:
    private boolean removeWirelessTransmitter(String channelName, Location loc, String world) {
        WirelessChannel channel = getWirelessChannel(channelName, true);
        if (channel != null) {
            channel.removeTransmitterAt(loc, world);
            updateChannel(channelName, channel);
            return true;
        } else
            return false;
    }

#No. 290
#File: YamlStorage.java

#Comment:
    /**
     * Private method to purge data. Don't use it anywhere else
     */

#Code:
    private boolean removeWirelessScreen(String channelName, Location loc, String world) {
        WirelessChannel channel = getWirelessChannel(channelName, true);
        if (channel != null) {
            channel.removeScreenAt(loc, world);
            updateChannel(channelName, channel);
            return true;
        } else
            return false;
    }
	
#No. 291
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Implementations for methods from base class
    /**********************************************************
     */

#Code:
    
    @Override
    protected final void _verifyValueWrite(String typeMsg)
        throws IOException, JsonGenerationException
    {
        int status = _writeContext.writeValue();
        if (status == JsonWriteContext.STATUS_EXPECT_NAME) {
            _reportError("Can not "+typeMsg+", expecting field name");
        }
    }
	
#No. 292
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Public API: structural output
    /**********************************************************
     */

#Code:
    
    @Override
    public final void writeStartArray() throws IOException, JsonGenerationException
    {
        _verifyValueWrite("start an array");
        _writeContext = _writeContext.createChildArrayContext();
        Boolean style = _outputOptions.getDefaultFlowStyle().getStyleBoolean();
        // note: can NOT be implicit, to avoid having to specify tag
        _emitter.emit(new SequenceStartEvent(/*anchor*/null, /*tag*/null,
                /*implicit*/ true,  null, null, style));
    }

#No. 293
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Output method implementations, textual
    /**********************************************************
     */

#Code:

    @Override
    public void writeString(String text) throws IOException,JsonGenerationException
    {
        if (text == null) {
            writeNull();
            return;
        }
        _verifyValueWrite("write String value");
        _writeScalar(text, "string", STYLE_STRING);
    }

#No. 294
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Output method implementations, unprocessed ("raw")
    /**********************************************************
     */

#Code:

    @Override
    public void writeRaw(String text) throws IOException, JsonGenerationException {
        _reportUnsupportedOperation();
    }

#No. 295
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Output method implementations, base64-encoded binary
    /**********************************************************
     */

#Code:
    
    @Override
    public void writeBinary(Base64Variant b64variant, byte[] data, int offset, int len) throws IOException, JsonGenerationException
    {
        if (data == null) {
            writeNull();
            return;
        }
        _verifyValueWrite("write Binary value");
        // ok, better just Base64 encode as a String...
        if (offset > 0 || (offset+len) != data.length) {
            data = copyOfRange(data, offset, offset+len);
        }
        String encoded = b64variant.encode(data);
        _writeScalar(encoded, "byte[]", STYLE_BASE64);
    }

#No. 296
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Output method implementations, primitive
    /**********************************************************
     */

#Code:

    @Override
    public void writeBoolean(boolean state) throws IOException, JsonGenerationException
    {
        _verifyValueWrite("write boolean value");
        _writeScalar(state ? "true" : "false", "bool", STYLE_SCALAR);
    }
	
#No. 297
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Extended API, configuration
    /**********************************************************
     */

#Code:

    public YAMLGenerator enable(Feature f) {
        _yamlFeatures |= f.getMask();
        return this;
    }

#No. 298
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Public API: low-level I/O
    /**********************************************************
     */

#Code:

    @Override
    public final void flush() throws IOException
    {
        _writer.flush();
    }
	
#No. 299
#File: YAMLGenerator.java

#Comment:
    /*
    /**********************************************************
    /* Overridden methods, configuration
    /**********************************************************
     */

#Code:

    /**
     * Not sure what to do here; could reset indentation to some value maybe?
     */
    @Override
    public YAMLGenerator useDefaultPrettyPrinter()
    {
        return this;
    }

#No. 300
#File: YAMLGenerator.java

#Comment:
    /**
     * Not sure what to do here; will always indent, but uses
     * YAML-specific settings etc.
     */

#Code:
    @Override
    public YAMLGenerator setPrettyPrinter(PrettyPrinter pp) {
        return this;
    }
	
#No. 301
#File: XYTextSimpleAnnotation.java

#Comment:
	/*
	 * PUBLIC METHOD
	 */

#Code:
	
	
	@Override
	public void draw(Graphics2D g2, XYPlot plot, Rectangle2D dataArea,
			ValueAxis domainAxis, ValueAxis rangeAxis, int rendererIndex,
			PlotRenderingInfo info) {
		
		Rectangle2D box = chartPanel.getScreenDataArea();
		float sx = (float) plot.getDomainAxis().valueToJava2D(x, box, plot.getDomainAxisEdge());
		float maxXLim = (float) box.getWidth() - g2.getFontMetrics().stringWidth(text); 
		if (sx > maxXLim) {
			sx = maxXLim;
		}
		if (sx < box.getMinX()) {
			sx = (float) box.getMinX();
		}
		
		float sy = (float) plot.getRangeAxis().valueToJava2D(y, chartPanel.getScreenDataArea(), plot.getRangeAxisEdge());
		g2.setTransform(new AffineTransform());
		g2.setColor(color);
		g2.setFont(font);
		g2.drawString(text, sx, sy);
	}
	
#No. 302
#File: XYScrollView.java

#Comment:
    /**
     * When looking for focus in children of a scroll view, need to be a little
     * more careful not to give focus to something that is scrolled off screen.
     * 
     * This is more expensive than the default {@link android.view.ViewGroup}
     * implementation, otherwise this behavior might have been made the default.
     */

#Code:
    @Override
    protected boolean onRequestFocusInDescendants(int direction, Rect previouslyFocusedRect) {
        
        // convert from forward / backward notation to up / down / left / right
        // (ugh).
        if (direction == View.FOCUS_FORWARD) {
            direction = View.FOCUS_DOWN;
        }
        else if (direction == View.FOCUS_BACKWARD) {
            direction = View.FOCUS_UP;
        }
        
        final View nextFocus = previouslyFocusedRect == null ? FocusFinder.getInstance().findNextFocus(this, null,
                direction) : FocusFinder.getInstance().findNextFocusFromRect(this, previouslyFocusedRect, direction);
        
        if (nextFocus == null) {
            return false;
        }
        
        if (isOffScreen(nextFocus)) {
            return false;
        }
        
        return nextFocus.requestFocus(direction, previouslyFocusedRect);
    }
	
#No. 303
#File: XYScrollView.java

#Comment:
    /**
     * If rect is off screen, scroll just enough to get it (or at least the
     * first screen size chunk of it) on screen.
     * 
     * @param rect
     *            The rectangle.
     * @param immediate
     *            True to scroll immediately without animation
     * @return true if scrolling was performed
     */

#Code:
    private boolean scrollToChildRect(Rect rect, boolean immediate) {
        final int deltaX = computeScrollDeltaToGetChildRectOnScreenX(rect);
        final int deltaY = computeScrollDeltaToGetChildRectOnScreenY(rect);
        final boolean scroll = (deltaX != 0 || deltaY != 0);
        if (scroll) {
            if (immediate) {
                scrollBy(deltaX, deltaY);
            }
            else {
                smoothScrollBy(deltaX, deltaY);
            }
        }
        return scroll;
    }
	
#No. 304
#File: XYEdgeSeriesCollection.java

#Comment:
	/*
	 * XYDATASET METHODS
	 */

#Code:

	@Override
	public DomainOrder getDomainOrder() {
		return DomainOrder.ASCENDING;
	}
	
#No. 305
#File: XYEdgeSeries.java

#Comment:
	/*
	 * PUBLIC METHODS
	 */

#Code:

	@Override
	public int getItemCount() {
		return startSeries.getItemCount();
	}

#No. 306
#File: XYBarRenderer.java

#Comment:
    /**
     * Provides serialization support.
     *
     * @param stream  the output stream.
     *
     * @throws IOException  if there is an I/O error.
     */

#Code:
    private void writeObject(ObjectOutputStream stream) throws IOException {
        stream.defaultWriteObject();
        SerialUtilities.writeShape(this.legendBar, stream);
    }

#No. 307
#File: XYBarRenderer.java

#Comment:
    /**
     * Provides serialization support.
     *
     * @param stream  the input stream.
     *
     * @throws IOException  if there is an I/O error.
     * @throws ClassNotFoundException  if there is a classpath problem.
     */

#Code:
    private void readObject(ObjectInputStream stream)
            throws IOException, ClassNotFoundException {
        stream.defaultReadObject();
        this.legendBar = SerialUtilities.readShape(stream);
    }

#No. 308
#File: XTraceServer.java

#Comment:
    /**
     * Only allow a single XTrace server to run
     */

#Code:
    private XTraceServer() throws Exception {
        // Create the data stores
        metadata = DerbyMetadataStore.getInstance();
        data = new FileTreeDataStore(XTraceSettings.DATASTORE_DIRECTORY + "/reports/");

        // Create the static servers
        webserver = new WebServer(XTraceSettings.WEBUI_PORT, data, metadata);
        webserver.start();
        pubsubserver = PubSub.startServer();

        // Start the report sources
        pubsubsource = new PubSubSource(data, metadata);

        Runtime.getRuntime().addShutdownHook(new Thread() {
            @Override
            public void run() {
                try {
                    metadata.shutdown();
                } catch (Exception e) {
                    LOG.warn("Unable to shutdown metadata store", e);
                }
                try {
                    data.shutdown();
                } catch (Exception e) {
                    LOG.warn("Unable to shutdown data store", e);
                }
                try {
                    pubsubserver.shutdown();
                } catch (Exception e) {
                    LOG.warn("Unable to shutdown pubsub server", e);
                }
                try {
                    pubsubsource.shutdown();
                } catch (Exception e) {
                    LOG.warn("Unable to shutdown pubsub server", e);
                }
                LOG.info("XTraceServer shut down");
            }
        });
    }
	
#No. 309
#File: XSParser.java

#Comment:
    /**
     * for schema version "1.1", xerces 2.11.0-beta must be in classpath
     */

#Code:
    public void enableSchema11(){
        xsLoader.getConfig().setParameter(
                Constants.XERCES_PROPERTY_PREFIX + "validation/schema/version",
                "http://www.w3.org/XML/XMLSchema/v1.1");
    }

#No. 310
#File: XSLFSlideLayout.java

#Comment:
    /**
     * Render this sheet into the supplied graphics object
     */

#Code:
    @Override
    protected boolean canDraw(XSLFShape shape) {
        if (shape instanceof XSLFSimpleShape) {
            XSLFSimpleShape txt = (XSLFSimpleShape) shape;
            CTPlaceholder ph = txt.getCTPlaceholder();
            if (ph != null) {
                return false;
            }
        }
        return true;
		
#No. 311
#File: XSLFSlideLayout.java

#Comment:
    /**
     * While developing only!
     */

#Code:
    @Internal
    public CTSlideLayout getXmlObject() {
        return _layout;
    }

#No. 312
#File: XReader.java

#Comment:
   /**
    * This tests overridding an external method.
    */

#Code:
    public int read() throws IOException {
       return 'W';
    }

#No. 313
#File: XReader.java

#Comment:
   /**
    * This tests implementing an external method.
    */

#Code:
    public int readInt() throws IOException {
       return 'W';
    }
	
#No. 314
#File: XposedHelpers.java

#Comment:
    /**
     * For inner classes, return the "this" reference of the surrounding class
     */

#Code:
    public static Object getSurroundingThis(Object obj) {
        return getObjectField(obj, "this$0");
    }
	
#No. 315
#File: XposedBridge.java

#Comment:
    /**
     * Called when native methods and other things are initialized, but before preloading classes etc.
     */

#Code:
    private static void main(String[] args) {
        // the class the VM has been created for or null for the Zygote process
        String startClassName = getStartClassName();

        try {
            log("Loading Xposed (for " + (startClassName == null ? "Zygote" : startClassName) + ")...");
            if (startClassName == null) {
                // Zygote
                log("Running ROM '" + Build.DISPLAY + "' with fingerprint '" + Build.FINGERPRINT + "'");
            }

            if (initNative()) {
                if (startClassName == null) {
                    // Initializations for Zygote
                    initXbridgeZygote();
                }

                loadModules(startClassName);
            } else {
                log("Errors during native Xposed initialization");
            }
        } catch (Throwable t) {
            log("Errors during Xposed initialization");
            log(t);
        }

        // call the original startup code
        if (startClassName == null) {
            log("xposed: calling ZygoteInit");
            ZygoteInit.main(args);
        } else {
            log("xposed: calling RuntimeInit");
            RuntimeInit.main(args);
        }
    }
	
#No. 316
#File: XOUnitBundleListener.java

#Comment:
    /*
     * helper
     */

#Code:
    private void deployXOUnits(Bundle bundle) {
        Enumeration<?> e = bundle.findEntries("META-INF", "xo.xml", false); //$NON-NLS-1$, $NON-NLS-2$
        if (e != null) {
            if (LOGGER.isInfoEnabled()) {
                LOGGER.info("Deploying XO units in bundle '{}'", bundle.getSymbolicName());
            }
            List<XOManagerFactory> xoManagerFactories = new LinkedList<>();
            while (e.hasMoreElements()) {
                URL xoUnitUrl = (URL) e.nextElement();
                List<XOUnit> xoUnits = Collections.emptyList();
                try {
                    xoUnits = XOUnitFactory.getInstance().getXOUnits(xoUnitUrl);
                } catch (IOException ioe) {
                    if (LOGGER.isErrorEnabled()) {
                        LOGGER.error("Error while loading XOUnit", ioe);
                    }
                }
                for (XOUnit xoUnit : xoUnits) {
                    if (LOGGER.isDebugEnabled()) {
                        LOGGER.debug("Found XOUnit '{}'", xoUnit.getName());
                    }
                    XOManagerFactory xoManagerFactory = new XOManagerFactoryImpl(xoUnit);
                    Dictionary<String, Object> p = new Hashtable<>();
                    p.put("name", xoUnit.getName());
                    bundle.getBundleContext().registerService(XOManagerFactory.class, xoManagerFactory, p);
                    xoManagerFactories.add(xoManagerFactory);
                    if (LOGGER.isDebugEnabled()) {
                        LOGGER.debug("Registered service for XOUnit '{}'", xoUnit.getName());
                    }
                }
            }
            this.registeredXOManagerFactories.put(Long.valueOf(bundle.getBundleId()), xoManagerFactories);
        }
    }
	
#No. 317
#File: XOMUserObjectType.java

#Comment:
	/*
	 * Polymorphism - The data type of an object is determined through these methods.
	 * Unlike in Java, where an object's type is determined by the class hierarchy,
	 * objects in XION can be of any mix of data types (hence the term variant for XION objects).
	 */

#Code:
	
	public String toLanguageString(XOMUserObject instance) {
		return typeName + " id " + objectIds.get(instance);
	}
	
#No. 318
#File: XOMUserObjectType.java

#Comment:
	/*
	 * Encapsulation - All manipulation of an object's state is done through these methods.
	 * Inheritance - If this type doesn't have handlers for these methods, control is passed to its supertype.
	 */

#Code:

	public boolean canDelete(XNContext ctx, XOMUserObject instance) {
		return true;
	}

#No. 319
#File: XOMUserObjectType.java

#Comment:
	/*
	 * Instantiation of root variants of this type.
	 */

#Code:
	
	public boolean canGetMassInstance(XNContext ctx) {
		return true;
	}



#No. 320
#File: XOMDiskType.java

#Comment:
	/*
	 * Instantiation of root variants of this type.
	 */

#Code:
	
	public boolean canGetMassInstance(XNContext ctx) {
		return ctx.allow(XNSecurityKey.FILE_SYSTEM_READ, "Operation", "GetDisks");
	}

#No. 321
#File: XOMDiskType.java

#Comment:
	/*
	 * Polymorphism - The data type of an object is determined through these methods.
	 * Unlike in Java, where an object's type is determined by the class hierarchy,
	 * objects in XION can be of any mix of data types (hence the term variant for XION objects).
	 */

#Code:
	
	protected boolean accept(XOMFile f) {
		return f.isDisk();
	}

#No. 322
#File: XOMFileType.java

#Comment:
	/*
	 * Instantiation of root variants of this type.
	 */

#Code:
	
	public boolean canGetMassInstance(XNContext ctx) {
		return ctx.allow(XNSecurityKey.FILE_SYSTEM_READ, "Operation", "GetFiles");
	}

#No. 323
#File: XOMFileType.java

#Comment:
	/*
	 * Instantiation of child variants of this type.
	 */

#Code:
	
	public boolean canGetChildMassVariant(XNContext ctx, XOMVariant parent) {
		return ctx.allow(XNSecurityKey.FILE_SYSTEM_READ, "Operation", "GetFiles", "Parent", parent.toTextString(ctx)) && (XOMFolderType.instance.canMakeInstanceFrom(ctx, parent));
	}

#No. 324
#File: XOMFileType.java

#Comment:
	/*
	 * Polymorphism - The data type of an object is determined through these methods.
	 * Unlike in Java, where an object's type is determined by the class hierarchy,
	 * objects in XION can be of any mix of data types (hence the term variant for XION objects).
	 */

#Code:
	
	protected boolean accept(XOMFile f) {
		return f.isFile();
	}

#No. 325
#File: XOMFolderType.java

#Comment:
	/*
	 * Instantiation of root variants of this type.
	 */

#Code:
	
	public boolean canGetMassInstance(XNContext ctx) {
		return ctx.allow(XNSecurityKey.FILE_SYSTEM_READ, "Operation", "GetFolders");
	}

#No. 326
#File: XOMFolderType.java

#Comment:
	/*
	 * Instantiation of child variants of this type.
	 */

#Code:
	
	public boolean canGetChildMassVariant(XNContext ctx, XOMVariant parent) {
		return (ctx.allow(XNSecurityKey.FILE_SYSTEM_READ, "Operation", "GetFolders", "Parent", parent.toTextString(ctx)) && XOMFolderType.instance.canMakeInstanceFrom(ctx, parent));
	}

#No. 327
#File: XOMFolderType.java

#Comment:
	/*
	 * Polymorphism - The data type of an object is determined through these methods.
	 * Unlike in Java, where an object's type is determined by the class hierarchy,
	 * objects in XION can be of any mix of data types (hence the term variant for XION objects).
	 */

#Code:
	
	protected boolean accept(XOMFile f) {
		return f.isFolder();
	}

#No. 328
#File: XOMForkType.java

#Comment:
	/*
	 * Instantiation of child variants of this type.
	 */

#Code:
	
	public boolean canGetChildMassVariant(XNContext ctx, XOMVariant parent) {
		return ctx.allow(XNSecurityKey.FILE_SYSTEM_READ, "Operation", "GetForks", "Parent", parent.toTextString(ctx)) && (XOMFileType.instance.canMakeInstanceFrom(ctx, parent));
	}

#No. 329
#File: XOMForkType.java

#Comment:
	/*
	 * Polymorphism - The data type of an object is determined through these methods.
	 * Unlike in Java, where an object's type is determined by the class hierarchy,
	 * objects in XION can be of any mix of data types (hence the term variant for XION objects).
	 */

#Code:
	
	protected boolean accept(XOMFile f) {
		return f.isFork();
	}

#No. 330
#File: XOMListType.java

#Comment:
	/*
	 * Instantiation of root variants of this type.
	 */

#Code:
	
	public final boolean canGetSingletonInstance(XNContext ctx) {
		return elementInstanceType.canGetSingletonInstance(ctx);
	}

#No. 331
#File: XOMListType.java

#Comment:
	/*
	 * Instantiation of child variants of this type.
	 */

#Code:
	
	public final boolean canGetChildSingletonVariant(XNContext ctx, XOMVariant parent) {
		return elementInstanceType.canGetChildSingletonVariant(ctx, parent);
	}

#No. 332
#File: XOMListType.java

#Comment:
	/*
	 * Polymorphism - The data type of an object is determined through these methods.
	 * Unlike in Java, where an object's type is determined by the class hierarchy,
	 * objects in XION can be of any mix of data types (hence the term variant for XION objects).
	 */

#Code:
	
	private boolean allCanMorph(XNContext ctx, List<? extends XOMVariant> elements) {
		for (XOMVariant element : elements) {
			if (elementInstanceType.canMakeInstanceFrom(ctx, element));
			else return false;
		}
		return true;
	}
	
#No. 333
#File: XNParser.java

#Comment:
	/* * * * * * * * * * * * * * * * *
	 * PARSING NON-BUILT-IN COMMANDS *
	 * * * * * * * * * * * * * * * * */

#Code:
	
	public static final List<XNExpression> defaultParseCommand(String commandName, XNParser p, Collection<String> keywords) {
		List<XNExpression> params = new Vector<XNExpression>();
		if (p.lookOperator(1, false).precedence() == XNOperatorPrecedence.LIST && p.isNotKeyword(1, keywords)) {
			params.add(new XNEmptyExpression(p.lookToken(1).source, p.lookToken(1).beginLine, p.lookToken(1).beginColumn));
		} else if (p.lookSingleExpression(1, keywords)) {
			params.add(p.getSingleExpression(keywords));
		} else {
			return params;
		}
		while (p.lookOperator(1, false).precedence() == XNOperatorPrecedence.LIST && p.isNotKeyword(1, keywords)) {
			p.getOperator(false);
			if (p.lookSingleExpression(1, keywords)) {
				params.add(p.getSingleExpression(keywords));
			} else {
				params.add(new XNEmptyExpression(p.lookToken(1).source, p.lookToken(1).beginLine, p.lookToken(1).beginColumn));
			}
		}
		return params;
	}

#No. 334
#File: XNParser.java

#Comment:
	/* * * * * * * * *
	 * SCRIPT PARSER *
	 * * * * * * * * */

#Code:
	
	public boolean lookEOL(int idx) {
		return (lookToken(idx).kind == XNToken.LINE_TERM);
	}
	
#No. 335
#File: XmppServiceBinding.java

#Comment:
	/**
	 * USE WITH CAUTION!!!
	 * @return XmppService object
	 */

#Code:
	@Deprecated
	public XmppService getXmppService() {
		return xmppService;
	}
	
#No. 336
#File: XmppPresenceStatus.java

#Comment:
    /**
     * For the BatteryCmd, should only be called if one parameter
     * has changed
     * 
     * @param percentage
     * @param source
     */

#Code:
    public void setPowerInfo(String percentage, String source) {
        mBatteryPercentage = percentage;
        mPowerSource = source;
        newStatusInformationAvailable();
    }
	
#No. 337
#File: XmppPresence.java

#Comment:
  /**
   * Constructor.
   *
   * @param _parent The parent of this datablock
   * @param _attributes The list of element attributes
   */

#Code:

  public XmppPresence( XmppObject parent, Attributes attributes ) {
    super( parent, attributes );
  }
  
#No. 338
#File: XMLVisitor.java

#Comment:
	/**
	 * print header
	 * print child
	 * print tail
	 */

#Code:
	@Override
	public void visit(BNSNode node) {
		int prefix = node.getPrefix();
		int uri = node.getUri();

		String line1 = String.format("xmlns:%s=%s", getStringAt(prefix) , getStringAt(uri));
		
		System.out.println(line1);
		
		if(node.hasChild()){
			for(BXMLNode child : node.getChildren()){
				child.accept(this);
			}
		}
	}
	
#No. 339
#File: XmlUtilities.java

#Comment:
    /**
     * Pretty print XML Node
     * @param node
     * @return
     * @throws XmlUtilitiesException
     */

#Code:
    public String xmlNodeToString( Node node ) throws XmlUtilitiesException {

        StringWriter sw = new StringWriter();
        try {
            Transformer transformer = TransformerFactory.newInstance().newTransformer();
            transformer.setOutputProperty( OutputPropertiesFactory.S_KEY_INDENT_AMOUNT, "4" );
            transformer.setOutputProperty( OutputPropertiesFactory.S_KEY_LINE_SEPARATOR, "\n" );
            transformer.setOutputProperty( OutputKeys.INDENT, "yes" );
            transformer.setOutputProperty( OutputKeys.OMIT_XML_DECLARATION, "yes" );
            transformer.transform( new DOMSource( node ), new StreamResult( sw ) );
        } catch( TransformerException te ) {
            throw new XmlUtilitiesException( "Error transforming XML node to String", te );
        }
        return sw.toString().trim();
    }

#No. 340
#File: XmlTemplateParser.java

#Comment:
    /**
     * Helper method used to setup a schema aware, validating XML document builder
     * @return
     * @throws SAXException
     * @throws ParserConfigurationException
     */

#Code:
    private DocumentBuilder createDocBuilder() throws SAXException, ParserConfigurationException {
        // load the template schema
        SchemaFactory schemaFactory = SchemaFactory.newInstance(XML_SCHEMA);
        URL schemaUrl = ClassLoader.getSystemResource(CONFIG_SCHEMA);
        Schema schema = schemaFactory.newSchema(schemaUrl);
   
        // setup a docBuilder that will validate against the schema
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setValidating(false);
        factory.setNamespaceAware(true);
        factory.setSchema(schema);
        DocumentBuilder docBuilder = factory.newDocumentBuilder();
        docBuilder.setErrorHandler(new TemplateErrorHander() );
        return docBuilder;
    }
	
#No. 341
#File: XmlSchemaGenerator.java

#Comment:
    /**
     * JAX-RPC wants the namespaces to be sorted in the reverse order
     * so that the empty namespace "" comes to the very end. Don't ask me why.
     */

#Code:
    private static final Comparator<String> NAMESPACE_COMPARATOR = new Comparator<String>() {
        public int compare(String lhs, String rhs) {
            return -lhs.compareTo(rhs);
        }
    };
	
#No. 342
#File: XmlSchemaGenerator.java

#Comment:
    /**
     * Debug information of what's in this {@link XmlSchemaGenerator}.
     */

#Code:
    @Override
    public String toString() {
        StringBuilder buf = new StringBuilder();
        for (Namespace ns : namespaces.values()) {
            if(buf.length()>0)  buf.append(',');
            buf.append(ns.uri).append('=').append(ns);
        }
        return super.toString()+'['+buf+']';
    }
	
#No. 343
#File: XMLResourceParseException.java

#Comment:
    /*
     * Attribute problem
     */

#Code:
    public XMLResourceParseException(String resourceName, String elementName, String attributeName, String msg) {
        super(resourceName + ": invalid <" + elementName
                + ">-element found: attribute '" + attributeName + "' "
                + (msg == null ? "is required!" : msg));
    }

#No. 344
#File: XMLResourceParseException.java

#Comment:
    /*
     * Attribute problem
     */

#Code:
    public XMLResourceParseException(String resourceName, String elementName, String attributeName, String msg, Throwable e) {
        super(resourceName + ": invalid <" + elementName
                + ">-element found: attribute '" + attributeName + "' "
                + (msg == null ? "is required!" : msg), e);
    }

#No. 345
#File: XMLResourceParseException.java

#Comment:
    /*
     * required element missing
     */

#Code:
    public XMLResourceParseException(String resourceName, String elementName) {
        super(resourceName + ": the required <" + elementName
                + ">-element is not found!");
    }

#No. 346
#File: XMLResourceParseException.java

#Comment:
    /*
     * JDOMException or IOException
     */

#Code:
    public XMLResourceParseException(String resourceName, Throwable e) {
        super(resourceName, e);
    }

#No. 347
#File: XMLResourceParseException.java

#Comment:
    /*
     * for other cases
     */

#Code:
    public XMLResourceParseException(String msg) {
        super(msg);
    }
	
#No. 348
#File: XmlProperties.java

#Comment:
    /*
     * This method presumes validation by our DTD and a coalescing,
     * comment-ignoring parser!
     */

#Code:
    private void extractProperty( Node propNode )
    {
	Element propElem = (Element) propNode;
	String key = propElem.getAttribute( "name" );
	boolean trim = Boolean.valueOf( propElem.getAttribute("trim") ).booleanValue();
	NodeList nl = propElem.getChildNodes();
	int len = nl.getLength();

	assert (len >= 0 && len <= 1) : "Bad number of children of property element: " + len;

	String val = ( len == 0 ? "" : ((Text) nl.item(0)).getNodeValue() );
	if (trim)
	    val = val.trim();

	this.put( key, val );
    }
	
#No. 349
#File: XmlPatternUtil.java

#Comment:
    /**
     * <controller>SwagBackendExample</controller>
     */

#Code:
    public static PsiElementPattern.Capture<PsiElement> getMenuControllerPattern() {
        return XmlPatterns
                .psiElement(XmlTokenType.XML_DATA_CHARACTERS)
                .withParent(XmlPatterns
                        .xmlText()
                        .withParent(XmlPatterns
                                .xmlTag()
                                .withName("controller")
                        )
                ).inside(XmlHelper.getInsideTagPattern("menu"));
    }

#No. 350
#File: XmlPatternUtil.java

#Comment:
    /**
     * <parent identifiedBy="controller">SwagBackendExample</parent>
     */

#Code:
    public static PsiElementPattern.Capture<PsiElement> getMenuControllerByParentPattern() {
        return XmlPatterns
            .psiElement(XmlTokenType.XML_DATA_CHARACTERS)
            .withParent(XmlPatterns
                .xmlText()
                .withParent(XmlPatterns
                    .xmlTag()
                    .withName("parent").withAttributeValue("identifiedBy", "controller")
                )
            ).inside(XmlHelper.getInsideTagPattern("menu"));
    }

#No. 351
#File: XmlPatternUtil.java

#Comment:
    /**
     * <action>SwagBackendExample</action>
     */

#Code:
    public static PsiElementPattern.Capture<PsiElement> getMenuControllerActionPattern() {
        return XmlPatterns
            .psiElement(XmlTokenType.XML_DATA_CHARACTERS)
            .withParent(XmlPatterns
                .xmlText()
                .withParent(XmlPatterns
                    .xmlTag()
                    .withName("action")
                )
            ).inside(XmlHelper.getInsideTagPattern("menu"));
    }
	
#No. 352
#File: XmlOutput.java

#Comment:
    /**
     * Temporarily here to allow badly-behaved apps to run.
     */

#Code:
    public void FIXMEdisableContextCheck() {
        _checkCtx = false;
    }
	
#No. 353
#File: XMLNoteXMLOut.java

#Comment:
		/**
		 * precondition: equalsAttr(e) 
		 * @param e
		 * @return
		 */

#Code:
		public boolean canBeMerged(Element e) {
			if ((e.getEndOffset()==_start)) {
				return true;
			}
			if ((e.getStartOffset()==_end)) {
				return true;
			}
			return false;
		}
		
#No. 354
#File: XMLNoteTransferHandler.java

#Comment:
	/**
	 * Calls the previous handler of the JXMLNotePane.
	 */

#Code:
	public Icon getVisualRepresentation(Transferable t) {
		return _defaultHandler.getVisualRepresentation(t);
	}

#No. 355
#File: XMLList.java

#Comment:
    /**
     * See ECMA 357, 11_2_2_1, Semantics, 3_e.
     */

#Code:
    public Scriptable getExtraMethodSource(Context cx)
    {
        if (length() == 1) {
            return getXmlFromAnnotation(0);
        }
        return null;
    }
	
#No. 356
#File: XMLLibImpl.java

#Comment:
    /**
     * See E4X 13.1.2.1.
     */

#Code:
    public boolean isXMLName(Context cx, Object nameObj)
    {
        String name;
        try {
            name = ScriptRuntime.toString(nameObj);
        } catch (EcmaError ee) {
            if ("TypeError".equals(ee.getName())) {
                return false;
            }
            throw ee;
        }

        // See http://w3.org/TR/xml-names11/#NT-NCName
        int length = name.length();
        if (length != 0) {
            if (isNCNameStartChar(name.charAt(0))) {
                for (int i = 1; i != length; ++i) {
                    if (!isNCNameChar(name.charAt(i))) {
                        return false;
                    }
                }
                return true;
            }
        }

        return false;
    }
	
#No. 357
#File: XmlEntityConsumerTest.java

#Comment:
  /**
   * Is allowed because <code>Id</code> is in default namespace (<code>xmlns=\"http://www.w3.org/2005/Atom\"</code>)
   * 
   * @throws Exception
   */

#Code:
  @Test
  public void validationOfUnknownPropertyDefaultNamespaceSuccess() throws Exception {
    String roomWithValidNamespaces =
        "<?xml version='1.0' encoding='UTF-8'?>"
            +
            "<entry xmlns=\"http://www.w3.org/2005/Atom\" " +
            "xmlns:m=\"http://schemas.microsoft.com/ado/2007/08/dataservices/metadata\" " +
            "xmlns:d=\"http://schemas.microsoft.com/ado/2007/08/dataservices\" " +
            "xml:base=\"http://localhost:19000/test/\" m:etag=\"W/&quot;1&quot;\">"
            +
            "  <id>http://localhost:19000/test/Rooms('1')</id>" +
            "  <title type=\"text\">Room 1</title>" +
            "  <updated>2013-01-11T13:50:50.541+01:00</updated>" +
            "  <content type=\"application/xml\">" +
            "    <m:properties>" +
            "      <Id>1</Id>" +
            "    </m:properties>" +
            "  </content>" +
            "</entry>";

    EdmEntitySet entitySet = MockFacade.getMockEdm().getDefaultEntityContainer().getEntitySet("Rooms");
    InputStream reqContent = createContentAsStream(roomWithValidNamespaces);

    XmlEntityConsumer xec = new XmlEntityConsumer();
    ODataEntry result =
        xec.readEntry(entitySet, reqContent, EntityProviderReadProperties.init().mergeSemantic(true).build());
    assertNotNull(result);
  }
  
#No. 358
#File: XmlEntityConsumerTest.java

#Comment:
  /**
   * We only support <code>UTF-8</code> as character encoding.
   * 
   * @throws Exception
   */

#Code:
  @Test(expected = EntityProviderException.class)
  public void validationOfWrongXmlEncodingIso8859_1() throws Exception {
    String roomWithValidNamespaces =
        "<?xml version='1.0' encoding='iso-8859-1'?>"
            +
            "<entry xmlns=\"http://www.w3.org/2005/Atom\" " +
            "xmlns:m=\"http://schemas.microsoft.com/ado/2007/08/dataservices/metadata\" " +
            "xmlns:d=\"http://schemas.microsoft.com/ado/2007/08/dataservices\" " +
            "xml:base=\"http://localhost:19000/test/\" m:etag=\"W/&quot;1&quot;\">"
            +
            "</entry>";

    EdmEntitySet entitySet = MockFacade.getMockEdm().getDefaultEntityContainer().getEntitySet("Rooms");
    InputStream reqContent = createContentAsStream(roomWithValidNamespaces);
    readAndExpectException(entitySet, reqContent, EntityProviderException.UNSUPPORTED_CHARACTER_ENCODING
        .addContent("iso-8859-1"));
  }
 
#No. 359
#File: XmlEntityConsumerTest.java

#Comment:
  /**
   * Teams('1')?$expand=nt_Employees
   * -> Remove 'feed' start and end tags around expanded/inlined employees
   * 
   * @throws Exception
   */

#Code:
  @Test(expected = EntityProviderException.class)
  public void validateFeedForInlineContent() throws Exception {
    // prepare
    String content = readFile("expanded_team.xml")
        .replace("<feed xml:base=\"http://some.host.com/service.root/\">", "")
        .replace("</feed>", "");
    assertNotNull(content);

    EdmEntitySet entitySet = MockFacade.getMockEdm().getDefaultEntityContainer().getEntitySet("Teams");
    InputStream reqContent = createContentAsStream(content);

    // execute
    readAndExpectException(entitySet, reqContent,
        EntityProviderException.INVALID_INLINE_CONTENT.addContent("xml data"));
  }

#No. 360
#File: XmlEntityConsumerTest.java

#Comment:
  /**
   * Teams('1')?$expand=nt_Employees
   * -> Remove 'type' attribute at expanded/inlined employees link tag
   * 
   * @throws Exception
   */

#Code:
  @Test(expected = EntityProviderException.class)
  public void validateMissingTypeAttributeForInlineContent() throws Exception {
    // prepare
    String content = readFile("expanded_team.xml")
        .replace("type=\"application/atom+xml;type=feed\"", "");
    assertNotNull(content);

    EdmEntitySet entitySet = MockFacade.getMockEdm().getDefaultEntityContainer().getEntitySet("Teams");
    InputStream reqContent = createContentAsStream(content);

    // execute
    readAndExpectException(entitySet, reqContent,
        EntityProviderException.INVALID_INLINE_CONTENT.addContent("xml data"));
  }

#No. 361
#File: XmlEntityConsumerTest.java

#Comment:
  /**
   * Teams('1')?$expand=nt_Employees
   * -> Replaced parameter 'type=feed' with 'type=entry' attribute at expanded/inlined employees link tag
   * 
   * @throws Exception
   */

#Code:
  @Test(expected = EntityProviderException.class)
  public void validateWrongTypeAttributeForInlineContent() throws Exception {
    // prepare
    String content = readFile("expanded_team.xml")
        .replace("type=\"application/atom+xml;type=feed\"", "type=\"application/atom+xml;type=entry\"");
    assertNotNull(content);

    EdmEntitySet entitySet = MockFacade.getMockEdm().getDefaultEntityContainer().getEntitySet("Teams");
    InputStream reqContent = createContentAsStream(content);

    // execute
    readAndExpectException(entitySet, reqContent, EntityProviderException.INVALID_INLINE_CONTENT.addContent("feed"));
  }

#No. 362
#File: XmlEntityConsumerTest.java

#Comment:
  /**
   * Teams('1')?$expand=nt_Employees
   * -> Replaced parameter 'type=feed' with 'type=entry' attribute at expanded/inlined employees link tag
   * 
   * @throws Exception
   */

#Code:
  @Test(expected = EntityProviderException.class)
  public void validateWrongTypeAttributeForInlineContentMany() throws Exception {
    // prepare
    String content = readFile("double_expanded_team.xml")
        .replace("type=\"application/atom+xml;type=entry\"", "type=\"application/atom+xml;type=feed\"");
    assertNotNull(content);

    EdmEntitySet entitySet = MockFacade.getMockEdm().getDefaultEntityContainer().getEntitySet("Teams");
    InputStream reqContent = createContentAsStream(content);

    // execute
    readAndExpectException(entitySet, reqContent, EntityProviderException.INVALID_INLINE_CONTENT.addContent("entry"));
  }

#No. 363
#File: XmlEntityConsumerTest.java

#Comment:
  /**
   * We only support <code>UTF-8</code> as character encoding.
   * 
   * @throws Exception
   */

#Code:
  @Test(expected = EntityProviderException.class)
  public void validationOfWrongXmlEncodingUtf32() throws Exception {
    String roomWithValidNamespaces =
        "<?xml version='1.0' encoding='UTF-32'?>"
            +
            "<entry xmlns=\"http://www.w3.org/2005/Atom\" " +
            "xmlns:m=\"http://schemas.microsoft.com/ado/2007/08/dataservices/metadata\" " +
            "xmlns:d=\"http://schemas.microsoft.com/ado/2007/08/dataservices\" " +
            "xml:base=\"http://localhost:19000/test/\" m:etag=\"W/&quot;1&quot;\">"
            +
            "</entry>";

    EdmEntitySet entitySet = MockFacade.getMockEdm().getDefaultEntityContainer().getEntitySet("Rooms");
    InputStream reqContent = createContentAsStream(roomWithValidNamespaces);
    readAndExpectException(entitySet, reqContent, EntityProviderException.UNSUPPORTED_CHARACTER_ENCODING
        .addContent("UTF-32"));
  }
  
#No. 364
#File: XMLDataPersister.java

#Comment:
    /*
                                Private Methods
    \*

#Code:

    private void fillInMetadata(Collection<PersistentMetadataGroup> metadata,
                                String elementName,
                                Element parentElement)
    {
        for (PersistentMetadataGroup metadataGroup : metadata)
        {
            Element metadataElement = new Element(elementName);
            metadataElement.setAttribute(XML_METADATA_NAMESPACE_ATTR,
                                         metadataGroup.getNamespace());
            parentElement.addContent(metadataElement);

            Map<String,String> nameValuePairs = metadataGroup.getMetadata();
            for (Map.Entry<String,String> nameValuePair : nameValuePairs.entrySet())
            {
                Element metadatumElement = new Element(XML_METADATUM_ELEMENT);
                metadatumElement.setAttribute(XML_METADATUM_NAME_ATTR,
                                              nameValuePair.getKey());
                metadatumElement.setAttribute(XML_METADATUM_VALUE_ATTR,
                                              nameValuePair.getValue());
                metadataElement.addContent(metadatumElement);
            }
        }
    }
	
#No. 365
#File: XMLDataPersister.java

#Comment:
    /**
     * Called at the end of the load operation to close files, clean
     * up, etc.
     *
     * @throws CurnException on error
     */

#Code:
    protected void endLoadOperation()
        throws CurnException
    {
         log.debug("Load of XML curn data complete.");
    }
	
#No. 366
#File: XMLDataPersister.java

#Comment:
    /**
     * Called at the end of the actual save operation to flush files, clean
     * up, etc.
     *
     * @throws CurnException on error
     */

#Code:
    protected void endSaveOperation() throws CurnException
    {
        try
        {
            Document document = new Document(rootElementForSaving);
            Format outputFormat = Format.getPrettyFormat();
            outputFormat.setLineSeparator(System.getProperty("line.separator"));
            XMLOutputter xmlOut = new XMLOutputter(outputFormat);

            // Open the cache file. For the cache file, the index
            // marker goes at the end of the file (since the extension
            // doesn't matter as much). This allows the file names to
            // sort better in a directory listing.

            Writer cacheOut = CurnUtil.openOutputFile
                                         (metadataFile,
                                          null,
                                          CurnUtil.IndexMarker.AFTER_EXTENSION,
                                          totalCacheBackups);

            //xmlOut.output(document, new XMLWriter(cacheOut));
            xmlOut.output(document, cacheOut);
        }

        catch (IOException ex)
        {
            throw new CurnException("Failed to write XML cache file \"" +
                                    metadataFile.getPath() + "\"",
                                    ex);
        }

        catch (IOExceptionExt ex)
        {
            throw new CurnException("Failed to write XML cache file \"" +
                                    metadataFile.getPath() + "\"",
                                    ex);
        }
    }

#No. 367
#File: XmlConstants.java

#Comment:
    /**
     * Utility Class, no instances
     */

#Code:
    private XmlConstants() {
        super();
    }

#No. 368
#File: XmiWriterBase.java

#Comment:
    /**
     * Subclasses may override this to prevent closing the stream.
     *
     * @param out an output stream
     */

#Code:
    protected void afterXMIWritten(OutputStream out) {
        IOUtils.closeQuietly(out);
    }
	
#No. 369
#File: Xlsx2Tmx.java

#Comment:
	/**
	 * just for test
	 * @param args
	 *            ;
	 */

#Code:
	public static void main(String[] args) {

		File2TmxConvertBean bean = new File2TmxConvertBean();
		bean.newTmxFilePath = "E:\\bigTmxTest\\small_temp.xlsx.tmx";
		// bean.appendExistTmxFilePath = "e:/bigTmxTest/a.tmx";

		bean.sourceFilePath = "E:\\bigTmxTest\\small_temp.xlsx";

		long start = System.currentTimeMillis();
		try {
			// tmx.doCovnerter(bean);
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

		System.out.println("ALL:" + (System.currentTimeMillis() - start));
		System.out.println("ok");
	}
	
#No. 370
#File: XlsSerializerTest.java

#Comment:
    /**
     * test for TDP-1660 and TDP-1648
     */

#Code:
    @Test
    public void more_than_52_columns() throws Exception {
        String fileName = "TDP_Epics.xlsx";
        DataSetMetadata dataSetMetadata = metadataBuilder.metadata().id("epics").build();

        try (InputStream inputStream = this.getClass().getResourceAsStream(fileName)) {
            dataSetMetadata.getRowMetadata() //
                    .setColumns(xlsSchemaParser.parse(getRequest(inputStream, "#456")) //
                            .getSheetContents() //
                            .get(0) //
                            .getColumnMetadatas());
        }

        Assertions.assertThat(dataSetMetadata.getRowMetadata().getColumns()) //
                .isNotNull() //
                .isNotEmpty() //
                .hasSize(98);

        List<Map<String, String>> values = getValuesFromFile(fileName, dataSetMetadata);

        logger.debug("values: {}", values);

        Assertions.assertThat(values.get(3).get("0090")).isEqualTo("Small");
    }

#No. 371
#File: XlsSerializerTest.java

#Comment:
    /**
     * TDP-1656
     */

#Code:
    @Test
    public void date_format() throws Exception {

        // given
        String fileName = "dates.xlsx";
        checkExcelFile(fileName);

        // when
        DataSetMetadata dataSetMetadata = getDataSetMetadataFromExcelFile(fileName, "Feuil1");
        List<Map<String, String>> values = getValuesFromFile(fileName, dataSetMetadata);

        logger.debug("values: {}", values);

        // then
        Assertions.assertThat(values.get(0)).contains(entry("0000", "1/1/2016"), entry("0001", "2/10/2016"));
        Assertions.assertThat(values.get(1)).contains(entry("0000", "3/31/1972"), entry("0001", "3/31/2016"));
        Assertions.assertThat(values.get(2)).contains(entry("0000", "10/10/2003"), entry("0001", "4/6/2016"));
        Assertions.assertThat(values.get(3)).contains(entry("0000", "02/03/1932"), entry("0001", "03/02/1956"));
        Assertions.assertThat(values.get(4)).contains(entry("0000", "04/05/2025"), entry("0001", "06/07/2029"));
    }

#No. 372
#File: XlsSerializerTest.java

#Comment:
    /**
     * TDP-1656
     */

#Code:
    @Test
    public void date_format_with_time() throws Exception {

        // given
        String fileName = "dates_test.xlsx";
        checkExcelFile(fileName);

        // when
        DataSetMetadata dataSetMetadata = getDataSetMetadataFromExcelFile(fileName, "Sheet2");
        List<Map<String, String>> values = getValuesFromFile(fileName, dataSetMetadata);

        logger.debug("values: {}", values);

        // then
        Assertions.assertThat(values.get(0)).contains(entry("0003", "1/26/2015 18:03"), entry("0004", "1/29/2015 0:30"));
        Assertions.assertThat(values.get(1)).contains(entry("0003", "12/4/2015 1:01"), entry("0004", "1/15/2016 13:56"));
    }
	
#No. 373
#File: XLogModule.java

#Comment:
    /**
     * log include JS fatal exception and native uncaught exception
     */

#Code:
    public static void initWithNativeCrashInclude(XLogSetting setting, Context context) {
        init(setting, context);
    }

#No. 374
#File: XLogModule.java

#Comment:
    /**
     * JS soft exception log and native log
     */

#Code:
    public static void init(XLogSetting setting) {
        init(setting, null);
    }
	
#No. 375
#File: XLargeUi.java

#Comment:
    /**
     * Activates current tab. So tab be able to receive key events. Without this remote controls wont work.
     */

#Code:
    private void initActionBar() {
        if (!(mActivity instanceof AppCompatActivity))
            return;

        mActionBar = ((AppCompatActivity)mActivity).getSupportActionBar();
    }
	
#No. 376
#File: XIncludeTransformer.java

#Comment:
    /**
     * Eventually previous errors don't reset local variables status, so every time a new consumer is set, local variables
     * should be re-initialized
     */

#Code:
    public void setContentHandler(ContentHandler delegateHandler) {
        this.contentHandler = delegateHandler;

        if (delegateHandler instanceof LexicalHandler) {
            lexicalHandler = (LexicalHandler) delegateHandler;
        }

        this.xIncludeElementLevel = 0;
        this.fallbackElementLevel = 0;
        this.useFallbackLevel = 0;
    }
	
#No. 377
#File: XIncludeTransformer.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @return the resolver
     */

#Code:
    public EntityResolver2 getResolver() {
        return resolver;
    }

#No. 378
#File: XIncludeTransformer.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @param resolver the resolver to set
     */

#Code:
    public void setResolver(EntityResolver2 resolver) {
        this.resolver = resolver;
    }

#No. 379
#File: XIncludeTransformer.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @return the contentHandler
     */

#Code:
    public ContentHandler getContentHandler() {
        return contentHandler;
    }

#No. 380
#File: XIncludeTransformer.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @return the lexicalHandler
     */

#Code:
    public LexicalHandler getLexicalHandler() {
        if (lexicalHandler == null) {
            lexicalHandler = new DummyLexicalHandler();
        }

        return lexicalHandler;
    }
	
#No. 381
#File: XfsVersion.java

#Comment:
	/**
	 * Greater than
	 *
	 * @param version
	 * @return
	 */

#Code:
	public boolean isGT(final XfsVersion version) {
		return compareTo(version) > 0;
	}
	
#No. 382
#File: XfsVersion.java

#Comment:
	/**
	 * Greater than or equal to
	 *
	 * @param version
	 * @return true if {@link #compareTo(XfsVersion)} returns &gt;= 0, false
	 *         otherwise
	 */

#Code:
	public boolean isGE(final XfsVersion version) {
		return compareTo(version) >= 0;
	}
	
#No. 383
#File: XC_MethodReplacement.java

#Comment:
    /**
     * Creates a callback which always returns a specific value
     */

#Code:
    public static XC_MethodReplacement returnConstant(final Object result) {
        return returnConstant(PRIORITY_DEFAULT, result);
    }
	
#No. 384
#File: Xcss2EcssConverter.java

#Comment:
        /**
         * Constructor
         *
         * @param handler - DefaultHandler for the SAX parser
         * @throws javax.xml.parsers.ParserConfigurationException
         *
         * @throws org.xml.sax.SAXException
         */

#Code:
        public CreateParser(DefaultHandler handler) throws SAXException, ParserConfigurationException {
            this.handler = handler;
            create();
        }
		
#No. 385
#File: XCallback.java

#Comment:
		/**
		 * This can be used to store anything for the scope of the callback.
		 * Use this instead of instance variables.
		 * @see #getObjectExtra
		 * @see #setObjectExtra
		 */

#Code:
		public synchronized Bundle getExtra() {
			if (extra == null)
				extra = new Bundle();
			return extra;
		}
		
#No. 386
#File: XBaseAdapter.java

#Comment:
    /**
     * Whether it just came in to refresh
     */

#Code:
    public XBaseAdapter<T> refresh() {
        if (isLoad() && pullRefreshEnabled && mLoadingListener != null) {
            if (mEmptyView != null) {
                mEmptyView.setVisibility(View.GONE);
            }
            if (mNetWorkErrorView != null) {
                mNetWorkErrorView.setVisibility(View.GONE);
            }
            if (recyclerView != null) {
                recyclerView.setVisibility(View.VISIBLE);
            }
            refreshView.setState(XRefreshView.REFRESH);
            refreshView.onMove(refreshView.getMeasuredHeight());
            mLoadingListener.onRefresh();
            loadMoreView.setVisibility(View.GONE);
            loadMoreView.setState(XLoadMoreView.NORMAL);
        }
        return this;
    }
	
#No. 387
#File: XAxisRendererRadarChart.java

#Comment:
	/**
	 * XAxis LimitLines on RadarChart not yet supported.
	 *
	 * @param c
	 */

#Code:
	@Override
	public void renderLimitLines(Canvas c) {
		// this space intentionally left blank
	}

#No. 388
#File: X509CertSelector.java

#Comment:
    /**
     * <strong>Denigrated</strong>, use {@linkplain #getIssuer()} or
     * {@linkplain #getIssuerAsBytes()} instead. This method should not be
     * relied on as it can fail to match some certificates because of a loss of
     * encoding information in the RFC 2253 String form of some distinguished
     * names.
     */

#Code:
    public String getIssuerAsString() {
        return (issuer == null ? null : issuer.getName());
    }
	
#No. 389
#File: X500NameUtilsTest.java

#Comment:
	/**
	 *  
	 *  CN      commonName (2.5.4.3)
	 *  L       localityName (2.5.4.7)
	 *  ST      stateOrProvinceName (2.5.4.8)
	 *  O       organizationName (2.5.4.10)
	 *  OU      organizationalUnitName (2.5.4.11)
	 *  C       countryName (2.5.4.6)
	 *  STREET  streetAddress (2.5.4.9)
	 *  DC      domainComponent (0.9.2342.19200300.100.1.25)
	 *  UID     userId (0.9.2342.19200300.100.1.1)
	 */

#Code:
	@Test
	public void testDNs()
	{
		String dnA[] = {
				"CN=James \\\"Jim\\\" Smith\\, III,DC=net,L=Before\0dAfter,1.3.6.1.4.1.1466.0=#04024869,ST=Lu\\C4\\8Di\\C4\\87,O=org,OU=OtherUnit,C=Country+STREET=Multi valued Avenue+0.9.2342.19200300.100.1.1=multiValuedUid,EMAIL=email@is.also.recognized",
				"CN=James \\\"Jim\\\" Smith\\, III,DC=NET,L=Before\0dAfter,1.3.6.1.4.1.1466.0=#04024869,ST=Lu\\C4\\8Di\\C4\\87,O=org,OU=OtherUnit,C=Country+STREET=Multi valued Avenue+0.9.2342.19200300.100.1.1=multiValuedUid,EMAIL=email@is.ALSO.recognized",
				"CN=James \\\"Jim\\\" Smith\\, III, DC=net,L=Before\0dAfter,1.3.6.1.4.1.1466.0=#04024869,ST=Lu\\C4\\8Di\\C4\\87,O=org,OU=OtherUnit,C=Country+STREET=Multi valued Avenue+0.9.2342.19200300.100.1.1=multivaluedUid,EMAIL=email@is.also.recognized",
		};
		
		checkAll(true, dnA);
		
		String src = "CN=Ala ma kota, DC=nEt,EMAIL=golBi@localhost+DC=FFFF+C=PL,DC=kkL,EMAILADDRESS=ss@asddsfdsDDDD";
		String normalized = DNComparator.preNormalize(src);
		X500Principal x500 = new X500Principal(normalized);
		String dnB[] = {
				src,
				normalized,
				x500.getName(),
				x500.getName(X500Principal.CANONICAL),
				new X500Principal(src).getName(),
				new X500Principal(src).getName(X500Principal.CANONICAL)
		};
		
		checkAll(true, dnB);
		
		String dn1 = "EMAIL=e@at";
		String dn2 = "EMAIL=E@At";
		dn1 = new X500Principal(dn1).getName(X500Principal.CANONICAL);
		dn2 = new X500Principal(dn2).getName(X500Principal.CANONICAL);
		
		assertTrue(X500NameUtils.equal(dn1, dn2));
	}
	
#No. 390
#File: WXTabPage.java

#Comment:
    /**
     * tab-items: [
     http://www.baidu.com?title=,
     http://www.baidu.com?title=,
     http://www.baidu.com?title=,
     http://www.baidu.com?title=,
     * ]
     */

#Code:
    @WXComponentProp(name= "pageContents")
    public void setContent(List<String> tabUri){
        List<TabAdapter.TabInfo> list = new ArrayList<>();

        if(tabUri != null && tabUri.size() > 0){
            for (String uri : tabUri){
                Uri parse = Uri.parse(uri);
                String title = parse.getQueryParameter("title");

                if(!TextUtils.isEmpty(title)){
                    TabAdapter.TabInfo tabInfo = new TabAdapter.TabInfo(title, getFragment(parse));
                    list.add(tabInfo);
                }
            }
        }
        notifyDataChanged(list);
    }
	
#No. 391
#File: WXSDKEngine.java

#Comment:
  /**
   * Deprecated  Use {@link #initialize(Application, InitConfig)} instead.
   */

#Code:
  @Deprecated
  public static void init(Application application) {
    init(application, null);
  }

#No. 392
#File: WXSDKEngine.java

#Comment:
  /**
   * Deprecated Use {@link #initialize(Application, InitConfig)} instead.
   */

#Code:
  @Deprecated
  public static void init(Application application, IWXUserTrackAdapter utAdapter) {
    init(application, utAdapter, null);
  }

#No. 393
#File: WXSDKEngine.java

#Comment:
  /**
   * Deprecated Use {@link #initialize(Application, InitConfig)} instead.
   */

#Code:
  @Deprecated
  public static void init(Application application, IWXUserTrackAdapter utAdapter, String framework) {
    initialize(application,
      new InitConfig.Builder()
        .setUtAdapter(utAdapter)
        .build()
    );
  }
  
#No. 394
#File: WXListComponent.java

#Comment:
    /**
     * Forbid ViewHolder cache if viewType > MAX_VIEWTYPE_ALLOW_CACHE
     * @param viewType
     */

#Code:
    private void checkRecycledViewPool(int viewType) {
        try {
            if (mViewTypes.size() > MAX_VIEWTYPE_ALLOW_CACHE)
                mAllowCacheViewHolder = false;

            if (mDownForBidCacheViewHolder)
                if (getHostView() != null && getHostView().getInnerView() != null)
                    getHostView().getInnerView().getRecycledViewPool().setMaxRecycledViews(viewType, 0);

            if (!mDownForBidCacheViewHolder) {
                if (!mAllowCacheViewHolder) {
                    if (getHostView() != null && getHostView().getInnerView() != null) {
                        for (int i = 0; i < mViewTypes.size(); i++) {
                            getHostView().getInnerView().getRecycledViewPool().setMaxRecycledViews(mViewTypes.keyAt(i), 0);
                        }
                        mDownForBidCacheViewHolder = true;
                    }
                }
            }
        } catch (Exception e) {
            WXLogUtils.e(TAG, "Clear recycledViewPool error!");
        }
    }
	
#No. 395
#File: WxErrorController.java

#Comment:
    /**
     * Supports other formats like JSON, XML
     * @param request
     */

#Code:
    @RequestMapping(value = ERROR_PATH)
    @ResponseBody
    public ResponseEntity<Map<String, Object>> error(
            HttpServletRequest request) {
        Map<String, Object> body = this.getErrorAttributes(request,
            this.getTraceParameter(request));
        HttpStatus status = this.getStatus(request);
        return new ResponseEntity<>(body, status);
    }
	
#No. 396
#File: WxErrorController.java

#Comment:
    /**
     * Supports the HTML Error View
     * @param request
     */

#Code:
    @RequestMapping(value = ERROR_PATH, produces = "text/html")
    public ModelAndView errorHtml(HttpServletRequest request) {
        return new ModelAndView("error",
            this.getErrorAttributes(request, false));
    }
	
#No. 397
#File: WXCustomStyleSpan.java

#Comment:
  /**
   * Returns {@link Typeface#NORMAL} or {@link Typeface#BOLD}.
   */

#Code:
  public int getWeight() {
    return (mWeight == WXStyle.UNSET ? 0 : mWeight);
  }
  
#No. 398
#File: WXCustomStyleSpan.java

#Comment:
  /**
   * Returns {@link Typeface#NORMAL} or {@link Typeface#ITALIC}.
   */

#Code:
  public int getStyle() {
    return (mStyle == WXStyle.UNSET ? 0 : mStyle);
  }
  
#No. 399
#File: WsMessageHandler.java

#Comment:
    /**
     * When a message is sent into the app by the connected user this is
     * invoked.
     */

#Code:
    @Override
    protected void channelRead0(ChannelHandlerContext ctx, WebSocketFrame frame) throws Exception
    {
        logger.info("GOT. " + frame);
        if (frame instanceof TextWebSocketFrame){
            TextWebSocketFrame text = (TextWebSocketFrame)frame;
            logger.info(text.text());
            ChannelFuture future = ctx.channel().writeAndFlush(new TextWebSocketFrame(text.text()));
            future.addListener(new GenericFutureListener<Future<Void>>() {
                @Override
                public void operationComplete(Future<Void> future) throws Exception {
                    logger.info("write to channels successful");
                }
            });

        }else if(frame instanceof BinaryWebSocketFrame){
            BinaryWebSocketFrame b = (BinaryWebSocketFrame)frame;
            try {
                this.handleMessage(ctx, b.content());
            } catch (Exception e) {
                logger.error(e.getMessage(), e);
            }
        }
    }
	
#No. 400
#File: WSDLService.java

#Comment:
	/**
	 * Service type : WSDl, REST ...
	 * @return
	 */

#Code:
	public String getType(){
		return type;
	}
	
#No. 401
#File: Wsdl2HtmlITCase.java

#Comment:
	/**
	 * http://www.service-repository.com/
	 * 
	 * @throws Exception
	 */

#Code:
	@Test
	public void testPublicWsdls() throws Exception {
		doGenerate("https://webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl", "AWSECommerceService.html");
		doGenerate("http://www.webservicex.com/globalweather.asmx?wsdl", "globalweather.html");
		doGenerate("http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL", "Weather.html");
		doGenerate("http://www.thomas-bayer.com/axis2/services/BLZService?wsdl", "BLZService.html");
		doGenerate("http://soaptest.parasoft.com/calculator.wsdl", "calculator.html");
		doGenerate("http://www.dneonline.com/calculator.asmx?WSDL", "calculator.html");
		doGenerate("https://community.workday.com/custom/developer/API/Absence_Management/v26.2/Absence_Management.wsdl", "Absence_Management.html");
		doGenerate("http://www.webservicex.com/periodictable.asmx?wsdl", "periodictable.html");
		doGenerate("http://ws.cdyne.com/ip2geo/ip2geo.asmx?wsdl", "ip2geo.html");
	}
	
#No. 402
#File: WriteTagActivity.java

#Comment:
    /*
     * **** WRITING MODE METHODS ****
     */

#Code:

    private View.OnClickListener mTagWriter = new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
        	if (mEditTextData.getText().toString().trim().length() == 0) {
        		Toast.makeText(WriteTagActivity.this, "The data to write is empty. Please fill it!", Toast.LENGTH_LONG).show();
        	} else {
        		enableTagWriteMode();
        	}
        }
    };    

#No. 403
#File: WriteTagActivity.java

#Comment:
    /*
     * **** HELPER METHODS ****
     */    

#Code:
    
    private void checkNfcEnabled() {
        Boolean nfcEnabled = mNfcAdapter.isEnabled();
        if (!nfcEnabled) {
            new AlertDialog.Builder(WriteTagActivity.this)
                    .setTitle(getString(R.string.text_warning_nfc_is_off))
                    .setMessage(getString(R.string.text_turn_on_nfc))
                    .setCancelable(false)
                    .setPositiveButton(getString(R.string.text_update_settings),
                            new DialogInterface.OnClickListener() {
                                public void onClick(DialogInterface dialog, int id){
                                    startActivity(new Intent( android.provider.Settings.ACTION_WIRELESS_SETTINGS));
                                }
                            }).create().show();
        }
    }    

#No. 404
#File: WriteTests.java

#Comment:
	/**
	 * <p>
	 *    Constructor
	 * </p>
	 */

#Code:
	public WriteTests(){
		log = Logger.getLogger(this.getClass().getCanonicalName());
	}
	
#No. 405
#File: WriterNode.java

#Comment:
    /**
     * Constructor.
     *
     * @param writer the transformer writer.
     * @param metadataCacheWriter the metadata cache writer.
     * @param metadataKey the transformation metadata cache key to use.
     * @param fallBackRowMetadata fallback raw metadata to be able to write an empty content even if no row/rowMetadata id
     * received.
     */

#Code:
    public WriterNode(final TransformerWriter writer, final ConfiguredCacheWriter metadataCacheWriter,
            final ContentCacheKey metadataKey, RowMetadata fallBackRowMetadata) {
        this.writer = writer;
        this.metadataCacheWriter = metadataCacheWriter;
        this.metadataKey = metadataKey;
        this.fallBackRowMetadata = fallBackRowMetadata;
    }

#No. 406
#File: WriterNode.java

#Comment:
    /**
     * Synchronized method not to clash with the signal method.
     *
     * @see WriterNode#signal(Signal)
     * @see RuntimeNode#receive(DataSetRow, RowMetadata)
     */

#Code:
    @Override
    public synchronized void receive(DataSetRow row, RowMetadata metadata) {

        // do not write this row if the writer is stopped
        if (isStopped.get()) {
            LOGGER.debug("already finished or canceled, let's skip this row");
            return;
        }

        final long start = System.currentTimeMillis();
        try {
            if (!startRecords) {
                writer.startObject();
                writer.fieldName("records");
                writer.startArray();
                startRecords = true;
            }
            lastRowMetadata = metadata;
            if (row.shouldWrite()) {
                writer.write(row);
                super.receive(row, metadata);
            }
        } catch (IOException e) {
            LOGGER.error("Unable to write record.", e);
        } finally {
            totalTime += System.currentTimeMillis() - start;
            count++;
        }
    }

#No. 407
#File: WriterNode.java

#Comment:
    /**
     * Synchronized method not to clash with the receive method.
     *
     * @see WriterNode#receive(DataSetRow, RowMetadata)
     * @see RuntimeNode#signal(Signal)
     */

#Code:
    @Override
    public synchronized void signal(Signal signal) {

        LOGGER.debug("receive {}", signal);

        switch (signal) {
        case END_OF_STREAM:
            endOfStream();
            break;
        case CANCEL:
            cancel();
            break;
        default:
            LOGGER.debug("Unhandled signal {}.", signal);
        }

        super.signal(signal);
    }
	
#No. 408
#File: WriteCandidateTx.java

#Comment:
    /**
     * This has to be non blocking since it is called from a callback on commit
     * and its netty threadpool that is really sensitive to blocking calls.
     */

#Code:
    private void unlock() {
        netOps.unlockCandidate(new NetconfRpcFutureCallback("Unlock candidate", id));
    }
	
#No. 409
#File: WriteCacheFilter.java

#Comment:
    /**
     * Quick fix for <a href="https://github.com/stormpath/stormpath-sdk-java/issues/17">Issue #17</a>.
     *
     */

#Code:
    private boolean isDirectlyCacheable(Class<? extends Resource> clazz, Map<String, ?> data) {

        return AbstractResource.isMaterialized(data) &&
               (!CollectionResource.class.isAssignableFrom(clazz) ||
                (CollectionResource.class.isAssignableFrom(clazz) && isCollectionCachingEnabled()));
    }
	
#No. 410
#File: WriteAttributesSetStatement.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @param fieldName the fieldName to set
     */

#Code:
    public void setFieldName(String fieldName) {
        this.fieldName = fieldName;
    }

#No. 411
#File: WriteAttributesSetStatement.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @return the attributes
     */

#Code:
    public Collection<PassThrough> getAttributes() {
        return this.attributes;
    }

#No. 412
#File: WriteAttributeStatement.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @return the defaultValue
     */

#Code:
    public String getDefaultValue() {
        // TODO - convert to Java syntax according to type.
        return this.defaultValue;
    }

#No. 413
#File: WriteAttributeStatement.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @param iterable the events to set
     */

#Code:
    public void setEvents(Iterable<String> iterable) {
        this.events = iterable;
    }

#No. 414
#File: WriteAttributeStatement.java

#Comment:
    /**
     * <p class="changed_added_4_0">
     * </p>
     *
     * @return the events
     */

#Code:
    public Iterable<String> getEvents() {
        return this.events;
    }

	
#No. 415
#File: WResource.java

#Comment:
	/*
	 * URI Path
	 **/

#Code:
	public static String getResourceInRes(String filename){
		return Thread.currentThread().getContextClassLoader().getResource("res/" + filename).toString();
	}

#No. 416
#File: WrapperExecuteBatchWithCollection.java

#Comment:
  /**
   * Standard Konstruktor.
   */

#Code:
  public WrapperExecuteBatchWithCollection( String pSqlString, CallableStatementProvider pCallableStatementProvider, Collection pParameterCollection )
  {
    super( pSqlString, pCallableStatementProvider );

    _parameterCollectionIterator = pParameterCollection.iterator();
  }

#No. 417
#File: WrapperExecuteBatchWithSimpleCollection.java

#Comment:
  /**
   * Standard Konstruktor.
   */

#Code:
  public WrapperExecuteBatchWithSimpleCollection( String pSqlString, CallableStatementProvider pCallableStatementProvider, Collection pParameterCollection )
  {
    super( pSqlString, pCallableStatementProvider, pParameterCollection );
  }
  

#No. 418
#File: WpadProxySearchStrategy.java

#Comment:
  /*************************************************************************
   * Constructor
   ************************************************************************/

#Code:

  public WpadProxySearchStrategy() {
    super();
  }

#No. 419
#File: WoTOwnMessageList.java

#Comment:
	/**
	 * Only to be used by the WoTMessageManager, which provides the necessary synchronization.
	 */

#Code:
	protected synchronized void incrementInsertIndex() {
		long freeIndex = mFreetalk.getMessageManager().getFreeOwnMessageListIndex(getAuthor());
		
		checkedActivate(1);
		
		mIndex = Math.max(mIndex+1, freeIndex);
		mID = MessageListID.construct(getAuthor(), mIndex).toString();
		
		// TODO: Optimization: This is debug code which was added on 2011-02-13 for preventing DuplicateMessageListException, it can be removed after some months if they do not happen.
		try {
			final MessageList existingList = mFreetalk.getMessageManager().getOwnMessageList(mID);
			throw new RuntimeException("getFreeOwnMessageListIndex reported non-free index, taken by: " + existingList);
		} catch(NoSuchMessageListException e) {}
		
		storeWithoutCommit();
	}

#No. 420
#File: WoTOldMessageListFetcher.java

#Comment:
	/**
	 * You have to synchronize on this <code>WoTMessageFetcher</code> when using this function.
	 */

#Code:
	private void fetchMessageList(WoTIdentity identity, long index) throws FetchException {
		synchronized(mIdentities) {
			// mIdentities contains up to IDENTITIES_LRU_QUEUE_SIZE_LIMIT identities of which we have recently downloaded MessageLists. This queue is used to ensure
			// that we download MessageLists from different identities and not always from the same ones. 
			// The oldest identity falls out of the LRUQueue if it has reached it size limit and therefore MessageList downloads from that one are allowed again.
			
			// We do not disallow fetches from the given identity if it is in the LRUQueue: This is done by iterate() which iterates with a delay of THREAD_PERIOD.
			// - By not disallowing the fetches from the given identity here, we can make onSuccess()/onFailure() download the next message list of the identity. 
		 
			if(mIdentities.size() >= IDENTITIES_LRU_QUEUE_SIZE_LIMIT) {
				// We first checked whether the identity was in the queue because if the given identity is already in the pipeline then downloading a list from it
				// should NOT cause a different identity to fall out - the given identity should be moved to the top and the others should stay in the pipeline.
				if(!mIdentities.contains(identity.getID()))
					mIdentities.pop();
			}
			
			mIdentities.push(identity.getID()); // put this identity at the beginning of the LRUQueue
		}
		
		FreenetURI uri = WoTMessageList.generateURI(identity, index).sskForUSK(); // We must use a SSK to disallow redirects.
		FetchContext fetchContext = mClient.getFetchContext();
		fetchContext.maxSplitfileBlockRetries = 2; /* 3 and above or -1 = cooldown queue. -1 is infinite */
		fetchContext.maxNonSplitfileRetries = 2;
		fetchContext.maxOutputLength = WoTMessageListXML.MAX_XML_SIZE; // TODO: fetch() also takes a maxSize parameter, why?
		ClientGetter g = mClient.fetch(uri, WoTMessageListXML.MAX_XML_SIZE, mRequestClient, this, fetchContext, RequestStarter.IMMEDIATE_SPLITFILE_PRIORITY_CLASS);
		addFetch(g);
		Logger.normal(this, "Trying to fetch MessageList from " + uri);
		
		// Not necessary because it's not a HashSet but a fixed-length queue so the identity will get removed sometime anyway.
		//catch(RuntimeException e) {
		//	mIdentities.removeKey(identity);
		//}
	}

#No. 421
#File: WoTMessageManager.java

#Comment:
	/**
	 * This function is not synchronized to allow calls to it when only having locked a {@link Board} and not the whole MessageManager.
	 */

#Code:
	@Override public WoTMessageRating getMessageRating(
			final OwnIdentity rater, final Message message) throws NoSuchMessageRatingException {
		
		if(!(rater instanceof WoTOwnIdentity))
			throw new IllegalArgumentException("No WoT identity: " + rater);
		
		if(!(message instanceof WoTMessage))
			throw new IllegalArgumentException("No WoT message: " + message);
		
		final Query query = db.query();
		query.constrain(WoTMessageRating.class);
		query.descend("mRater").constrain(rater).identity();
		query.descend("mMessage").constrain(message).identity();
		final InitializingObjectSet<WoTMessageRating> result = new Persistent.InitializingObjectSet<WoTMessageRating>(mFreetalk, query);
		
		switch(result.size()) {
			case 0: throw new NoSuchMessageRatingException();
			case 1: return result.next();
			default: throw new DuplicateElementException("Duplicate rating from " + rater + " of " + message);
		}
	}
	
#No. 422
#File: WoTMessageManager.java

#Comment:
	/**
	 * For being used in JUnit tests to run without a node.
	 */

#Code:
	public WoTMessageManager(Freetalk myFreetalk) {
		super(myFreetalk);
		mRequestClient = null;
	}

#No. 423
#File: WoTMessageManager.java

#Comment:
	/**
	 * Only for being used by the MessageManager itself and by unit tests.
	 */

#Code:
	@Override protected synchronized void clearExpiredFetchFailedMarkers() {
		super.clearExpiredFetchFailedMarkers();
	}

	@Override public WoTOwnMessage postMessage(
			MessageURI myParentThreadURI, Message myParentMessage, Set<Board> myBoards,
			Board myReplyToBoard, OwnIdentity myAuthor, String myTitle, Date myDate, String myText,
			List<Attachment> myAttachments) throws Exception {
		
		WoTOwnMessage m;
		
		if(myParentThreadURI != null && !(myParentThreadURI instanceof WoTMessageURI))
			throw new IllegalArgumentException("Parent thread URI is no WoTMessageURI: " + myParentThreadURI);
		
		if(myParentMessage != null && !(myParentMessage instanceof WoTMessage))
			throw new IllegalArgumentException("Parent message is no WoTMessage");
		
		if(!(myAuthor instanceof WoTOwnIdentity))
			throw new IllegalArgumentException("Author is no WoTOwnIdentity");

		Date date = myDate!=null ? myDate : CurrentTimeUTC.get();
		m = WoTOwnMessage.construct(mFreetalk, (WoTMessageURI)myParentThreadURI, myParentMessage, myBoards, myReplyToBoard, myAuthor, myTitle, date, myText, myAttachments);
		m.initializeTransient(mFreetalk);
		synchronized(this) {
			m.storeAndCommit();
		}

		if(mFreetalk != null) {
			PersistentTaskManager taskManager = mFreetalk.getTaskManager();
			if(taskManager != null)
				taskManager.onOwnMessagePosted(m);
		}
		
		/* We do not add the message to the boards it is posted to because the user should only see the message if it has been downloaded
		 * successfully. This helps the user to spot problems: If he does not see his own messages we can hope that he reports a bug */
		
		return m;
	}

#No. 424
#File: WoTMessageManager.java

#Comment:
	/**
	 * You have to synchronize on this MessageManager and on Persistent.transactionLock(db) when using this function.
	 */

#Code:
	private void addMessageToMessageList(WoTOwnMessage message) {
		Query query = db.query();
		query.constrain(WoTOwnMessageList.class);
		query.descend("mAuthor").constrain(message.getAuthor()).identity();
		query.descend("mWasInserted").constrain(false);
		query.descend("mIsBeingInserted").constrain(false);
		
		for(WoTOwnMessageList list : new Persistent.InitializingObjectSet<WoTOwnMessageList>(mFreetalk, query)) {
			try {
				synchronized(list) {
				list.addMessage(message);
				list.storeWithoutCommit();
				}
				if(logDEBUG) Logger.debug(this, "Added own message " + message + " to list " + list);
				return;
			}
			catch(RuntimeException e) {
				/* The list is full. */
				if(logDEBUG) Logger.debug(this, "Not adding message " + message.getID() + " to message list " + list.getID(), e);
			}
		}
		
		WoTOwnIdentity author = (WoTOwnIdentity)message.getAuthor();
		WoTOwnMessageList list = new WoTOwnMessageList(author, getFreeOwnMessageListIndex(author));
		list.initializeTransient(mFreetalk);
		
		// TODO: Optimization: This is debug code which was added on 2011-02-13 for preventing DuplicateMessageListException, it can be removed after some months if they do not happen.
		try {
			final MessageList existingList = mFreetalk.getMessageManager().getOwnMessageList(list.getID());
			throw new RuntimeException("getFreeOwnMessageListIndex reported non-free index, taken by: " + existingList);
		} catch(NoSuchMessageListException e) {}
		
		list.addMessage(message);
		list.storeWithoutCommit();
		if(logDEBUG) Logger.debug(this, "Found no list with free space, created the new list " + list.getID() + " for own message " + message.getID());
	}
	
#No. 425
#File: WoTMessageFetcher.java

#Comment:
	/**
	 * This method must be synchronized because onFailure is synchronized and TransferThread calls abortAllTransfers() during shutdown without
	 * synchronizing on this object.
	 */

#Code:
	@Override
	protected synchronized void abortAllTransfers() {
		super.abortAllTransfers();
		mMessageLists.clear();
		mMessages.clear();
	}

#No. 426
#File: WoTMessageFetcher.java

#Comment:
	/**
	 * You have to synchronize on this <code>WoTMessageFetcher</code> when using this function.
	 */

#Code:
	@Override
	protected void removeFetch(ClientGetter g) {
		super.removeFetch(g);
		mMessageLists.remove(g);
		mMessages.remove(g.getURI());
	}

#No. 427
#File: WoTMessageInserter.java

#Comment:
	/**
	 * You have to synchronize on this <code>WoTMessageInserter</code> when using this function.
	 */

#Code:
	@Override
	protected void removeInsert(BaseClientPutter p) {
		super.removeInsert(p);
		mMessageIDs.remove(mPutterMessageIDs.remove(p));
	}
	
#No. 428
#File: WoTIdentityManager.java

#Comment:
	/**
	 * Not synchronized, the involved identity might be deleted during the query - which is not really a problem.
	 */

#Code:
	public int getReceivedTrustsCount(Identity trustee) throws Exception {
		SimpleFieldSet request = new SimpleFieldSet(true);
		request.putOverwrite("Message", "GetTrustersCount");
		request.putOverwrite("Identity", trustee.getID());
		request.putOverwrite("Context", Freetalk.WOT_CONTEXT);		
		
		try {
			SimpleFieldSet answer = sendFCPMessageBlocking(request, null, "TrustersCount").params;
			return Integer.parseInt(answer.get("Value"));
		}
		catch(PluginNotFoundException e) {
			throw new WoTDisconnectedException();
		}

	}
	
#No. 429
#File: WoTIdentityManager.java

#Comment:
	/**
	 * Not synchronized, the involved identity might be deleted during the query - which is not really a problem.
	 */

#Code:
	public List<WoTTrust> getReceivedTrusts(Identity trustee) throws Exception {
		List<WoTTrust> result = new ArrayList<WoTTrust>();

		SimpleFieldSet request = new SimpleFieldSet(true);
		request.putOverwrite("Message", "GetTrusters");
		request.putOverwrite("Context", "");
		request.putOverwrite("Identity", trustee.getID());
		try {
			SimpleFieldSet answer = sendFCPMessageBlocking(request, null, "Identities").params;
			for(int idx = 0; ; idx++) {
				String id = answer.get("Identity"+idx);
				if(id == null || id.equals("")) /* TODO: Figure out whether the second condition is necessary */
					break;
				try {
					final WoTTrust trust = new WoTTrust(getIdentity(id), trustee, (byte)Integer.parseInt(answer.get("Value"+idx)), 
							answer.get("Comment"+idx));
					mWoTCache.putTrust(trust);
					result.add(trust);
				} catch (NoSuchIdentityException e) {
				} catch (InvalidParameterException e) {
				}
			}
		}
		catch(PluginNotFoundException e) {
			throw new WoTDisconnectedException();
		}
		return result;
	}
	

#No. 430
#File: WoTIdentity.java

#Comment:
	/**
	 * You have to synchronize on this object before modifying the identity and calling storeAndCommit. 
	 */

#Code:
	public void storeAndCommit() {
		synchronized(Persistent.transactionLock(mDB)) {
			storeWithoutCommit();
			checkedCommit(this);
		}
	}

#No. 431
#File: WoTIdentityManager.java

#Comment:
	/**
	 * Not synchronized, the involved identities might be deleted during the query - which is not really a problem.
	 */

#Code:
	private String getProperty(OwnIdentity truster, Identity target, String property) throws Exception {
		SimpleFieldSet sfs = new SimpleFieldSet(true);
		sfs.putOverwrite("Message", "GetIdentity");
		sfs.putOverwrite("Truster", truster.getID());
		sfs.putOverwrite("Identity", target.getID());

		return sendFCPMessageBlocking(sfs, null, "Identity").params.get(property);
	}

#No. 432
#File: WoTIdentityManager.java

#Comment:
	/**
	 * Not synchronized, the involved identities might be deleted during the query - which is not really a problem.
	 */

#Code:
	public int getScore(final WoTOwnIdentity truster, final WoTIdentity trustee) throws NotInTrustTreeException, Exception {
		if(mIsUnitTest)
			return 0;
		
		final String score = getProperty(truster, trustee, "Score");
		
		if(score.equals("null"))
			throw new NotInTrustTreeException(truster, trustee);
		
		final int value = Integer.parseInt(score);
		mWoTCache.putScore(truster, trustee, value);
		return value;
	}

#No. 433
#File: WoTIdentityManager.java

#Comment:
	/**
	 * Not synchronized, the involved identities might be deleted during the query - which is not really a problem.
	 */

#Code:
	public byte getTrust(final WoTOwnIdentity truster, final WoTIdentity trustee) throws NotTrustedException, Exception {
		if(mIsUnitTest)
			return 0;
		
		final String trust = getProperty(truster, trustee, "Trust");
		
		if(trust.equals("null"))
			throw new NotTrustedException(truster, trustee);
		
		final byte value = Byte.parseByte(trust);
		mWoTCache.putTrust(truster, trustee, value);
		return value;
	}

#No. 434
#File: WoTIdentityManager.java

#Comment:
	/**
	 * Not synchronized, the involved identities might be deleted during the query or some other WoT client might modify the trust value
	 * during the query - which is not really a problem, you should not be modifying trust values of your own identity with multiple clients simultaneously.
	 */

#Code:
	public void setTrust(OwnIdentity truster, Identity trustee, byte trust, String comment) throws Exception {
		WoTOwnIdentity wotTruster = (WoTOwnIdentity)truster;
		WoTIdentity wotTrustee = (WoTIdentity)trustee;
		
		SimpleFieldSet request = new SimpleFieldSet(true);
		request.putOverwrite("Message", "SetTrust");
		request.putOverwrite("Truster", wotTruster.getID());
		request.putOverwrite("Trustee", wotTrustee.getID());
		request.putOverwrite("Value", Integer.toString(trust));
		request.putOverwrite("Comment", comment);

		sendFCPMessageBlocking(request, null, "TrustSet");
		mWoTCache.putTrust(wotTruster, wotTrustee, trust);
	}

#No. 435
#File: WorldTypeScary.java

#Comment:
    /**
     * Should world creation GUI show 'Customize' button for this world type?
     * 
     */

#Code:
    public boolean isCustomizable()
    {
        return true;
    }
	
#No. 436
#File: WorldProviderCaves.java

#Comment:
	/**
	 * Returns true if the given X,Z coordinate should show environmental fog.
	 */

#Code:
	@Override
	@SideOnly(Side.CLIENT)
	public boolean doesXZShowFog(int par1, int par2)
	{
		return true;
	}

#No. 437
#File: WorldProviderCaves.java

#Comment:
	/**
	 * Returns 'true' if in the "main surface world", but 'false' if in the Nether or End dimensions.
	 */

#Code:
	@Override
	public boolean isSurfaceWorld()
	{
		return false;
	}

#No. 438
#File: WorldProviderCaves.java

#Comment:
	/**
	 * Will check if the x, z position specified is alright to be set as the map spawn point
	 */

#Code:
	@Override
	public boolean canCoordinateBeSpawn(int par1, int par2)
	{
		return false;
	}

#No. 439
#File: WorldProviderCaves.java

#Comment:
	/**
	 * Calculates the angle of sun and moon in the sky relative to a specified time (usually worldTime)
	 */

#Code:
	@Override
	public float calculateCelestialAngle(long par1, float par3)
	{
		return 0.5F;
	}
	
#No. 440
#File: WorldGenMTreeBase.java

#Comment:
    /**
     * Directions are:
     * 0 = up/down (Y)
     * 4 = east/west (X)
     * 8 = north/south (Z)
     */

#Code:
    protected void setBlockLog(BlockPos pos, int direction){
    	try{
			if(world.getBlockState(pos).getBlock().isReplaceable(world, pos) ||
					world.isAirBlock(pos) ||
					world.getBlockState(pos).getBlock() instanceof BlockHighlandsSapling){
				world.setBlockState(pos, wood.getStateFromMeta(woodMeta+direction));
			}
    	}
    	catch(RuntimeException e){
    		System.out.println("Error: Tree block couldn't generate!");
    		//e.printStackTrace();
    	}
    }
	
#No. 441
#File: WorkQueueFrontier.java

#Comment:
    /**
     * Force logging, etc. of operator- deleted CrawlURIs
     * 
     * @see org.archive.crawler.framework.Frontier#deleted(org.archive.modules.CrawlURI)
     */

#Code:
    public void deleted(CrawlURI curi) {
        //treat as disregarded
        appCtx.publishEvent(
            new CrawlURIDispositionEvent(this,curi,DISREGARDED));
        log(curi);
        incrementDisregardedUriCount();
        curi.stripToMinimal();
        curi.processingCleanup();
    }
	
#No. 442
#File: Workpool.java

#Comment:
   /**
    * NOTE: Name & Id are always unique.
    *
    * @param other
    * @return
    */

#Code:
   @Override
   public int compareTo(Workpool other) {
      if (other == this) {
         return 0;
      }
      if (other == null) {
         return 1;
      }
      return this.getName().compareTo(other.getName());
   }
   
#No. 443
#File: WorkerQualityReport.java

#Comment:
	/**
	 * TODO Smells bad
	 */

#Code:
	private void writeEstimatedConfusionMatrix(ReportTarget reportTarget, Worker w) {
		reportTarget.println("Estimated Confusion Matrix:");
		for (String correct_name : w.getDs().getCategories().keySet()) {
			for (String assigned_name : w.getDs().getCategories().keySet()) {
				Double cm_entry = w.getErrorRate(correct_name,
						assigned_name);
				String s_cm_entry = Double.isNaN(cm_entry) ? "---" : Helper.round(100 * cm_entry, 3).toString();
				reportTarget.print("P[" + correct_name + "->" + assigned_name + "]="
						+ s_cm_entry + "%%\t");
			}
			reportTarget.println("");
		}
	}
	
#No. 444
#File: WorkerQualityReport.java

#Comment:
	/**
	 * TODO Smells bad
	 */

#Code:
	private void writeEvalConfusionMatrix(ReportTarget reportTarget, Worker w) {
		reportTarget.println("Actual Confusion Matrix (evaluation data):");
		for (String correct_name : w.getDs().getCategories().keySet()) {
			for (String assigned_name : w.getDs().getCategories().keySet()) {
				Double cm_entry = w.getErrorRate_Eval(correct_name,
						assigned_name);
				String s_cm_entry = Double.isNaN(cm_entry) ? "---" : Helper.round(100 * cm_entry, 3).toString();
				reportTarget.print("P[" + correct_name + "->" + assigned_name + "]="
						+ s_cm_entry + "%%\t");
			}
			reportTarget.println("");
		}
	}
	
#No. 445
#File: WorkerAdvertiser.java

#Comment:
    /**
     * This must be called before other methods are used.
     *
     * @param address address this worker is listening on
     * @param port    port this worker is listening on
     */

#Code:
    public synchronized void initListenInfo(@Nonnull String address, int port) {
        if (listenAddress != null) {
            throw new IllegalStateException("Already initialized");
        }
		
#No. 446
#File: WordNetAPI.java

#Comment:
	/**
	 * the word itself may be returned as a lemma
	 */

#Code:
	public static Set<String> getAllLemma(String word){
		Set<String> set = new HashSet<String>();
		POS[] poses = new POS[]{POS.NOUN, POS.VERB, POS.ADVERB, POS.ADJECTIVE};
		for(POS pos: poses){
			set.add( getLemma(word, pos)); 
		}
		return set;
	}
	
#No. 447
#File: WordCram.java

#Comment:
	/**
	 * How far through the words are we? Useful for when drawing
	 * to a custom PGraphics.
	 */

#Code:
	public float getProgress() {
		return getWordCramEngine().getProgress();
	}

#No. 448
#File: WookiModule.java

#Comment:
    /**
     * Wooki Symbols default
     */

#Code:
    public static void contributeFactoryDefaults(MappedConfiguration<String, String> configuration)
    {
        configuration.add(
                WookiSymbolsConstants.ERROR_UNHANDLED_BROWSER_PAGE,
                "error/unhandledbrowser");
    }
	
#No. 449
#File: WizardExportResourcesPage2.java

#Comment:
	/**
	 * Obsolete method  This was implemented to handle the case where ensureLocal() needed to be called but it doesn't
	 * use it any longer.
	 * @deprecated Only retained for backwards compatibility.
	 */

#Code:
	protected boolean ensureResourcesLocal(List resources) {
		return true;
	}

#No. 450
#File: Wiper.java

#Comment:
        /** Those guys sure have an obsession with shit...this is supposed to do some
         * lame-ass transpose.
         * 
         * @param array
         * @param width
         * @param height
         */

#Code:
        
        protected final void
        shittyColMajorXform
        ( short[]    array,
          int       width,
          int       height )
        {
            int     x;
            int     y;
            short[]  dest;

            dest = new short[width*height];

            for(y=0;y<height;y++)
            for(x=0;x<width;x++){
                dest[x*height+y] = array[y*width+x];
                //dest[(1+x)*height+y] = array[y*width+(1+x)];
            }
            System.arraycopy(dest, 0, array, 0, width*height);

            //Z_Free(dest);

        }

#No. 451
#File: Wiper.java

#Comment:
        /** Those guys sure have an obsession with shit...this is supposed to do some
         * lame-ass transpose.
         * 
         * @param array
         * @param width
         * @param height
         */

#Code:
        
        protected final void
        shittyColMajorXform
        ( byte[]    array,
          int       width,
          int       height )
        {
            int     x;
            int     y;
            byte[]  dest;

            dest = new byte[width*height];

            for(y=0;y<height;y++)
            for(x=0;x<width;x++){
                dest[x*height+y] = array[y*width+x];
                //dest[(1+x)*height+y] = array[y*width+(1+x)];
            }
            System.arraycopy(dest, 0, array, 0, width*height);

            //Z_Free(dest);

        }

#No. 452
#File: Wiper.java

#Comment:
        /** Those guys sure have an obsession with shit...this is supposed to do some
         * lame-ass transpose.
         * 
         * @param array
         * @param width
         * @param height
         */

#Code:
        
        protected final void
        shittyColMajorXform
        ( int[]    array,
          int       width,
          int       height )
        {
            int     x;
            int     y;
            int[]  dest;

            dest = new int[width*height];

            for(y=0;y<height;y++)
            for(x=0;x<width;x++){
                dest[x*height+y] = array[y*width+x];
                //dest[(1+x)*height+y] = array[y*width+(1+x)];
            }
            System.arraycopy(dest, 0, array, 0, width*height);

            //Z_Free(dest);

        }
		
#No. 453
#File: WineTastingAdapter.java

#Comment:
    /************************
     * SUPERCLASS OVERRIDES *
     ************************/

#Code:

    @Override
    public WineTastingViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        View inflated = inflater.inflate(R.layout.row_wine_tasting, parent, false);
        return new WineTastingViewHolder(inflated);
    }

#No. 454
#File: WineTastingDetailUITests.java

#Comment:
    /******************
     * TEST LIFECYCLE *
     ******************/

#Code:

    @Before
    public void beforeEachTest() {
        //Nuke any old state
        SharedPreferencesHelper
                .getInstance(getContext())
                .nukeAllSharedPreferences();

        //Go from the initial launch page to the details page.
        goToDetailsPage();
    }

#No. 455
#File: WineTastingDetailUITests.java

#Comment:
    /******************
     * HELPER METHODS *
     ******************/

#Code:

    private Context getContext() {
        return wineTastingActivity.getActivity();
    }

#No. 456
#File: WineTastingDetailUITests.java

#Comment:
    /*****************
     * ACTUAL TESTS! *
     *****************/

#Code:

    @Test
    public void savingDataInTheDetailIsPersistedToUserDefaults() {
        //Use variables to make these easier to test against.
        String testWineName = "Test wine name";
        String testVarietal = "Cabernet Sauvignon";
        String testVineyard = "Rodney Strong";
        int testRating = 3;

        enterAndSaveWineInfo(testWineName,
                testVineyard,
                testVarietal,
                testRating);

        String expectedWineName = WineTasting.wineNameFromInfo(testWineName, testVineyard, testVarietal);

        //Check that input is saving
        List<WineTasting> savedTastings = SharedPreferencesHelper.getInstance(getContext())
                .getCurrentTastings();

        //Make sure the saved tastings only has the one which was just added.
        assertNotNull(savedTastings);
        assertEquals(savedTastings.size(), 1);

        //Grab the tasting and then verify the data matches what was entered.
        WineTasting savedTasting = savedTastings.get(0);

        assertEquals(savedTasting.vineyardName, testVineyard);
        assertEquals(savedTasting.wineName, testWineName);
        assertEquals(savedTasting.wineVarietal, testVarietal);
        assertEquals(savedTasting.rating, testRating);
        assertEquals(savedTasting.getFullWineName(), expectedWineName);

        //back out to the main view for the next test.
        pressBack();
    }

#No. 457
#File: WinFirefoxProfileSource.java

#Comment:
	/*************************************************************************
	 * Constructor
	 ************************************************************************/

#Code:

	public WinFirefoxProfileSource() {
		super();
	}
	
#No. 458
#File: WineTasting.java

#Comment:
    /******************
     * STATIC METHODS *
     ******************/

#Code:

    public static String wineNameFromInfo(String aWineName, String aVineyardName, String aVarietal) {
        if (aWineName != null
                && aVineyardName != null
                && aVarietal != null) { //got everything
            return aWineName + " (" + aVarietal + ", " + aVineyardName + ")";
        } else if (aWineName != null
                && aVineyardName !=null) { //No varietal
            return aWineName + " (" + aVineyardName + ")";
        } else if (aWineName != null
                && aVarietal != null) { //no vineyard
            return aWineName + " (" + aVarietal + ")";
        } else if (aWineName != null) { //wine name only
            return aWineName;
        } else { //Nothing specified
            return "";
        }
    }

#No. 459
#File: WineTasting.java

#Comment:
    /************
     * EQUALITY *
     ************/

#Code:
    @Override
    public boolean equals(Object aAnother) {
        if (aAnother instanceof WineTasting) {
            WineTasting other = (WineTasting)aAnother;
            if (wineName.equals(other.wineName)
                    && vineyardName.equals(other.vineyardName)
                    && wineVarietal.equals(other.wineVarietal)
                    && tastingDate.equals(other.tastingDate)
                    && wineType.equals(other.wineType)) {
                //If all of these are the same, the wines are equal
                return true;
            }
        }

        //Fall-through
        return false;
    }

#No. 460
#File: WineTasting.java

#Comment:
    /********************
     * PARCELABLE STUFF *
     ********************/

#Code:

    protected WineTasting(Parcel in) {
        vineyardName = in.readString();
        wineName = in.readString();
        String wineTypeName = in.readString();
        wineType = WineType.fromString(wineTypeName);
        wineVarietal = in.readString();
        rating = in.readInt();
        long tmpTastingDate = in.readLong();
        tastingDate = tmpTastingDate != -1 ? new Date(tmpTastingDate) : null;
    }

#No. 461
#File: WineTasting.java

#Comment:
    /***************
     * CONVENIENCE *
     ***************/

#Code:

    public String getFullWineName() {
        return wineNameFromInfo(wineName, vineyardName, wineVarietal);
    }
	

#No. 462
#File: WindowsMemoryReader.java

#Comment:
   /**
    * return null if error
    */

#Code:
   private Pointer getProcessHandleFromPid(int pid) {
      return getProcessHandleFromPid(pid, WindowsConstants.PROCESS_VM_READ | WindowsConstants.PROCESS_QUERY_INFORMATION);
   }

#No. 463
#File: WindowsMemoryReader.java

#Comment:
   /**
    * return null if error
    */

#Code:
   private Pointer getProcessHandleFromPid(int pid, int rights) {
      int error;
      
      Pointer ph = kernel32.OpenProcess(rights, false, pid);
      if ((error = kernel32.GetLastError()) != 0) {
         LOG.debug("Can't open process with PID {}, error {} : {}", pid, error, ErrorCodesToString.get(error));
         return null;
      }
      
      return ph;
   }

#No. 464
#File: WindowsMemoryReader.java

#Comment:
   /**
    * return null if error
    */

#Code:
   private String getProcessNameFromProcessHandle(Pointer ph) {
      
      byte[] filename = new byte[BUFFER_SIZE];
      
      psapi.GetModuleBaseNameW(ph, new Pointer(0), filename, BUFFER_SIZE);
      
      if (kernel32.GetLastError() != 0) {
         return null;
      }
      
      return new String(filename, StandardCharsets.UTF_16LE).trim();
   }

#No. 465
#File: WindowsMemoryReader.java

#Comment:
   /**
    * return null if error
    */

#Code:
   private String getProcessNameFromPid(int pid) {
      Pointer ph = getProcessHandleFromPid(pid);
      if (ph != null) {
         try {
            return getProcessNameFromProcessHandle(ph);
         } finally {
            kernel32.CloseHandle(ph);
         }
      }
      return null;
   }

#No. 466
#File: WindowManagerService.java

#Comment:
    /**
     * Extracted from {@link #performLayoutAndPlaceSurfacesLockedInner} to reduce size of method.
     */

#Code:
    private int handleAnimatingStoppedAndTransitionLocked() {
        int changes = 0;

        mAppTransition.setIdle();
        // Restore window app tokens to the ActivityManager views
        ArrayList<TaskStack> stacks = getDefaultDisplayContentLocked().getStacks();
        for (int stackNdx = stacks.size() - 1; stackNdx >= 0; --stackNdx) {
            final ArrayList<Task> tasks = stacks.get(stackNdx).getTasks();
            for (int taskNdx = tasks.size() - 1; taskNdx >= 0; --taskNdx) {
                final AppTokenList tokens = tasks.get(taskNdx).mAppTokens;
                for (int tokenNdx = tokens.size() - 1; tokenNdx >= 0; --tokenNdx) {
                    tokens.get(tokenNdx).sendingToBottom = false;
                }
            }
        }
        rebuildAppWindowListLocked();

        changes |= PhoneWindowManager.FINISH_LAYOUT_REDO_LAYOUT;
        if (DEBUG_WALLPAPER_LIGHT) Slog.v(TAG,
                "Wallpaper layer changed: assigning layers + relayout");
        moveInputMethodWindowsIfNeededLocked(true);
        mInnerFields.mWallpaperMayChange = true;
        // Since the window list has been rebuilt, focus might
        // have to be recomputed since the actual order of windows
        // might have changed again.
        mFocusMayChange = true;

        return changes;
    }
	
#No. 467
#File: WindowingOperatorDefinition.java

#Comment:
	/**
	 * The windowing operator family does NOT support extendedType calculation
	 */

#Code:
	@Override
	public ExtendedType computeExtendedTypeRaw(ExtendedType[] types) {
		ArrayList<IDomain> imageDomains = new ArrayList<IDomain>();
		for (ExtendedType type : types) {
			imageDomains.add(type.getDomain());
		}
		IDomain domain = computeImageDomain(imageDomains);
		return new ExtendedType(domain,Types.OTHER,0,0);
	}
	
#No. 468
#File: Win32PrintServiceLookup.java

#Comment:
    /* Want the PrintService which is default print service to have
     * equality of reference with the equivalent in list of print services
     * This isn't required by the API and there's a risk doing this will
     * lead people to assume its guaranteed.
     */

#Code:
    public synchronized PrintService[] getPrintServices() {
        SecurityManager security = System.getSecurityManager();
        if (security != null) {
            security.checkPrintJobAccess();
        }
        if (printServices == null) {
            refreshServices();
        }
        return printServices;
    }
	

#No. 469
#File: Win32PrintJob.java

#Comment:
    /**
     * The passed in PageFormat is cloned and altered to be usable on
     * the PrinterJob's current printer.
     */

#Code:
    private PageFormat validatePage(PageFormat page) {
        PageFormat newPage = (PageFormat)page.clone();
        Paper newPaper = new Paper();
        validatePaper(newPage.getPaper(), newPaper);
        newPage.setPaper(newPaper);

        return newPage;
    }
	

#No. 470
#File: WikiUtil.java

#Comment:
	/**
	 * !!! This method is used in JSP page as function method, please be carefully if any refactoring !!!
	 * @param readonly
	 * @return
	 */

#Code:
	public static String getRootURL(boolean readonly) {
		String hostURL = WebUtil.getHostAppURL();
		return hostURL+(readonly?SharedConstants.URL_VIEW:SharedConstants.URL_PAGE);
	}

#No. 471
#File: WikiUtil.java

#Comment:
	/**
	 * !!! This method is used in JSP page as function method, please be carefully if any refactoring !!! 
	 *  <li>/page(view)/spaceUname - if not invalid character in spaceUname</li>
	 *  <li>/s(vs)/spaceUid - if invalid character in spaceUname and spaceUid is not blank</li>
	 * @param page
	 * @return
	 */

#Code:
	public static String getSpaceRedirFullURL(boolean readonly, Integer spaceUid, String spaceUname) {
		String hostURL = WebUtil.getHostAppURL();
		if(StringUtils.isBlank(spaceUname))
			//TODO: this is problem for read-only model
			return hostURL;
		
		if(GwtUtils.isSupportInURL(spaceUname) || spaceUid == null){
			try {
				return  hostURL+(readonly?SharedConstants.URL_VIEW:SharedConstants.URL_PAGE)+"/" +URLEncoder.encode(spaceUname, Constants.UTF8);
			} catch (UnsupportedEncodingException e) {
				log.error("Failed to encode URL:"+spaceUname,e);
			}
			return hostURL;
		}else{
			return hostURL+(readonly?SharedConstants.URL_TINY_READONLY_SPACE:SharedConstants.URL_TINY_SPACE)+"/" +spaceUid;
		}
	}

#No. 472
#File: WikiUtil.java

#Comment:
	/**
	 * !!! This method is used in JSP page as function method, please be carefully if any refactoring !!! 
	 * 
	 * @return
	 */

#Code:
	public static String getRedirFullURL(boolean readonly, String spaceUname, String pageTitle, String pageUuid) {
		if(readonly)
			return getFullURL(WebUtil.getHostAppURL(), SharedConstants.URL_VIEW, spaceUname, pageTitle, pageUuid, null);
		else
			return getFullURL(WebUtil.getHostAppURL(), SharedConstants.URL_PAGE, spaceUname, pageTitle, pageUuid, null);
	}

#No. 473
#File: WifiScanReceiver.java

#Comment:
	/*
	 * This class would make a nice usecase for DI.
	 * Is Guice available for Android?
	 */

#Code:
	public WifiScanReceiver(WifiManager mainWifi,
							LocationReceiver locReceiver,
			                ContentResolver cr)
	{
		this.mainWifi = mainWifi;
		this.locReceiver = locReceiver;
		this.cr = cr;
	}
	

#No. 474
#File: WifiManagerWrap.java

#Comment:
	/**
	 * WPA connect WPA/WPA2
	 */

#Code:
	protected void setWifiConfigAsWPA(WifiConfiguration wifiConfig) {
		wifiConfig.hiddenSSID = false;
		wifiConfig.status = WifiConfiguration.Status.ENABLED;
		wifiConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);
		wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
		wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
		wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);
		wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
		wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_PSK);
		wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.WPA);
		wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.RSN);

		setWifiConfigurationProfile(wifiConfig);
	}

#No. 475
#File: WifiManagerWrap.java

#Comment:
	/**
	 * no WiFi password
	 */

#Code:
	protected void setWifiConfig(WifiConfiguration wifiConfig) {
		wifiConfig.wepKeys[0] = "\""+"\"";
		wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);		   
		wifiConfig.wepTxKeyIndex = 0;	
		setWifiConfigurationProfileWithoutKey(wifiConfig);
	}
	
#No. 476
#File: WifiDirectHandler.java

#Comment:
    /**
     * By default after a group is formed service discovery will be stopped automatically.
     *
     */

#Code:
    public boolean isStopDiscoveryAfterGroupFormed(){
        return  stopDiscoveryAfterGroupFormed;
    }

#No. 477
#File: WiffCapture.java

#Comment:
  /**
   * Captures network packets
   */

#Code:
  public void run() {
    running = true;
    if (offline || streamMode) {
      if (pcap != null) {
        LOGGER.info("Pcap major version: " + pcap.majorVersion());
        LOGGER.info("Pcap minor version: " + pcap.minorVersion());
        LOGGER.info("Pcap library version: " + Pcap.libVersion());

        // Set tcpdump filter
        if (tcpFilter != null && !tcpFilter.isEmpty()) {
          try {
            LOGGER.info("Setting tcpdump filter: " + tcpFilter);
            setStreamFilter(pcap, tcpFilter);
          } catch (IllegalArgumentException e) {
            LOGGER.error("", e);
          }
        }
      } else {
        LOGGER.error("Error while opening capture source: " + errbuf);
        System.exit(1);
      }
      pcap.loop(Pcap.LOOP_INFINITE, handler, "");
    } else {
      try {
        watchDirectory(captureSoure);
      } catch (IOException | InterruptedException e) {
        LOGGER.error("", e);
      }
    }
  }
  
#No. 478
#File: WidgetSpace.java

#Comment:
    /**
     * So en exception in unregistering last receiver will not bypass the second one
     *
     * @param context
     * @param receiver
     */

#Code:
    void unregisterReceiver(Context context, BroadcastReceiver receiver) {
        try {
            context.unregisterReceiver(receiver);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
	
#No. 479
#File: WidgetServiceImpl.java

#Comment:
	/**
	 * This method is executed in Spring init-method.
	 */

#Code:
	public void loadWidgetTemplates(){
		ClassLoader classLoader = WidgetTemplate.class.getClassLoader();
		BufferedReader is = null;
		try {
			is = new BufferedReader(new InputStreamReader(classLoader.getResourceAsStream(widgetResource)));
			String widgetClz;
			while((widgetClz = is.readLine()) != null){
				//get macro class
				if(StringUtils.isBlank(widgetClz) || widgetClz.trim().startsWith("#")){
					//skip comment
					continue;
				}
				try {
					Object obj = classLoader.loadClass(widgetClz.trim()).newInstance();
					if(obj instanceof WidgetTemplate){
						WidgetTemplate widget = ((WidgetTemplate)obj);
						widget.init(applicationContext);
						String type = widget.getType();
						container.put(type, widget);
						log.info("Widget class loading success:" + type);
					}
				} catch (Exception e) {
					log.error("Initial widget class " + widgetClz + " failed. This widget is ignored!!!",e);
				}
			}
		} catch (IOException e) {
			log.error("Widget resource file " + widgetResource + " not found.",e);
		} finally{
			IOUtils.closeQuietly(is);
		}
	}
	
#No. 480
#File: WhylineUI.java

#Comment:
	/**
	 * Should only be called when in whyline mode.
	 */

#Code:
	private void arrangeForInspecting() {
		
		assert debuggingMode == Mode.WHYLINE : "Can only arrange for inspecting " + Mode.WHYLINE + " mode";

		showDynamicInfo.setEnabled(true);
		
		scaleSlider.setFitToWindow(true);

		// Put the output back
		dynamicSplit.resetWith(outputUI, objectsUI, threadsUI);

		sourceEtc.setMinimumSize(new Dimension(UI.getDefaultInfoPaneWidth(this), 0));
		sourceEtc.resetWith(filesUI, questionsUI);
		sourceEtc.giveResizeWeightTo(filesUI);
		
		if(staticInfoShowing && dynamicInfoShowing)
			center.resetWith(staticSplit,sourceEtc, dynamicSplit);
		else if(staticInfoShowing)
			center.resetWith(staticSplit,sourceEtc);
		else if(dynamicInfoShowing)
			center.resetWith(sourceEtc, dynamicSplit);
		else
			center.resetWith(sourceEtc);
			
		center.giveResizeWeightTo(sourceEtc);
				
		timeUI.setRequestFocusOnEnter(false);
		
		center.revalidate();
		
	}
	
#No. 481
#File: WhylineUI.java

#Comment:
	/**
	 * Returns true if the close was canceled.
	 */

#Code:
	public boolean saveIfNecessaryThenClose() {

		if(!trace.isSaved()) {
			
			String[] options = { "Yes, save!", "No, just close the window", "Don't close this window"  };
			int answer = JOptionPane.showOptionDialog(WhylineUI.this, "Do you want me to save this trace to the whyline's workspace for later?", "Save this trace?", JOptionPane.YES_NO_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE, null, options, "No");

			// If we cancel closing, we return immediately
			if(answer == 2) return true;
			// Otherwise, save before we close.
			if(answer == 0) {
				save(true);
				return false;
			
			}
			
		}

		// Afterwards, close and dispose.
		close();
		return false;
		
	}
	
#No. 482
#File: WhileLoopTest.java

#Comment:
    /* Test object directly 
    /*----------------------------------------------------------------------------*/   

#Code:

    @Test
    public void testWhileLoop_no_reductions() throws Exception {
        GOLDParserForTesting parser = new GOLDParserForTesting();
        try {
            new WhileLoop(parser);
            fail("Expected ParserException");
        } catch (ParserException pe) {
            assertEquals("wrong msg", "Invalid state, stack empty.", pe.getMessage());
        }
    }    

#No. 483
#File: WhileLoopTest.java

#Comment:
    /* Test object indirectly using the engine 
    /*----------------------------------------------------------------------------*/

#Code:

    @Test
    public void testWhileLoop() throws Exception {
        String src = 
            "assign i = 1\r\n" +
            "while i <= 5 do\r\n" +
            "  display i\r\n" +
            "  assign i = i + 1\r\n" +
            "end\r\n";

        String[] actual = executeProgram(src);
        validateLines(makeExpected("1", "2", "3", "4", "5"), actual);
    }
	
#No. 484
#File: WhereConditionHandler.java

#Comment:
	/**
	 * where condition handler 
	 * @param whereCondition
	 * @return
	 */

#Code:
	public static Map<String, List<String>> handlerWhereCondition(String whereCondition){
		int split = sqlStartLogic(whereCondition);
		List<String> list = splitWhereConditionLevelOne(whereCondition, split);
		Map<String, List<String>> map = splitLevelOneGetLevelTwo(list, split);
		return map;
	}
	

#No. 485
#File: WhatShouldWeCacheBenchmarks.java

#Comment:
  /**
   * How fast is parsing an api interface?
   */

#Code:
  @Benchmark
  public List<MethodMetadata> parseFeignContract() {
    return feignContract.parseAndValidatateMetadata(FeignTestInterface.class);
  }

#No. 486
#File: WhatShouldWeCacheBenchmarks.java

#Comment:
  /**
   * How fast is creating a feign instance for each http request, without considering network?
   */

#Code:
  @Benchmark
  public Response buildAndQuery_fake() {
    return Feign.builder().client(fakeClient)
        .target(FeignTestInterface.class, "http://localhost").query();
  }

#No. 487
#File: WhatShouldWeCacheBenchmarks.java

#Comment:
  /**
   * How fast is creating a feign instance for each http request, without considering network, and
   * without re-parsing the annotated http api?
   */

#Code:
  @Benchmark
  public Response buildAndQuery_fake_cachedContract() {
    return Feign.builder().contract(cachedContact).client(fakeClient)
        .target(FeignTestInterface.class, "http://localhost").query();
  }

#No. 488
#File: WhatShouldWeCacheBenchmarks.java

#Comment:
  /**
   * How fast re-parsing the annotated http api for each http request, without considering network?
   */

#Code:
  @Benchmark
  public Response buildAndQuery_fake_cachedFeign() {
    return cachedFakeFeign.newInstance(
        new HardCodedTarget<FeignTestInterface>(FeignTestInterface.class, "http://localhost"))
        .query();
  }

#No. 489
#File: WhatShouldWeCacheBenchmarks.java

#Comment:
  /**
   * How fast is our advice to use a cached api for each http request, without considering network?
   */

#Code:
  @Benchmark
  public Response buildAndQuery_fake_cachedApi() {
    return cachedFakeApi.query();
  }
  
#No. 490
#File: WFSPTRSTATUS.java

#Comment:
	/**
	 * Specifies the state of the anti-fraud module as one of the following
	 * values: {@link PTRAntiFraudModule}
	 *
	 * @since 3.20
	 */

#Code:
	public PTRAntiFraudModule getAntiFraudModule() {
		return XfsConstants.valueOf(antiFraudModule, PTRAntiFraudModule.class);
	}
	
#No. 491
#File: WFSPTRCAPS.java

#Comment:
	/**
	 * One or more flags specifying the character sets, in addition to single
	 * byte ASCII, that is supported by the Service Provider:
	 *
	 * @since 3.00
	 */

#Code:
	public Set<PTRCharSupport> getCharSupport() {
		return XfsConstants.of(charSupport, PTRCharSupport.class);
	}
	
#No. 492
#File: WfsPINKey.java

#Comment:
	/**
	 * Copy constructor.
	 */

#Code:
	public WfsPINKey(final WfsPINKey pinKey) {
		this();
		allocate();
		completion.set(pinKey.getCompletion());
		digit.set(pinKey.digit);
	}

#No. 493
#File: WFSPINFUNCKEYDETAIL.java

#Comment:
	/**
	 * Copy constructor.
	 */

#Code:
	public WFSPINFUNCKEYDETAIL(final WFSPINFUNCKEYDETAIL funcKeyDetail) {
		this();
		allocate();
		funcMask.set(funcKeyDetail.funcMask);
		final WFSPINFDK[] fdks = funcKeyDetail.getFDKs();
		for (int i = 0; i < fdks.length; i++) {
			fdks[i] = new WFSPINFDK(fdks[i]);
		}
		setFDKs(fdks);
	}
	
#No. 494
#File: WFSPINFDK.java

#Comment:
	/**
	 * Copy constructor.
	 */

#Code:
	public WFSPINFDK(final WFSPINFDK pinFDK) {
		this();
		allocate();
		fdk.set(pinFDK.fdk);
		xPosition.set(pinFDK.xPosition);
		yPosition.set(pinFDK.yPosition);
	}

#No. 495
#File: WFSPINCAPS.java

#Comment:
	/**
	 * Copy constructor.
	 */

#Code:
	public WFSPINCAPS(final XfsVersion xfsVersion, final WFSPINCAPS pinCaps) {
		this(xfsVersion);
		allocate();
		clazz.set(pinCaps.clazz);
		type.set(pinCaps.type);
		compound.set(pinCaps.isCompound());
		keyNum.set(pinCaps.keyNum);
		algorithms.set(pinCaps.algorithms);
		pinFormats.set(pinCaps.pinFormats);
		derivationAlgorithms.set(pinCaps.derivationAlgorithms);
		presentationAlgorithms.set(pinCaps.presentationAlgorithms);
		display.set(pinCaps.display);
		idConnect.set(pinCaps.isIDConnect());
		idKey.set(pinCaps.idKey);
		validationAlgorithms.set(pinCaps.validationAlgorithms);
		keyCheckModes.set(pinCaps.keyCheckModes);
		extra.pointTo(KeyValueMap.toZZString(pinCaps.getExtra()));
		// FIXME guidLights, ...
		autoBeep.set(pinCaps.autoBeep);
		setHSMVendor(pinCaps.getHSMVendor());
		setHSMJournaling(pinCaps.isHSMJournaling());
		rsaAuthenticationSchemes.set(pinCaps.rsaAuthenticationSchemes);
		rsaSignatureAlgorithms.set(pinCaps.rsaSignatureAlgorithms);
		rsaCryptAlgorithms.set(pinCaps.rsaCryptAlgorithms);
		rsaKeyCheckModes.set(pinCaps.rsaKeyCheckModes);
		signatureSchemes.set(pinCaps.signatureSchemes);
		// FIXME emvImportSchemes.set(pinCaps.emvImportSchemes);
		emvHashAlgorithms.set(pinCaps.emvHashAlgorithms);
		setKeyImportThroughParts(pinCaps.isKeyImportThroughParts());
		encIOProtocols.set(pinCaps.encIOProtocols);
		setTypeCombined(pinCaps.isTypeCombined());
		setSetPinblockDataRequired(pinCaps.isSetPinblockDataRequired());
		keyBlockImportFormats.set(pinCaps.keyBlockImportFormats);
		setPowerSaveControl(pinCaps.isPowerSaveControl());

	}
	
#No. 496
#File: WFSIDCCARDDATA.java

#Comment:
	/**
	 * Copy constructor.
	 */

#Code:
	public WFSIDCCARDDATA(final XfsVersion xfsVersion, final WFSIDCCARDDATA cardData) {
		this(xfsVersion);
		allocate();
		dataSource.set(cardData.getDataSource());
		status.set(cardData.getStatus());
		dataLength.set(cardData.dataLength);
		if (!Pointer.NULL.equals(cardData.pData)) {
			pData.pointTo(new ByteArray(cardData.getData()));
		}
		writeMethod.set(cardData.getWriteMethod());
	}
	
#No. 497
#File: WFSIDCCAPS.java

#Comment:
	/**
	 * Copy constructor.
	 */

#Code:
	public WFSIDCCAPS(final XfsVersion xfsVersion, final WFSIDCCAPS caps) {
		this(xfsVersion);
		allocate();
		clazz.set(caps.clazz);
		type.set(caps.getType());
		compound.set(caps.isCompound());
		readTracks.set(caps.readTracks);
		writeTracks.set(caps.writeTracks);
		chipProtocols.set(caps.chipProtocols);
		cards.set(caps.cards);
		secType.set(caps.secType);
		powerOnOption.set(caps.powerOnOption);
		powerOffOption.set(caps.powerOffOption);
		setFluxSensorProgrammable(caps.isFluxSensorProgrammable());
		setReadWriteAccessFollowingEject(caps.isReadWriteAccessFollowingEject());
		writeMode.set(caps.writeMode);
		chipPower.set(caps.chipPower);
		setExtra(caps.getExtra());
		dipMode.set(caps.dipMode);
		// FIXME: memoryChipProtocols
		for (int i = 0; i < guidLights.length; i++) {
			guidLights.get(i).set(caps.guidLights.get(i));
		}
		ejectPosition.set(caps.ejectPosition);
		setPowerSaveControl(caps.isPowerSaveControl());
		parkingStations.set(caps.parkingStations);
		setAntiFraudModule(caps.isAntiFraudModule());

	}
	
#No. 498
#File: WFSHWERROR.java

#Comment:
	/**
	 * Copy constructor.
	 */

#Code:
	public WFSHWERROR(final XfsVersion xfsVersion, final WFSHWERROR hwError) {
		this(xfsVersion);
		allocate();
		setLogicalName(hwError.getLogicalName());
		if (xfsVersion.isGE(XfsVersion.V3_00)) {
			setPhysicalName(hwError.getPhysicalName());
		}
		setWorkstationName(hwError.getWorkstationName());
		setAppID(hwError.getAppID());
		if (xfsVersion.isGE(XfsVersion.V3_00)) {
			setAction(hwError.getAction());
		}
		setDescription(hwError.getDescription());
	}
	
#No. 499
#File: WellKnownFolder.java

#Comment:
    /*
     * Beware1: this method does not take into account the outputDirectory/baseDir Beware2: must be called after initialization (so override are taken into
     * account)
     */

#Code:
    public boolean sameAsGeneratedFolder() {
        return folder.equalsIgnoreCase(generatedFolder);
    }

#No. 500
#File: WeightedRootedDAG.java

#Comment:
	/**
	 * Simple version:
	 * arrive(j) (+)= start(j)
	 * arrive(j) (+)= arrive(I) (*) arc(I, j)
	 *   goal(j) (+)= arrive(j) (*) end(j)
	 * 
	 * With history:
	 * arrive(*, j) (+)= start(j)
	 * arrive(i, j) (+)= arrive(H, i) (*) arc(i, j)
	 *   goal(i, j) (+)= arrive(i, j) (*) end(j)
	 * 
	 * @param semr
	 * @return
	 * @throws GraphException 
	 */

#Code:
	@SuppressWarnings("unchecked")
	public <V> Object computePath(Semirings.Semiring<V> semr) throws GraphException {
		R r = (R)_root;
		List<R> order = RootedDAGNode.topologicalSort(r);
		V[] vals = (V[])new Object[order.size()];
		vals[0] = semr.oone();	// source
		for (int i=1; i<vals.length; i++)
			vals[i] = semr.ozero();	// initialize
		arrive(order, vals, semr, 0);
		
		return vals[vals.length-1];	// sink
	}
	
	
#No. 501
#File: WeightedQuickUnion.java

#Comment:
    /**
     * Demo
     */

#Code:
    public static void main(String[] args) {
        int n = 10;

        UnionFind uf = new WeightedQuickUnion(n);
        for (int i = 0; i < n; i++) {
            assertConnection(uf, i, i);
        }
        System.out.println(uf);

        int[] pairs = {8, 9, 5, 1, 6, 7, 7, 3, 5, 0, 8, 5, 2, 4, 7, 2, 2, 0};
        for (int i = 1; i < pairs.length; i += 2) {
            uf.union(pairs[i-1], pairs[i]);
            assertConnection(uf, pairs[i-1], pairs[i]);
            System.out.println(uf);
        }
    }
	
#No. 502
#File: WeekView.java

#Comment:
    /**
     * <b>Note:</b> Use {@link #setDateTimeInterpreter(DateTimeInterpreter)} and
     * {@link #getDateTimeInterpreter()} instead.
     */

#Code:
    @Deprecated
    public int getDayNameLength() {
        return mDayNameLength;
    }
	
#No. 503
#File: WebViewChromiumFactoryProvider.java

#Comment:
    /**
     * Constructor called by the API 21 version of {@link WebViewFactory} and earlier.
     */

#Code:
    public WebViewChromiumFactoryProvider() {
        initialize(WebViewDelegateFactory.createApi21CompatibilityDelegate());
    }

#No. 504
#File: WebViewChromiumFactoryProvider.java

#Comment:
    /**
     * Constructor called by the API 22 version of {@link WebViewFactory} and later.
     */

#Code:
    public WebViewChromiumFactoryProvider(android.webkit.WebViewDelegate delegate) {
        initialize(WebViewDelegateFactory.createProxyDelegate(delegate));
    }
	
#No. 505
#File: WebsockifySslContext.java

#Comment:
    /**
     * Constructor for singleton
     */

#Code:
    private WebsockifySslContext(String keystore, String password) {
        this ( keystore, password, password );
    }

#No. 506
#File: WebsockifySslContext.java

#Comment:
    /**
     * Constructor for singleton
     */

#Code:
    private WebsockifySslContext(String keystore, String password, String keyPassword) {
        try {
            SSLContext serverContext = null;
            try {
            	serverContext = getSSLContext(keystore, password, keyPassword);
            } catch (Exception e) {
        		Logger.getLogger(WebsockifySslContext.class.getName()).severe("Error creating SSL context for keystore " + keystore + ": " + e.getMessage());
                throw new Error("Failed to initialize the server-side SSLContext", e);
            }
            _serverContext = serverContext;
        } catch (Exception ex) {
            logger.error("Error initializing SslContextManager. " + ex.getMessage(), ex);
            System.exit(1);

        }
    }
	

#No. 507
#File: WebsocketThread.java

#Comment:
	/**
	 * Constructor
	 */

#Code:
	public WebsocketThread(String URIstring, List<String> instrumentList,
							IStreamingQuoteStorage streamingQuoteStorage){
		this.URIstring = URIstring;
		this.instrumentList = instrumentList;
		
		if(ZStreamingConfig.isStreamingQuoteStoringRequired()){
			this.streamingQuoteStorage = streamingQuoteStorage;
		}
		
		this.currWSstateLock = new ReentrantLock();
	}
	
#No. 508
#File: WebSocketSelectedHandlerTest.java

#Comment:
    /*
     * if channel readyState != Open, should not raise message event
     */

#Code:
    @Test
    public void testMessageReceived() throws URISyntaxException {

        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);
        final String[] requestedProtocols = new String[] {"foo"};

        context.checking(new Expectations() {

            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processConnect(with(aNonNull(WebSocketSelectedChannel.class)), with(aNonNull(WSURI.class)), with(equal(requestedProtocols)));
                will(new CustomAction("will fire MessageReceived") {

                    @Override
                    public Object invoke(Invocation invocation) {
                        WebSocketHandlerListener listener = (WebSocketHandlerListener)lookup("listener");
                        WebSocketSelectedChannel channel = (WebSocketSelectedChannel)invocation.getParameter(0);
                        listener.binaryMessageReceived(channel, new WrappedByteBuffer("foo".getBytes()));
                        return null;
                    }
                });
                never(listener).binaryMessageReceived(with(aNonNull(WebSocketSelectedChannel.class)), with(new ByteBufferMatcher("foo", "message")));
            }
        });

        WSURI uri = new WSURI("ws://localhost:8001/echo");
        WebSocketNativeChannel channel = new WebSocketNativeChannel(uri);

        WebSocketSelectedHandler handler = new WebSocketSelectedHandlerImpl();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);

        handler.processConnect(channel, uri, requestedProtocols);
        context.assertIsSatisfied();
    }
	
#No. 509
#File: WebsocketSecurityConfiguration.java

#Comment:
    /**
     * Disables CSRF for Websockets.
     */

#Code:
    @Override
    protected boolean sameOriginDisabled() {
        return true;
    }
	
#No. 510
#File: WebsocketRequestBuilderDefault.java

#Comment:
    /**
     * Constructor
     */

#Code:
    @AssistedInject
    public WebsocketRequestBuilderDefault(@Assisted String url,
                                          CookieFactory cookieFactory,
                                          HttpResponseFactory spincastHttpResponseFactory,
                                          SpincastHttpClientWithWebsocketUtils spincastHttpClientWithWebsocketUtils,
                                          SpincastHttpClientWithWebsocketConfig spincastHttpClientWithWebsocketConfig) {
        super(url,
              cookieFactory,
              spincastHttpResponseFactory,
              spincastHttpClientWithWebsocketUtils,
              spincastHttpClientWithWebsocketConfig);
        this.spincastHttpClientWithWebsocketConfig = spincastHttpClientWithWebsocketConfig;
        this.spincastHttpClientWithWebsocketUtils = spincastHttpClientWithWebsocketUtils;
    }
	
#No. 511
#File: WebSocketNativeHandshakeHandlerTest.java

#Comment:
    /*
     * pass through
     */

#Code:
    @Test @Ignore(" channel readyState must be Open for this test to run")
    public void testProcessTextMessage() throws URISyntaxException, Exception {
        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);
        final WrappedByteBuffer message = new WrappedByteBuffer("test message".getBytes());
        
        context.checking(new Expectations() {

            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processTextMessage(with(aNonNull(WebSocketChannel.class)), with("test message"));
                will(new CustomAction("will fire connectionOpen") {

                    @Override
                    public Object invoke(Invocation invocation) {
                        WebSocketHandlerListener listener = (WebSocketHandlerListener)lookup("listener");
                        WebSocketChannel channel = (WebSocketChannel)invocation.getParameter(0);
                        listener.connectionOpened(channel, null);
                        listener.binaryMessageReceived(channel, message);
                        return null;
                    }
                });
                oneOf(listener).binaryMessageReceived(with(aNonNull(WebSocketChannel.class)), with(new ByteBufferMatcher("test message", "test")));
            }
        });

        WSURI uri = new WSURI("ws://localhost:8001/echo");
        WebSocketChannel channel = createNativeChannel(uri);

        WebSocketNativeHandshakeHandler handler = new WebSocketNativeHandshakeHandler();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);
        handler.processTextMessage(channel, "test message");
        context.assertIsSatisfied();
    }
	
#No. 512
#File: WebSocketNativeHandshakeHandlerTest.java

#Comment:
    /*
     * pass through
     */

#Code:
    @Test @Ignore(" channel readyState must be Open for this test to run")
    public void testProcessBinaryMessage() throws URISyntaxException, Exception {

        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);

        final WrappedByteBuffer message = new WrappedByteBuffer("test message".getBytes());
        context.checking(new Expectations() {

            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processBinaryMessage(with(aNonNull(WebSocketChannel.class)), with(message));
                will(new CustomAction("will fire text message received") {

                    @Override
                    public Object invoke(Invocation invocation) {
                        WebSocketHandlerListener listener = (WebSocketHandlerListener)lookup("listener");
                        WebSocketChannel channel = (WebSocketChannel)invocation.getParameter(0);
                        listener.connectionOpened(channel, null);
                        listener.binaryMessageReceived(channel, message);
                        return null;
                    }
                });
                oneOf(listener).binaryMessageReceived(with(aNonNull(WebSocketChannel.class)), with(message));
            }
        });

        WSURI uri = new WSURI("ws://localhost:8001/echo");
        WebSocketChannel channel = createNativeChannel(uri);

        WebSocketNativeHandshakeHandler handler = new WebSocketNativeHandshakeHandler();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);
        handler.processBinaryMessage(channel, message);
        context.assertIsSatisfied();
    }
	
#No. 513
#File: WebSocketNativeHandshakeHandlerTest.java

#Comment:
    /*
     * should send authorizeToken
     */

#Code:
    @Test
    public void testProcessAuthorize() throws URISyntaxException, Exception {

        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);

        context.checking(new Expectations() {

            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processBinaryMessage(with(aNonNull(WebSocketChannel.class)),with(aNonNull(WrappedByteBuffer.class)));
            }
        });

        WSURI uri = new WSURI("ws://localhost:8001/echo");
        WebSocketChannel channel = createNativeChannel(uri);
        WebSocketNativeHandshakeHandler handler = new WebSocketNativeHandshakeHandler();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);
        handler.processAuthorize(channel, "Application Basic relam");
        context.assertIsSatisfied();
    }
	
#No. 514
#File: WebSocketNativeHandshakeHandlerTest.java

#Comment:
    /*
     * pass through for non kaazing gateway
     */

#Code:
    @Test
    public void testProcessConnect() throws URISyntaxException, Exception {

        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);

        context.checking(new Expectations() {

            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processConnect(with(aNonNull(WebSocketChannel.class)), with(aNonNull(WSURI.class)),
                                                  with(equal(new String[] {"x-kaazing-handshake", "foo"})));
                will(new CustomAction("will fire connectionOpen") {

                    @Override
                    public Object invoke(Invocation invocation) {
                        WebSocketHandlerListener listener = (WebSocketHandlerListener)lookup("listener");
                        WebSocketChannel channel = (WebSocketChannel)invocation.getParameter(0);
                        listener.connectionOpened(channel, "foo");
                        return null;
                    }
                });
                oneOf(listener).connectionOpened(with(aNonNull(WebSocketChannel.class)), with(aNull(String.class)));
            }
        });

        WSURI uri = new WSURI("ws://localhost:8001/echo");
        WebSocketChannel channel = createNativeChannel(uri);

        WebSocketNativeHandshakeHandler handler = new WebSocketNativeHandshakeHandler();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);

        handler.processConnect(channel, uri, new String[] {"foo"});
        context.assertIsSatisfied();
    }

	

#No. 515
#File: WebSocketNativeBalancingHandlerTest.java

#Comment:
    /*
     * pass through
     */

#Code:
    @Test
    public void testProcessAuthorize() throws URISyntaxException {

        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);

        context.checking(new Expectations() {
            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processAuthorize(with(aNonNull(WebSocketChannel.class)), with("Application Basic relam"));
                will(new CustomAction("will fire 401 challenge") {

                    @Override
                    public Object invoke(Invocation invocation) {
                        WebSocketHandlerListener listener = (WebSocketHandlerListener)lookup("listener");
                        WebSocketChannel channel = (WebSocketChannel)invocation.getParameter(0);
                        listener.authenticationRequested(channel, "location", (String)invocation.getParameter(1));
                        return null;
                    }
                });
                oneOf(listener).authenticationRequested(with(aNonNull(WebSocketChannel.class)), with("location"), with("Application Basic relam"));
            }
        });

        WSURI uri = new WSURI("ws://locationhost:8001/echo");
        WebSocketChannel channel = new WebSocketChannel(uri);

        WebSocketNativeBalancingHandler handler = new WebSocketNativeBalancingHandler();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);
        handler.processAuthorize(channel, "Application Basic relam");
        context.assertIsSatisfied();
    }

#No. 516
#File: WebSocketNativeBalancingHandlerTest.java

#Comment:
    /*
     * pass through
     */

#Code:
    @Test
    public void testProcessBinaryMessage() throws URISyntaxException {

        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);

        final WrappedByteBuffer message = new WrappedByteBuffer("test message".getBytes());
        context.checking(new Expectations() {
            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processBinaryMessage(with(aNonNull(WebSocketChannel.class)), with(message));
                will(new CustomAction("will fire text message received") {

                    @Override
                    public Object invoke(Invocation invocation) {
                        WebSocketHandlerListener listener = (WebSocketHandlerListener)lookup("listener");
                        WebSocketChannel channel = (WebSocketChannel)invocation.getParameter(0);
                        listener.binaryMessageReceived(channel, message);
                        return null;
                    }
                });
                oneOf(listener).binaryMessageReceived(with(aNonNull(WebSocketChannel.class)), with(message));
            }
        });

        WSURI uri = new WSURI("ws://locationhost:8001/echo");
        WebSocketChannel channel = getNativeChannel(uri);

        WebSocketNativeBalancingHandler handler = new WebSocketNativeBalancingHandler();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);
        handler.processBinaryMessage(channel, message);
        context.assertIsSatisfied();
    }

#No. 517
#File: WebSocketNativeBalancingHandlerTest.java

#Comment:
    /*
     * pass through
     */

#Code:
    @Test
    public void testProcessTextMessage() throws URISyntaxException {
        Mockery context = new Mockery();
        final WebSocketHandler nextHandler = context.mock(WebSocketHandler.class);
        final WebSocketHandlerListener listener = context.mock(WebSocketHandlerListener.class);
        final WrappedByteBuffer message = new WrappedByteBuffer("test message".getBytes());
        
        context.checking(new Expectations() {
            {
                oneOf(nextHandler).setListener(with(aNonNull(WebSocketHandlerListener.class)));
                will(saveParameter("listener", 0));
                oneOf(nextHandler).processTextMessage(with(aNonNull(WebSocketChannel.class)), with("test message"));
                will(new CustomAction("will fire message received") {

                    @Override
                    public Object invoke(Invocation invocation) {
                        WebSocketHandlerListener listener = (WebSocketHandlerListener)lookup("listener");
                        WebSocketChannel channel = (WebSocketChannel)invocation.getParameter(0);
                        listener.binaryMessageReceived(channel, message);
                        return null;
                    }
                });
                oneOf(listener).binaryMessageReceived(with(aNonNull(WebSocketChannel.class)), with(aNonNull(WrappedByteBuffer.class)));
            }
        });

        WSURI uri = new WSURI("ws://locationhost:8001/echo");
        WebSocketChannel channel = getNativeChannel(uri);

        WebSocketNativeBalancingHandler handler = new WebSocketNativeBalancingHandler();
        handler.setNextHandler(nextHandler);
        handler.setListener(listener);
        handler.processTextMessage(channel, "test message");
        context.assertIsSatisfied();
    }


#No. 518
#File: WebsiteRequest.java

#Comment:
    /**
     * Parameter helper
     */

#Code:
    public void addParameter(String key, String value) {
        parameter.put(key, value);
    }

#No. 519
#File: WebsiteRequest.java

#Comment:
    /*
     * URL helper
     */

#Code:
    private static String getRootUrlFromRequest(HttpServletRequest req) {
        String requestUrl = req.getRequestURL().toString();
        return requestUrl.substring(0, requestUrl.indexOf(req.getRequestURI())) + "/";
    }
	
#No. 520
#File: WebsiteChooserFragment.java

#Comment:
    /***************************
     * ViewHolderListener
     ***************************/

#Code:

    @Override
    public void onClick(Object object) {
        if (object instanceof Integer) {
            FragmentManager fm = getActivity().getSupportFragmentManager();
            DialogFragment dialogFragment = WebsiteDialogFragment.newInstance(null);
            dialogFragment.show(fm, dialogFragment.getClass().getSimpleName());
        } else if (object instanceof Website) {

            Website website = (Website) object;
            if (mSelectedWebsites.contains(website)) {
                mSelectedWebsites.remove(website);
            } else {
                mSelectedWebsites.add(website);
            }
        }
    }
	
#No. 521
#File: WebsiteChooserFragment.java

#Comment:
    /***************************
     * Event
     ***************************/

#Code:

    @Subscribe
    public void onRemoteWebsiteLoaded(OnRemoteWebsiteResponseEvent event) {
        Log.d(TAG, "onRemoteWebsiteLoaded, count? " + event.websiteList.size());
        if (event.isSuccessful) {
            setAdapterData(event.websiteList);
        } else {
            Toast
                    .makeText(
                            getActivity(),
                            getActivity().getString(R.string.error_server_unknown),
                            Toast.LENGTH_SHORT)
                    .show();
        }
    }
	
#No. 522
#File: WebSecConfig.java

#Comment:
    /**
     * disable default. then read father class's gethttp method. 
     */

#Code:



    @Override
    protected void configure(HttpSecurity http) throws Exception {

        http
        .addFilter(new WebAsyncManagerIntegrationFilter())
        .exceptionHandling().and()
        .headers().and()
        .addFilter(shellExecExceptionTranslationFilter())
        .sessionManagement().and()
        .securityContext().and()
        .requestCache().and()
        .anonymous().and()
        .servletApi().and()
        .apply(new DefaultLoginPageConfigurer<HttpSecurity>()).and()
        .logout();
        
        // copy from father class's getHttp method.
        
        http.authorizeRequests()
                .antMatchers("/", //
                		"/vaadinServlet/**", //
                		"/icon-images/**", //
                		"/autologin",
                		"/view/**", //
                		"/download/**",//
                		"/test/**")//
                .permitAll()
                .antMatchers("/VAADIN/**").permitAll().
                anyRequest().fullyAuthenticated().and().logout().logoutRequestMatcher(new AntPathRequestMatcher("/logout"));
    }
	
#No. 523
#File: WebMercatorTile.java

#Comment:
    /**
     * Tile definition equations from: TODO URL
     */

#Code:
    public WebMercatorTile(double lat, double lon) {
        xtile = (int) Math.floor((lon + 180) / 360 * (1 << ZOOM));
        ytile = (int) Math.floor((1 - Math.log(Math.tan(Math.toRadians(lat))
                + 1 / Math.cos(Math.toRadians(lat))) / Math.PI) / 2 * (1 << ZOOM));
    }
	
#No. 524
#File: WebappServiceImpl.java

#Comment:
  /***************************************************************************
   * {@link WebappService} Interface
   **************************************************************************/

#Code:

  @Override
  public UserBean getCurrentUser() {
    UserBean user = _currentUserService.getCurrentUser();
    if (user == null)
      user = _currentUserService.getAnonymousUser();
    return user;
  }

#No. 525
#File: WebAppRoutes.java

#Comment:
    /**
     * Minics an application server environment
     */

#Code:
    public static void main(String[] args) throws Exception{
        JettyHelper.server(8080, JettyHelper.webapp());
    }
	
#No. 526
#File: WeatherDataParser.java

#Comment:
    /**
     * Given a string of the form returned by the api call:
     * http://api.openweathermap.org/data/2.5/forecast/daily?q=94043&mode=json&units=metric&cnt=7
     * retrieve the maximum temperature for the day indicated by dayIndex
     * (Note: 0-indexed, so 0 would refer to the first day).
     */

#Code:
    public static double getMaxTemperatureForDay(String weatherJsonStr, int dayIndex)
            throws JSONException {
        JSONObject weatherJson = new JSONObject(weatherJsonStr);
        return weatherJson.getJSONArray("list")
                .getJSONObject(dayIndex)
                .getJSONObject("temp")
                .getDouble("max");
    }
	

#No. 527
#File: WearableServiceImpl.java

#Comment:
    /*
     * Channels
     */

#Code:

    @Override
    public void closeChannel(IWearableCallbacks callbacks, String s) throws RemoteException {
        Log.d(TAG, "unimplemented Method: closeChannel: " + s);
    }

#No. 528
#File: WearableServiceImpl.java

#Comment:
    /*
     * Connection deprecated
     */

#Code:

    @Override
    @Deprecated
    public void putConnection(IWearableCallbacks callbacks, ConnectionConfiguration config) throws RemoteException {
        Log.d(TAG, "unimplemented Method: putConnection");
    }

#No. 529
#File: WearCommHelper.java

#Comment:
    /*
     * Ride values.
     */

#Code:

    public void updateRideOngoing(boolean ongoing) {
        Log.d();
        updateValueNow(CommConstants.PATH_RIDE_ONGOING, ongoing);
    }

#No. 530
#File: WearCommHelper.java

#Comment:
    /*
     * Preferences.
     */

#Code:

    public void updatePreferences() {
        Log.d();
        PutDataMapRequest putDataMapRequest = PutDataMapRequest.create(CommConstants.PATH_PREFERENCES);
        DataMap dataMap = putDataMapRequest.getDataMap();
        dataMap.putString(CommConstants.EXTRA_UNITS, UnitUtil.getUnits());

        PutDataRequest request = putDataMapRequest.asPutDataRequest();
        Wearable.DataApi.putDataItem(mGoogleApiClient, request);
    }
	

#No. 531
#File: WearableServiceImpl.java

#Comment:
    /*
     * Config
     */

#Code:

    @Override
    public void putConfig(IWearableCallbacks callbacks, final ConnectionConfiguration config) throws RemoteException {
        handler.post(new CallbackRunnable(callbacks) {
            @Override
            public void run(IWearableCallbacks callbacks) throws RemoteException {
                wearable.createConnection(config);
                callbacks.onStatus(Status.SUCCESS);
            }
        });
    }

#No. 532
#File: WearableServiceImpl.java

#Comment:
    /*
     * DataItems
     */

#Code:

    @Override
    public void putData(IWearableCallbacks callbacks, final PutDataRequest request) throws RemoteException {
        Log.d(TAG, "putData: " + request.toString(true));
        handler.post(new CallbackRunnable(callbacks) {
            @Override
            public void run(IWearableCallbacks callbacks) throws RemoteException {
                DataItemRecord record = wearable.putData(request, packageName);
                callbacks.onPutDataResponse(new PutDataResponse(0, record.toParcelable()));
            }
        });
    }

#No. 533
#File: WearableServiceImpl.java

#Comment:
    /*
     * Capability
     */

#Code:

    @Override
    public void getConnectedCapability(IWearableCallbacks callbacks, String s1, int i) throws RemoteException {
        Log.d(TAG, "unimplemented Method: getConnectedCapability " + s1 + ", " + i);
    }

#No. 534
#File: WearableServiceImpl.java

#Comment:
    /*
     * Apple Notification Center Service
     */

#Code:

    @Override
    public void injectAncsNotificationForTesting(IWearableCallbacks callbacks, AncsNotificationParcelable notification) throws RemoteException {
        Log.d(TAG, "unimplemented Method: injectAncsNotificationForTesting: " + notification);
    }

#No. 535
#File: WeappJsBaseTestCase.java

#Comment:
    /**
     * Test basic startup/shutdown of Application
     */

#Code:
    @MediumTest
    public void testSimpleCreate() {
        createApplication();
    }

#No. 536
#File: WeaponTest.java

#Comment:
    /**
     * Gauss has low heat test specially
     */

#Code:
    @Test
    public void testGetStat_gauss() throws Exception {
        final BallisticWeapon gauss = (BallisticWeapon) ItemDB.lookup("GAUSS RIFLE");
        assertEquals(gauss.getDamagePerShot() / gauss.getHeat(null), gauss.getStat("d/h", null), 0.0);
    }
	
#No. 537
#File: WeakListenerSetTest.java

#Comment:
	/**
	 * There is no real way to test this since
	 * the system will garbage collect whenever it feels like it...
	 */

#Code:
	@Test
	public void testCleanup() {
		IListenerSet<TestListener> listeners = new WeakListenerSet<TestListener>();
		
		listeners.add(new TestListener());
		
		attemptGC();
		
		TestListener listener = new TestListener();
		listeners.add(listener);
		
		assertEquals("If this failed it probably isn't a true failure.  This testing is assuming that a garbage collection is being performed which may not be the case.", 1, listeners.size());
		
		listener = null;
		
		attemptGC();
		
		assertEquals(1, listeners.size());
	}
	
#No. 538
#File: WaypointOverlay.java

#Comment:
	 /**
	 * Overriden for debugging
	 */

#Code:
	 @Override
	 protected void onDrawItem(Canvas c, int index, Point curScreenCoords) {
	 super.onDrawItem(c, index, curScreenCoords);
	
	 WaypointItem wp = mItemList.get(index);
	 Log.d("WaypointOverlay", String.format("%s screen=%d,%d", wp,
	 curScreenCoords.x, curScreenCoords.y));
	 }
	 
#No. 539
#File: WayOverlay.java

#Comment:
	/**
	 * This method should be called after ways have been added to the overlay.
	 */

#Code:
	protected final void populate() {
		super.requestRedraw();
	}
	
#No. 540
#File: WavefrontExpansion.java

#Comment:
  /* checks "rxn_needs" for the enabled reactions
   * picks up the enabled products using the enabled reactions
   * adds whichever ones are new reachables to "R"
   *
   * marks the products with possible parents as the substrates
   * of the enabled reactions into "R_parent_candidates"
   *
   * adds to layer either this.R_by_layers_in_host (orgID!=null)
   * or this.R_by_layers (orgID==null)
   *
   * updates the "rxn_needs" by removing the preconditions in
   * case new reactions are enabled with these new Reachables
   *
   * so: reads and updates this.rxn_needs, add to this.R,
   *     adds to this.R_parent_candidates,
   *     adds to this.R_by_layer (or in_host if orgID!=null)
   */

#Code:
  private boolean pushWaveFront(Long orgID, int layer) {
    boolean isInsideHost = orgID != null;

    Set<Long> enabledRxns = extractEnabledRxns(orgID);

    if (isInsideHost)
      logProgress("Org: %d, num enabled rxns: %d\n", orgID, enabledRxns.size());
    Set<Long> newReachables = productsOf(enabledRxns);

    Set<Long> uniqNew = new HashSet<Long>(newReachables);
    uniqNew.removeAll(R);
    if (uniqNew.size() > 0) {
      addToLayers(uniqNew, layer, true /* add to existing layer */, isInsideHost);

    }

    R.addAll(newReachables);
    updateEnabled(newReachables);

    return uniqNew.size() > 0; // at least one new node in this layer
  }
  
#No. 541
#File: WatchdogService.java

#Comment:
	/**
	 * Terminal Method
	 */

#Code:
	public void startWatchdogs() {
		for (final Runnable r : watchdogs) {
			executorService.execute(r);
		}
	}
	
#No. 542
#File: WarmupUtils.java

#Comment:
    /**
     * set the proper body length, checksum and override tag 52, tag 60
     * 
     * Body length

        The Body length is the byte count starting at tag 35 (included) all the way to tag 10 (excluded). SOH separators do count in the body length.
        For Example:
        8=FIX.4.2|9=65|35=A|49=SERVER|56=CLIENT|34=177|52=20090107-18:15:16|98=0|108=30|10=062|
        Has a Body length of 65 with the following breakdown, length(tag#)
        5(35) + 10(49) + 10(56) + 7(34) + 21(52) + 5(98) + 7(108)
        
        The SOH delimiter at the end of a Tag=Value belongs to the Tag
        
     * @return
     */

#Code:
    public static Message doDecode( Decoder decoder, byte[] bytes, int offset, int length ) {

        // search for 9= and replace with correct length
        
        int bodyStart = overrideTagLen( bytes, offset, length );

        overrideDates( bytes, offset, length, bodyStart );

        overrideTagCheckSum( bytes, offset, length, bodyStart );
        
        return decoder.decode(  bytes, offset, length );
    }
	
#No. 543
#File: WapRequestBase.java

#Comment:
    /**
     * currently throws no exception
     */

#Code:
    public ResponseBase execute()
        throws AlipayException
    {
        try
        {
            String params = Request.Get(this.toURL())
                .execute()
                .returnContent()
                .asString();

            Properties prop = parseHttpParam(params);
            if (prop.getProperty(KEY_RES_ERROR)!=null)
                throw(
                    new AlipayException(
                        prop.getProperty(KEY_RES_ERROR_MSG)
                            .toUpperCase()
                            .replace(' ','_')
                ));
            // else
            prop.putAll(parseXML(prop.getProperty(KEY_RES_DATA)));

            return(new ResponseBase(params, prop));
        }
        catch (IOException ex)
        {
            throw(new AlipayException(ex));
        }
    }
	
#No. 544
#File: Wands.java

#Comment:
	/*
	 * Public API 
	 */

#Code:
	
	public void initialize(WandPlugin plugin) 
	{
		this.plugin = plugin;
		load();
	}

#No. 545
#File: Wands.java

#Comment:
    /*
     *  Helper functions
     */

#Code:
	
	public Spells getSpells()
	{
		return spells;
	}

#No. 546
#File: Wands.java

#Comment:
	/*
	 * Internal functions, do not call
	 */

#Code:
	public void setSpells(Spells spells)
	{
		this.spells = spells;
	}

#No. 547
#File: Wands.java

#Comment:
	/*
	 * Protected functions
	 */

#Code:
	protected void loadProperties()
	{
		PluginProperties properties = new PluginProperties(propertiesFile);
		properties.load();
		
		// Get and set all properties
		wandTypeId = properties.getInteger("wand-type-id", wandTypeId);
		String wandUsers = properties.getString("wand-users", "");
		String wandMods = properties.getString("wand-mods", "");
		String wandAdmins = properties.getString("wand-admins", "");
		String wandDenyUsers = properties.getString("wand-deny-users", "");
		
		String itemHelp = properties.getProperty("wand-item-help", "true");
		showItemHelp = itemHelp.equalsIgnoreCase("true");
		
		parsePermissions(wandUsers, wandMods, wandAdmins, wandDenyUsers);
		
		properties.save();
	}
	

#No. 548
#File: WandPlayerListener.java

#Comment:
	 /**
     * Called when a player plays an animation, such as an arm swing
     * 
     * @param event Relevant event details
     */

#Code:
	@Override
    public void onPlayerAnimation(PlayerAnimationEvent event) 
	{
		Player player = event.getPlayer();
		if (event.getAnimationType() == PlayerAnimationType.ARM_SWING)
		{
			if (event.getPlayer().getInventory().getItemInHand().getTypeId() == wands.getWandTypeId())
			{
				WandPermissions permissions = wands.getPermissions(player.getName());	
				if (!permissions.canUse())
				{
					return;
				}
				
				Inventory inventory = player.getInventory();
				ItemStack[] contents = inventory.getContents();
				
				SpellVariant spell = null;
				for (int i = 0; i < 9; i++)
				{
					if (contents[i].getType() == Material.AIR || contents[i].getTypeId() == wands.getWandTypeId())
					{
						continue;
					}
					spell = wands.getSpells().getSpell(contents[i].getType(), player);
					if (spell != null)
					{
						break;
					}
				}
				
				if (spell != null)
				{
					wands.getSpells().castSpell(spell, player);
				}
				
			}
		}
    }

#No. 549
#File: WandPlayerListener.java

#Comment:
    /**
     * Called when a player uses an item
     * 
     * @param event Relevant event details
     */

#Code:
	@Override
    public void onPlayerItem(PlayerItemEvent event) 
	{
		int materialId = event.getPlayer().getInventory().getItemInHand().getTypeId();
		Player player = event.getPlayer();
		WandPermissions permissions = wands.getPermissions(player.getName());

		if (!permissions.canUse())
		{
			return;
		}
		
		boolean cycleSpells = false;

		cycleSpells = player.isSneaking();
		if (materialId == wands.getWandTypeId())
		{	
			if (cycleSpells)
			{
				if (!cycleMaterials(event.getPlayer()))
				{
					cycleSpells(event.getPlayer());
				}
			}
			else
			{
				cycleSpells(event.getPlayer());
			}
		}
		else
		{
			spellHelp(event.getPlayer());
		}
    }
	
#No. 550
#File: WandminPlayerListener.java

#Comment:
	 /**
     * Called when a player plays an animation, such as an arm swing
     * 
     * @param event Relevant event details
     */

#Code:
	@Override
    public void onPlayerAnimation(PlayerAnimationEvent event) 
	{
		if (event.getAnimationType() == PlayerAnimationType.ARM_SWING)
		{
			if (event.getPlayer().getInventory().getItemInHand().getTypeId() == plugin.getWandTypeId())
			{
				WandPermissions permissions = plugin.getPermissions(event.getPlayer().getName());	
				if (!permissions.canUse())
				{
					return;
				}
				
				PlayerWandList wands = plugin.getPlayerWands(event.getPlayer());
				Wand wand = wands.getCurrentWand();
				if (wand == null)
				{
					return;
				}
				wand.use(plugin, event.getPlayer());
			}
		}
    }

#No. 551
#File: WandminPlayerListener.java

#Comment:
    /**
     * Called when a player uses an item
     * 
     * @param event Relevant event details
     */

#Code:
	@Override
    public void onPlayerItem(PlayerItemEvent event) 
	{
		if (event.getPlayer().getInventory().getItemInHand().getTypeId() == plugin.getWandTypeId())
		{
			WandPermissions permissions = plugin.getPermissions(event.getPlayer().getName());	
			if (!permissions.canUse())
			{
				return;
			}
			
			PlayerWandList wands = plugin.getPlayerWands(event.getPlayer());
			Wand wand = wands.getCurrentWand();
			if (wand == null)
			{
				return;
			}
			wand.nextCommand();
			event.getPlayer().sendMessage(" " + wand.getName() + " : " + wand.getCurrentCommand().getName());
		}
    }

#No. 552
#File: WandminPlayerListener.java

#Comment:
    /**
     * Called when a player joins a server
     *
     * @param event Relevant event details
     */

#Code:
    @Override
    public void onPlayerJoin(PlayerEvent event) 
    {
    	PlayerWandList wands = plugin.getPlayerWands(event.getPlayer().getName());
    	wands.setPlayer(event.getPlayer());
    	plugin.save();
    }

#No. 553
#File: WandminPlayerListener.java

#Comment:
    /**
     * Called when a player leaves a server
     *
     * @param event Relevant event details
     */

#Code:
    @Override
    public void onPlayerQuit(PlayerEvent event) 
    {
    	PlayerWandList wands = plugin.getPlayerWands(event.getPlayer().getName());
    	wands.setPlayer(null);
    	plugin.save();
    }
	
#No. 554
#File: WallpaperChooser.java

#Comment:
    /*
     * When using touch if you tap an image it triggers both the onItemClick and
     * the onTouchEvent causing the wallpaper to be set twice. Ensure we only
     * set the wallpaper once.
     */

#Code:
    private void selectWallpaper(int position) {
        if (mIsWallpaperSet) {
            return;
        }

        mIsWallpaperSet = true;
        try {
            InputStream stream = getResources().openRawResource(mImages.get(position));
            setWallpaper(stream);
            setResult(RESULT_OK);
            finish();
        } catch (IOException e) {
            Log.e(Launcher.LOG_TAG, "Failed to set wallpaper: " + e);
        }
    }
	
#No. 555
#File: WaitLayerUI.java

#Comment:
    /*
     * Paint
     */

#Code:
    private void paintRefreshIcon(Graphics2D g2, JComponent c) {
        ImageIcon imageGray = (ImageIcon) REFRESH_ICON_GRAY;
        ImageIcon imageWhite = (ImageIcon) REFRESH_ICON_WHITE;
        int x = ((c.getWidth() - imageGray.getIconWidth()) / 2);
        int y = ((c.getHeight() - imageGray.getIconHeight()) / 2);

        if (mouseOver) {
            g2.drawImage(imageWhite.getImage(), x, y, null);
        } else {
            g2.drawImage(imageGray.getImage(), x, y, null);
        }
    }
	
#No. 556
#File: WaitForNatTablePopupMenu.java

#Comment:
	/**
	 * Constructor.
	 */

#Code:
	public WaitForNatTablePopupMenu(Control control, int x, int y) {
		super(control);
		this.control = control;
		this.x = x;
		this.y = y;
	}
	
#No. 557
#File: WaitForChargeParameterDiscoveryRes.java

#Comment:
	/**
	 * If the signature of one ore more sales tariffs cannot be verified, then the sales tariffs should be ignored
	 * rather than terminating the charge process. The charge process can then proceed based solely on the 
	 * PMaxSchedule
	 * 
	 * @param saSchedules The schedule(s) from the secondary actor including PMaxSchedule and potential SalesTariff
	 * 					  elements.
	 */

#Code:
	private void deleteUnverifiedSalesTariffs(SAScheduleListType saSchedules) {
		List<SAScheduleTupleType> saScheduleTuples = saSchedules.getSAScheduleTuple();
		
		for (SAScheduleTupleType saScheduleTuple : saScheduleTuples) {
			saScheduleTuple.setSalesTariff(null);
		}
	}
	
#No. 558
#File: WadlZipper.java

#Comment:
    /**
     * Just for easily inject dependencies on tests.
     */

#Code:
    void saveTo(HttpClient httpClient, Zip zip) throws IOException, URISyntaxException {
        try {
            final String wadlContent = httpClient.getAsString(wadlUri);
            zip.add(DEFAULT_WADL_FILENAME, IOUtils.toInputStream(wadlContent));

            for (String grammarUri : new GrammarsUrisExtractor().extractFrom(wadlContent)) {
                final URI uri = new URI(grammarUri);
                final String name = composesGrammarFileNameWith(uri);
                final InputStream inputStream = httpClient.getAsStream(wadlUri.resolve(uri));
                zip.add(name, inputStream);
            }

        } finally {
            zip.close();
        }
    }
	
#No. 559
#File: VwapServerTest.java

#Comment:
    /**
     * Test 10
     */

#Code:
    @Test
    @Ignore
    public void should_generate_one_google_vwap_event_when_a_google_trade_is_done() {
        // given
        TestSubscriber<Vwap> testSubscriber = new TestSubscriber<>();
        HttpRequest request = createRequest("code", "GOOGL");
        vwapServer.getEvents(request).subscribe(testSubscriber);
        // when
        tradeSourceSubject.onNext(new Trade("GOOGL", 10, 7058.673).toJson());
        tradeSourceSubject.onNext(new Trade("APPLE", 10, 981.8).toJson());
        scheduler.advanceTimeBy(1, TimeUnit.SECONDS);
        // then
        List<Vwap> events = testSubscriber.getOnNextEvents();
        assertThat(events).hasSize(1);
        Vwap vwap = events.get(0);
        assertThat(vwap.code).isEqualTo("GOOGL");
        assertThat(vwap.vwap).isEqualTo(705.8673);
        assertThat(vwap.volume).isEqualTo(10);
    }

#No. 560
#File: VwapServerTest.java

#Comment:
    /**
     * Test 11
     */

#Code:
    @Test
    @Ignore
    public void should_add_all_google_trades_to_generate_vwap_events() {
        // given
        TestSubscriber<Vwap> testSubscriber = new TestSubscriber<>();
        HttpRequest request = createRequest("code", "GOOGL");
        vwapServer.getEvents(request).subscribe(testSubscriber);
        // when
        tradeSourceSubject.onNext(new Trade("GOOGL", 10, 7058).toJson());
        tradeSourceSubject.onNext(new Trade("GOOGL", 10, 7062).toJson());
        scheduler.advanceTimeBy(1, TimeUnit.SECONDS);
        // then
        List<Vwap> events = testSubscriber.getOnNextEvents();
        assertThat(events).isNotEmpty();
        Vwap vwap = events.get(events.size()-1);
        assertThat(vwap.code).isEqualTo("GOOGL");
        assertThat(vwap.vwap).isEqualTo(706);
        assertThat(vwap.volume).isEqualTo(20);
    }

#No. 561
#File: VwapServerTest.java

#Comment:
    /**
     * Test 12
     */

#Code:
    @Test
    @Ignore
    public void should_generate_at_most_one_event_per_sec() {
        // given
        TestSubscriber<Vwap> testSubscriber = new TestSubscriber<>();
        HttpRequest request = createRequest("code", "GOOGL");
        vwapServer.getEvents(request).subscribe(testSubscriber);
        // when
        for (int i = 1; i < 11; i++) {
            tradeSourceSubject.onNext(new Trade("GOOGL", 10, 7000).toJson(), i * 50);
        }
        scheduler.advanceTimeBy(2, TimeUnit.SECONDS);
        // then
        List<Vwap> events = testSubscriber.getOnNextEvents();
        assertThat(events).hasSize(1);
        Vwap vwap = events.get(0);
        assertThat(vwap.code).isEqualTo("GOOGL");
        assertThat(vwap.vwap).isEqualTo(700);
        assertThat(vwap.volume).isEqualTo(100);
    }
	
#No. 562
#File: Vvr.java

#Comment:
    /*
     * Should be getUuidString(), but, in this case, the JMX attribute would be 'uuidString'
     * 
     * @see io.eguan.vold.model.VvrMXBean#getUuid()
     */

#Code:
    @Override
    public final String getUuid() {
        return getUuidUuid().toString();
    }
	
#No. 563
#File: VTProd.java

#Comment:
    /** Backward pass: dG/d psi(y_a) += dG/dp(y) dp(y)/d psi(y_a)
     * 
     * dp(y)/d psi(y_a) =  prod_{b  neq a}  psi_b(y_b)
     */

#Code:
    @Override
    public void backward() {
        MVecArray<VarTensor> xs = modIn.getOutput();
        MVecArray<VarTensor> xsAdj = modIn.getOutputAdj();
        for (int a=0; a<xsAdj.dim(); a++) {
            VarTensor xAdj = xsAdj.get(a);
            // Compute the product of all the input factors except for a.
            // We compute this cavity by brute force, rather than dividing out from the joint.
            VarTensor prod = new VarTensor(yAdj);
            for (int b=0; b<xsAdj.dim(); b++) {
                if (a == b) { continue; }
                prod.prod(xs.get(b));
            }
            xAdj.add(prod.getMarginal(xAdj.getVars(), false));
        }
    }
	
#No. 564
#File: vSphereCloudSlave.java

#Comment:
    /**
     * For UI.
     *
     * @return original launcher
     */

#Code:
    public ComputerLauncher getDelegateLauncher() {
        return ((vSphereCloudLauncher) getLauncher()).getLauncher();
    }

#No. 565
#File: VolumeID.java

#Comment:
	/** 
	 * if s is null take no effect
	 */

#Code:
	public VolumeID setLabel(String s) {
		if (s != null) 
			label = s;
		return this;
	}
	
#No. 566
#File: VolleyImageUtils.java

#Comment:
    /**
     * create a copied image.

     */

#Code:
    public static boolean copyBitmapFile(Context context, Uri photoUri, String outputPath) throws IOException {
        // Load image from path
        InputStream input = context.getContentResolver().openInputStream(photoUri);

        // compress it
        Bitmap bitmapOrigin = BitmapFactory.decodeStream(input);
        if (bitmapOrigin == null) return false;
        // save to file
        FileOutputStream output = new FileOutputStream(outputPath);
        return bitmapOrigin.compress(Bitmap.CompressFormat.JPEG, 100, output);
    }
	
#No. 567
#File: VoidElementTest.java

#Comment:
  /**
   * Voids of size > 10 will have body. Under the previous schema for writing voids, value 127 would have failed.
   */

#Code:
  @Test
  public void test10To130()
  {
    for (int i = 10; i < 130; ++i)
    {
      VoidElement voidz = new VoidElement(i);
      MockWriter mw = new MockWriter();
      voidz.writeElement(mw);
      Assert.assertEquals(i, mw.getBuff().position());
    }
  }
  
#No. 568
#File: VoicesBeatOffsetterTest.java

#Comment:
	/**
	 * Test file "BeatOffsetsStrategyTest-2.xml".
	 */

#Code:
	@Test public void computeBeatOffsets_File2() {
		Score score = MusicXmlScoreFileInputTest.loadXMLTestScore("VoicesBeatOffsetterTest-2.xml");

		LinkedList<VoiceSpacing> voiceSpacings = createVoiceSpacings(score);
		BeatOffset[] beatOffsets = testee.compute(voiceSpacings,
			fr(3, 4), minimalBeatsOffsetIs).toArray(new BeatOffset[0]);

		//file must have 6 beat offsets with increasing mm offsets
		assertEquals(6, beatOffsets.length);
		assertEquals(fr(0, 4), beatOffsets[0].getBeat());
		assertEquals(fr(1, 8), beatOffsets[1].getBeat());
		assertEquals(fr(1, 4), beatOffsets[2].getBeat());
		assertEquals(fr(2, 4), beatOffsets[3].getBeat());
		assertEquals(fr(5, 8), beatOffsets[4].getBeat());
		assertEquals(fr(3, 4), beatOffsets[5].getBeat());
		for (int i = 0; i < beatOffsets.length - 1; i++) {
			assertTrue(beatOffsets[i].getOffsetMm() < beatOffsets[i + 1].getOffsetMm());
		}

#No. 569
#File: VoicesBeatOffsetterTest.java

#Comment:
	/**
	 * Test file "BeatOffsetsStrategyTest-3.xml".
	 */

#Code:
	@Test public void computeBeatOffsets_File3() {
		Score score = MusicXmlScoreFileInputTest.loadXMLTestScore("VoicesBeatOffsetterTest-3.xml");

		LinkedList<VoiceSpacing> voiceSpacings = createVoiceSpacings(score);
		BeatOffset[] beatOffsets = testee.compute(voiceSpacings,
			fr(5, 4), minimalBeatsOffsetIs).toArray(new BeatOffset[0]);

		//file must have 8 beat offsets with increasing mm offsets
		//special difficulty: last eighth note must be further to the right as preceding quarter
		//in other voice, even the distance between the whole note and the last eighth would be big enough
		assertEquals(8, beatOffsets.length);
		assertEquals(fr(0, 4), beatOffsets[0].getBeat());
		assertEquals(fr(1, 8), beatOffsets[1].getBeat());
		assertEquals(fr(1, 4), beatOffsets[2].getBeat());
		assertEquals(fr(2, 4), beatOffsets[3].getBeat());
		assertEquals(fr(3, 4), beatOffsets[4].getBeat());
		assertEquals(fr(4, 4), beatOffsets[5].getBeat());
		assertEquals(fr(9, 8), beatOffsets[6].getBeat());
		assertEquals(fr(5, 4), beatOffsets[7].getBeat());
		for (int i = 0; i < beatOffsets.length - 1; i++) {
			assertTrue("beat " + (i + 1) + " wrong",
				beatOffsets[i].getOffsetMm() < beatOffsets[i + 1].getOffsetMm());
		}

#No. 570
#File: VoicesBeatOffsetterTest.java

#Comment:
	/**
	 * Test file "BeatOffsetsStrategyTest-4.xml".
	 */

#Code:
	@Test public void computeBeatOffsets_File4() {
		Score score = MusicXmlScoreFileInputTest.loadXMLTestScore("VoicesBeatOffsetterTest-4.xml");

		LinkedList<VoiceSpacing> voiceSpacings = createVoiceSpacings(score);
		BeatOffset[] beatOffsets = testee.compute(voiceSpacings,
			fr(3, 4), minimalBeatsOffsetIs).toArray(new BeatOffset[0]);

		//distance between beat 1/4 and 2/4 must be width_1_4
		float is = score.getFormat().getInterlineSpace();
		assertEquals(width_1_4 * is, beatOffsets[3].getOffsetMm() - beatOffsets[2].getOffsetMm(), df);
	}
	
#No. 571
#File: VoiceFirebaseInstanceIDService.java

#Comment:
    /**
     * Called if InstanceID token is updated. This may occur if the security of
     * the previous token had been compromised. Note that this is called when the InstanceID token
     * is initially generated so this is where you would retrieve the token.
     */

#Code:
    // [START refresh_token]
    @Override
    public void onTokenRefresh() {
        // Get updated InstanceID token.
        String refreshedToken = FirebaseInstanceId.getInstance().getToken();
        Log.d(TAG, "Refreshed token: " + refreshedToken);

        // Notify Activity of FCM token
        Intent intent = new Intent(ACTION_FCM_TOKEN);
        LocalBroadcastManager.getInstance(this).sendBroadcast(intent);
    }
	


	
#No. 572
#File: VMSocketAttacher.java

#Comment:
    /**
     * Like safeAttach but wraps any checked exceptions in a RuntimeException.
     * 
     * @return
     */

#Code:
    public VirtualMachine attach() {
        try {
            return safeAttach();
        } catch(Exception e) {
            throw new RuntimeException(e);
        }
    }

	
